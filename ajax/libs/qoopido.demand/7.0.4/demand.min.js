!function(u,r,t){"use strict";var s,o,l,c,f=u.document,e="demand"in u&&u.demand,d={version:"1.0.0",cache:{},timeout:8e3,pattern:{},modules:{},handler:"module"},n=Array.prototype,i=n.slice,a=n.concat,h=Object,p=h.create,m=h.defineProperty,v=h.getOwnPropertyNames,g=h.getOwnPropertyDescriptor,y=f.createElement("a");function w(e,t,n,r){return{__proto__:null,value:e,enumerable:!!r,configurable:!!n,writable:!!t}}function x(e,t){return typeof e===t}function b(e){return e&&x(e,"object")}function j(e){return x(e,"number")&&isFinite(e)&&Math.floor(e)===e&&0<=e}function q(e,t){return e instanceof t}function k(e,t,n,r,i){m(this,e,new w(t,n,r,i))}function R(e){for(var t,n=this.prototype,r=v(n),i={constructor:new w(this,!0,!0)},o=0;(t=r[o])&&!i[t];o++)i[t]=g(n,t);try{this.prototype=p(e.prototype||e,i)}catch(e){}if(this.prototype===n)throw new TypeError("Unable to extend, prototype is not writable");return this}k.call(Object.prototype,"defineProperty",k),k.call(u.Object.prototype,"defineProperty",k),Function.prototype.defineProperty("extends",R),u.Function.prototype.defineProperty("extends",R);var P,E=(P=/^\bv?(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)(?:-[\da-z-]+(?:\.[\da-z-]+)*)?(?:\+[\da-z-]+(?:\.[\da-z-]+)*)?\b$/i,function(e){return x(e,"string")&&P.test(e)});function M(e,t,n){for(var r,i=h.keys(e),o=0;void 0!==(r=i[o])&&!1!==t.call(n,r,e[r]);o++);return n}var C,S,T,A=function(){for(var e,t=arguments[0],n=1;void 0!==(e=arguments[n]);n++)M(e,H,t);return t},O=(T=new RegExp("[xy]","g"),function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(T,I)}),$="setImmediate"in u&&"function"==typeof u.setImmediate?u.setImmediate:"MutationObserver"in u&&"function"==typeof u.MutationObserver?(C={},S=f.createElement("div"),new MutationObserver(function(e){e.forEach(function(e){var t=e.attributeName.substr(1);C[t]&&C[t](),delete C[t]})}).observe(S,{attributes:!0}),function(e){var t=O();C[t]=e,S.setAttribute("i"+t,1)}):r;function I(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}function H(e,t){var n,r=this[e];void 0!==t&&(b(t)?(n=b(r),r=void 0!==t.length?n&&void 0!==r.length?r:[]:n&&void 0===r.length?r:{},this[e]=A(r,t)):this[e]=t)}function N(e,t,n){return i.call(e,t,n)}var D,L,B,U,z=(B=/^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)|provide|reject$/,U={},X.prototype={emit:function(e,t){var n,r,i,o=U[e];if(o){for(n=N(arguments,2),r=0;i=o.on[r];r++)i.filter&&i.filter!==t||i.callback.apply(null,n);for(r=0;i=o.after[r];r++)i.filter&&i.filter!==t||i.callback.apply(null,n)}return this},on:function(e,t){return F("on",e,t),this},after:function(e,t){return F("after",e,t),this}},new X),W="WeakMap"in u&&!("ActiveXObject"in u)?u.WeakMap:(D=u.WeakMap,L=new D,_.prototype={get:function(e){return L.get(this).get(e)},set:function(e,t){return L.get(this).set(e,t),this},has:function(e){return!!this.get(e)},delete:function(e){return L.get(this).delete(e)}},_);function _(){L.set(this,new D)}function F(e,t,n){var r,i;if(x(t,"string")&&x(n,"function"))for(t=t.split(" ");r=t.shift();)r=r.split(":"),B.test(r[0])&&((U[r[0]]||(U[r[0]]={on:[],after:[]}))[e].push({callback:n,filter:r[1]}),"on"===e&&"postConfigure"===r[0]&&(i=d.modules[r[1]])&&n(i))}function X(){}function G(){return void 0===this.uuid&&this.defineProperty("uuid",O()),this}var J,K,Q,V,Y,Z,ee=(Z=new W,re.prototype={enqueue:function(){var e=N(arguments);Z.set(this,Z.get(this).concat(e)),z.emit("queueEnqueue",this.uuid,e)},dequeue:function(){var e=Z.get(this).shift();return z.emit("queueDequeue",this.uuid,e),e},get current(){return Z.get(this)[0]},get length(){return Z.get(this).length}},re.extends(G)),te=(K="object"==typeof u.safari&&u.safari.pushNotification?"beforeunload":"visibilitychange",Q=u.requestIdleCallback||function(e,t){var n=+new Date;return r(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(new Date-n))}})},t&&t.timeout)},V=u.cancelIdleCallback||function(e){t(e)},Y=new ee,u.addEventListener(K,function(e){var t;if(Y.length&&("visibilitychange"!==e.type||"hidden"===f.visibilityState))for(J=V(J);t&&t(),t=Y.dequeue(););},!0),function(e,t){Y.enqueue(e),!J&&Y.length&&(J=Q(ne,{timeout:t}))});function ne(){Y.dequeue()(),J=Y.length&&Q(ne)}function re(){var e=G.call(this);return Z.set(e,[]),e}function ie(){return+new Date}function oe(e){return y.href=e,y.href}var ae=/^(http(s?):)?\/\//i,ue=/^\.?\.\//,se=/((?:\/\/|\/\*)#)\s*(sourceMappingURL)\s*=\s*(?!(?:http[s]?:)?\/\/)(.+?)\.map(?:\s+)?(\*\/)?/g,ce=/^\//,de=/\.\w+$/,le=new RegExp("^"+oe("/")),fe=new RegExp("^demand|provide|path|exports$"),he=/^(mock:)?([+-])?((?:[-\w]+\/?)+)?(?:@(.+?))?(?:#(\d+))?!/;function pe(e,t){var n=e.replace(he,"");return ue.test(n)&&(n="/"+oe((t&&oe(t+"/../")||"/")+n).replace(le,"")),n}function me(e,t){var n=e.match(he);return(n&&n[1]?"mock:":"")+(n&&n[3]||d.handler)+"!"+pe(e,t)}var ve,ge,ye,we,xe,be,je,qe=(Oe.prototype={toString:function(){return this.major+"."+this.minor+"."+this.patch+(this.identifier.length?"-"+this.identifier.join("."):"")},compare:function(e){return Ae(this.major,e.major)||Ae(this.minor,e.minor)||Ae(this.patch,e.patch)||function(e,t){var n,r,i,o,a=0;if(e.length&&!t.length)return-1;if(!e.length&&t.length)return 1;if(!e.length&&!t.length)return 0;do{if(n=e[a],o=typeof(r=t[a]),"undefined"==(i=typeof n)&&"undefined"==o)return 0;if("undefined"==o)return 1;if("undefined"==i)return-1;if(n!==r){if("string"==i&&"string"!=o)return 1;if("string"!=i&&"string"==o)return-1;if(r<n)return 1;if(n<r)return-1}}while(++a)}(this.identifier,e.identifier)}},Oe),ke=(ge=new RegExp("^[demand]\\[(.+?)\\][state]$"),ye=/^(.+?),(\d+),(\d*),(.+?),(\d+)$/,we=function(){try{return"localStorage"in u&&u.localStorage}catch(e){return!1}}(),xe=we?u.localStorage:null,be=we&&"remainingSpace"in xe,je={},z.on("cacheMiss",function(e){te(function(){ve.clear(e.id)})}).on("cacheExceed",function(t){s("-!/demand/cache/dispose").then(function(e){te(function(){e(t.source.length),ve.set(t)},d.delay)})}).on("postRequest",function(e){e.source&&Re(e)&&(je[e.id]=!0)}).after("postProcess",function(e){je[e.id]&&te(function(){ve.set(e)},d.delay)}),(Te.prototype={get:we?function(e){var t,n;if(Re(e)){if(t="[demand]["+e.id+"]",!(n=Me(t+"[state]")))return;return 1===e.version.compare(new qe(n[0]))||n[2]&&e.lifetime&&n[2]<=ie()?void(e.invalid=!0):(e.source=Pe(t+"[value]"),te(function(){Ce(t+"[state]",n)},d.delay),!0)}}:function(){},resolve:we?function(e){this.get(e)?Se("cacheHit",e):Se("cacheMiss",e)}:function(e){Se("cacheMiss",e)},set:we?function(e){var t,n,r;if(Re(e)){t=[e.version,e.source.length,e.lifetime?ie()+e.lifetime:null,s.version],n="[demand]["+e.id+"]",Se("preCache",e,t);try{if(r=be?xe.remainingSpace:null,Ee(n+"[value]",e.source),Ce(n+"[state]",t),null!==r&&xe.remainingSpace===r)throw new Error;Se("postCache",e,t)}catch(t){Se("cacheExceed",e)}}}:function(){},clear:we?function(e){var t=me(e),n="[demand]["+t+"]";Pe(n+"[state]")&&(Ee(n+"[state]"),Ee(n+"[value]"),Se("cacheClear",Xe.get(t)||new Xe(t,null,!1)))}:function(){}}).clear.all=we?function(){var t;M(xe,function(e){(t=e.match(ge))&&this(t[1])},this)}:function(){},Te.prototype.clear.expired=we?function(){var t,n;M(xe,function(e){(t=e.match(ge))&&(n=Me("[demand]["+t[1]+"][state]"))&&0<n[2]&&n[2]<=ie()&&this(t[1])},this)}:function(){},ve=new Te);function Re(n){var r;return null!==n.cache?n.cache:(M(d.cache,function(e,t){0===n.path.indexOf(e)&&(!r||t.weight>r.weight)&&(r=t)}),r&&r.state)}function Pe(e){return xe.getItem(e)}function Ee(e,t){xe[t?"setItem":"removeItem"](e,t)}function Me(e){var t,n=Pe(e);if(n&&(t=n.match(ye)))return N(t,1)}function Ce(e,t){t[4]=ie(),Ee(e,t.join(","))}function Se(e,t,n){z.emit(e,t.id,t,n)}function Te(){te(this.clear.expired.bind(this.clear),d.delay)}function Ae(e,t){return e<t?-1:t<e?1:0}function Oe(r){if(!E(r))throw new TypeError('"version" must be a valid semver version string');r=function(){for(var e,t=0,n=(n=r.split("-"))[1]?Array.prototype.concat(n[0].split("."),n[1].split(".")):n[0].split(".");e=n[t];t++)n[t]=parseInt(e,10).toString()===e?parseInt(e,10):e;return n}(),this.major=r.shift(),this.minor=r.shift(),this.patch=r.shift(),this.identifier=r}function $e(e,t,n){return this.message=e,t&&(this.module=t),n&&(this.stack=N(n)),this}$e.prototype={toString:function(){var e=this.message+" "+(this.module?'"'+this.module+'"':"");return this.stack&&(e=$e.traverse(this.stack,e,1)),e}},$e.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=$e.traverse(r.stack,t,n+1));return t};var Ie,He,Ne,De,Le,Be,Ue,ze,We,_e=(We=new W,(ct.prototype={isPending:function(){return"pending"===We.get(this).state},isResolved:function(){return"resolved"===We.get(this).state},isRejected:function(){return"rejected"===We.get(this).state},then:function(e,t){var n=We.get(this),r=ct.defer();return n.resolved.push({handler:e||ct.resolve,dfd:r}),n.rejected.push({handler:t||ct.reject,dfd:r}),"pending"!==n.state&&$(n.handle),r.pledge},catch:function(e){return this.then(void 0,e)},always:function(e){return this.then(e,e)}}).finally=ct.prototype.always,ct.defer=function(){var n={};return n.pledge=new ct(function(e,t){n.resolve=e,n.reject=t}),n},ct.all=function(e){var t,n,r=ct.defer(),i=0;if(e.length)for(t={dfd:r,resolved:[],rejected:[],total:e.length,count:0};n=e[i];i++)ut(n,i,t);else r.resolve();return r.pledge},ct.race=function(e){for(var t,n=ct.defer(),r=0;t=e[r];r++)t.then(n.resolve,n.reject);return e.length||n.resolve(),n.pledge},ct.resolve=function(){var e=ct.defer();return e.resolve.apply(null,arguments),e.pledge},ct.reject=function(){var e=ct.defer();return e.reject.apply(null,arguments),e.pledge},ct),Fe=(ze=new W,at.prototype={get:function(e){return e?ze.get(this)[e]:ze.get(this)},set:function(e,t){ze.get(this)[e]=t},remove:function(e){delete ze.get(this)[e]}},at),Xe=(Le=new Fe,Be=/^(?:mock:|internal!)/i,Ue=[],it.pending=function(){return M(Le.get(),tt,[])},it.resolved=function(){return M(Le.get(),nt,[])},it.rejected=function(){return M(Le.get(),rt,[])},ot.prototype={enqueue:!0},ot.get=function(e,t){return Le.get(me(e,t))},ot.resolve=function(e,t){var n,r=t&&fe.test(e),i=r?this.get("internal!"+t+"/"+e):this.get(e,t);if(!i)if(r){switch(i=new ot("internal!"+t+"/"+e),e){case"demand":n=M(s,Ze,s.bind(t));break;case"provide":n=o.bind(t);break;case"path":n=t;break;case"exports":n={},i.dfd.pledge.then(this.get(t).dfd.resolve)}i.dfd.resolve(n)}else i=new ot(e,t),s("/demand/handler/"+i.type).then(function(e){i.handler=e,i.mock?i.dfd.resolve(e):ke.resolve(i)},function(){i.dfd.reject(new $e("error loading (handler)",self.id))});return i},ot.remove=function(e,t,n){var r=me(e,t),i=f.querySelector('[demand-id="'+r+'"]');Le.remove(r),Le.remove("mock:"+r),i&&i.parentNode.removeChild(i),!1!==n&&ke.clear(r)},ot.list=it,ot),Ge=(De=/(.+)\/$/,Ye.prototype={matches:function(e){return this.match.test(e)},process:function(e,t){var n=this.location[t];if(n)return e.replace(this.match,n.url)}},Ye),Je=(Ne={},function(e){var r,t="$task = "+e+"; $isTransferable = "+Qe+"; onmessage = "+function(e){var t,n=Array.prototype.slice,r=e.data;function i(e){t||(t=!0,postMessage([r[0],0,e.toString()]))}try{$task.apply($task,[function(){var e;t||(t=!0,e=n.call(arguments),postMessage([r[0],1,e],e.filter($isTransferable)))},i].concat(r[1]))}catch(e){i(e)}};return(r=new Worker(URL.createObjectURL(new Blob([t],{type:"application/javascript"})))).onmessage=function(e){var t=e.data[0],n=t?Ne[t]:null;t&&n&&(e.data[1]?n.resolve.apply(null,e.data[2]):n.reject(e.data[2]),delete Ne[t])},function(){var e=_e.defer(),t=O(),n=N(arguments);return Ne[t]=e,r.postMessage([t,n],n.filter(Qe)),e.pledge}}),Ke=(Ie=/^(?:\?|)$/,He=new Je(function(e,t,n){var r,i=new XMLHttpRequest,o=function(){this.readyState<4&&this.abort()}.bind(i);i.ontimeout=i.onerror=i.onabort=function(){t(i.statusText)},i.onprogress=i.onreadystatechange=function(){self.clearTimeout(r),r=self.setTimeout(o,1e4)},i.onload=function(){r=self.clearTimeout(r),"status"in i&&200!==i.status?t(i.statusText):e(i.responseText,i.getResponseHeader&&i.getResponseHeader("content-type"))},i.open("GET",n,!0),i.send(),r=self.setTimeout(o,1e4)}),function(r){var i;function e(e,t){t&&r.handler.validate&&!r.handler.validate(t)?r.dfd.reject(new $e("error loading (content-type)",r.id)):(r.source=e,z.emit("postRequest",r.type,r))}ae.test(r.path)||M(d.pattern,function(e,t){t.matches(r.path)&&(!i||i.weight<t.weight)&&(i=t)}),function t(n){n=n||0,r.url=f.createElement("a"),r.url.href=i?oe(i.process(r.path,n)):r.path,r.invalid&&(r.url.search+=(Ie.test(r.url.search)?"":"&")+ie()),z.emit("preRequest",r.type,r),He(r.url.href).then(e,function(e){n++,i&&i.location[n]?t(n):r.dfd.reject(new $e("error loading"+(e?" (status)":""),r.id))})}()});function Qe(e){return e instanceof ArrayBuffer||e instanceof MessagePort||"ImageBitmap"in self&&e instanceof ImageBitmap}function Ve(e,t){this[e]={url:oe(t).replace(De,"$1"),match:new RegExp("^"+t)}}function Ye(e,t){this.weight=e.length,this.match=new RegExp("^"+e),this.location=[].concat(t),M(this.location,Ve,this.location)}function Ze(e,t){this[e]=t}function et(e){Be.test(e)||this.push(e)}function tt(e,t){!Be.test(e)&&t.pledge.isPending()&&this.push(e)}function nt(e,t){!Be.test(e)&&t.pledge.isResolved()&&this.push(e)}function rt(e,t){!Be.test(e)&&t.pledge.isRejected()&&this.push(e)}function it(){return M(Le.get(),et,[])}function ot(e,t,n){var r=this,i=e.match(he)||Ue;return r.path=pe(e,t),r.mock=!!i[1],r.cache=i[2]?"+"===i[1]:null,r.type=i[3]||d.handler,r.version=new qe(i[4]||d.version),r.lifetime=i[5]&&1e3*i[5]||d.lifetime,r.id=(r.mock?"mock:":"")+r.type+"!"+r.path,r.uri=(r.mock?"mock:":"")+r.type+"@"+r.version+(j(r.lifetime)&&0<r.lifetime?"#"+r.lifetime:"")+"!"+r.path,r.dfd=_e.defer(),r.pledge=r.dfd.pledge,r.invalid=!1,r.pledge.then(function(){r.value=N(arguments)}),!1!==n&&Le.set(r.id,r),r}function at(){ze.set(this,{})}function ut(e,t,n){e.then(function(){n.resolved[t]=N(arguments),n.count++,st(n)},function(){n.rejected.push(N(arguments)),st(n)})}function st(e){e.count===e.total?e.dfd.resolve.apply(null,a.apply([],e.resolved)):e.rejected.length+e.count===e.total&&e.dfd.reject.apply(null,a.apply([],e.rejected))}function ct(e){return We.set(this,{state:"pending",handle:function(e,t){var n,r,i=We.get(this);for("pending"===i.state&&(i.state=e,i.value=t,"rejected"!==e||i[e].length||function(e){var t,n=0;for(console.warn("unhandled pledge rejection");void 0!==(t=e[n]);n++)if(q(t,Error)||q(t,$e))throw t}(t));n=i[i.state].shift();)try{if(q(r=n.handler.apply(null,i.value),ct)){r.then(n.dfd.resolve,n.dfd.reject);continue}if("resolved"===i.state&&void 0===r){n.dfd.resolve.apply(null,i.value);continue}n.dfd.resolve(r)}catch(e){n.dfd.reject(e)}i.resolved.length=0,i.rejected.length=0}.bind(this),value:null,resolved:[],rejected:[],count:0}),e(function(){var e=this,t=arguments;$(function(){We.get(e).handle("resolved",t)})}.bind(this),function(){var e=this,t=arguments;$(function(){We.get(e).handle("rejected",t)})}.bind(this)),this}function dt(e){return Array.isArray(e)}function lt(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}function ft(e,t){this[e]={weight:e.length,state:t}}function ht(e,t){"base"!==e&&(this[e]=new Ge(e,t))}function pt(e,t){var n=this[e]=this[e]||{};z.emit("preConfigure",e,n),A(n,t),z.emit("postConfigure",e,n)}function mt(){var e,t,n=N(arguments),r=this!==u?this:null,i=0;for(z.emit("preResolve",null,n,r);e=n[i];i++)x(e,"string")?n[i]=Xe.resolve(e,r).pledge:(n[i]=(t=_e.defer()).pledge,t.resolve(e));return(1<n.length?_e.all(n):n[0]).always(function(){z.emit("postResolve",null,n,r)})}mt.configure=function(e){var t=e.cache,n=e.version,r=e.delay,i=e.timeout,o=e.lifetime,a=e.base,u=e.pattern,s=e.modules,c=d.modules;return x(t,"boolean")?d.cache[""]={weight:0,state:t}:b(t)&&M(t,ft,d.cache),E(n)&&(d.version=n),j(r)&&(d.delay=1e3*r),j(i)&&(d.timeout=1e3*Math.min(Math.max(i,2),20)),j(o)&&0<o&&(d.lifetime=1e3*o),x(a,"string")&&""!==a&&(d.pattern.base=new Ge("",a)),b(u)&&M(u,ht,d.pattern),b(s)&&M(s,pt,c),mt},mt.version="7.0.4",mt.on=z.on.bind(mt),mt.get=function(e,t){var n=Xe.get(e,t);return n&&n.value},mt.list=Xe.list,mt.remove=Xe.remove,mt.cache={clear:ke.clear},z.after("cacheMiss",function(e){new Ke(e)}).after("postRequest",function(e){var t=e.handler.onPostRequest;t&&t(e)}).after("cacheHit postRequest",function(e){z.emit("preProcess",e.id,e)}).after("preRequest",function(e){var t=e.handler.onPreRequest;t&&t(e)}).after("preProcess",function(e){var t=e.handler.onPreProcess;t&&t(e),e.pledge.then(function(){z.emit("postProcess",e.id,e)}),!0===e.enqueue?l.enqueue(e):q(e.enqueue,_e)&&e.enqueue.then(function(){l.enqueue(e)})}),s=mt,u.defineProperty("demand",s),(o=function(){var e,t,n,r=x(arguments[0],"string")?arguments[0]:null,i=this!==u?this:null,o=dt(arguments[r?1:0])?arguments[r?1:0]:null,a=o?arguments[r?2:1]:arguments[r?1:0];if(c.current&&(r=(e=c.current).uri,c.process()),r)return e=e||new Xe(r,i),t=q(a,_e),n=x(a,"function"),o&&o.length?s.apply(e.path,o).then(function(){e.dfd.resolve(n?a.apply(null,arguments):a)},function(){e.dfd.reject(new $e("error providing",e.id,arguments))}):t?a.then(e.dfd.resolve,e.dfd.reject):e.dfd.resolve(n?a():a),e.dfd.pledge.then(function(){z.emit("provide",e.path,e)},function(){z.emit("reject",e.path,e)}),e.dfd.pledge;throw new Error("unspecified anonymous provide")}).amd=!0,u.defineProperty("provide",o),s.configure({cache:!0,base:"/",pattern:{"/demand":oe((e&&e.url||location.href)+"/../").slice(0,-1)}}),e&&e.settings&&s.configure(e.settings);var vt,gt=(vt=new W,yt.prototype={process:function(){var e,t=vt.get(this);t.queue.length&&(e=t.current=t.queue.dequeue()).pledge.isPending()?e.handler.process&&e.handler.process(e):t.current=null},get current(){return vt.get(this).current}},yt);function yt(e){var t=this,n={queue:e,current:null};vt.set(t,n),s.on("queueEnqueue:"+e.uuid,function(){n.current||t.process()})}function wt(e,t){for(var n,r;n=se.exec(t);)r=ae.test(n[3])?e.protocol+"//"+e.host+n[3]:(e.pathname+=(de.test(e.pathname)?"/../":"/")+n[3].replace(ce,""),e.protocol+"//"+e.host+e.pathname),t=t.replace(n[0],n[1]+" "+n[2]+"="+r+".map"+(n[4]?" "+n[4]:""));return t}function xt(){}xt.prototype={validate:null,onPreRequest:null,onPostRequest:null,onPreProcess:null,process:null};var bt,jt,qt,kt=(bt=f.getElementsByTagName("head")[0],qt={umd:!(jt=/^(application|text)\/(x-)?javascript/),suffix:".js"},s.on("postConfigure:/demand/handler/module",function(e){b(e)&&A(qt,e)}),Rt.prototype={validate:function(e){return jt.test(e)},onPreRequest:function(e,t){var n;(t=void 0!==t?t:qt.suffix)&&0!==e.path.indexOf("@")&&(n=e.url.pathname,e.url.pathname=n.slice(-t.length)!==t?n+t:n)},onPostRequest:function(e){e.source=wt(e.url,e.source)},process:function(e){var t;e.source&&((t=f.createElement("script")).async=!0,t.text=e.source,t.setAttribute("demand-id",e.id),qt.umd&&(u.define=o),bt.appendChild(t),qt.umd&&(u.define=void 0))}},new(Rt.extends(xt)));function Rt(){}function $e(e,t,n){return this.message=e,t&&(this.module=t),n&&(this.stack=N(n)),this}$e.prototype={toString:function(){var e=this.message+" "+(this.module?'"'+this.module+'"':"");return this.stack&&(e=$e.traverse(this.stack,e,1)),e}},$e.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=$e.traverse(r.stack,t,n+1));return t};var Pt,Et,Mt,Ct,St,Tt=(St={},s.on("postConfigure:/demand/handler/bundle",function(e){b(e)&&M(St=e,Dt)}),Lt.prototype={validate:kt.validate,onPreProcess:function(e){var t,n,r,i,o,a=e.source,u=e.dfd,s=St[e.path];function c(){u.reject(new $e("error resolving",e.id,arguments))}if(e.enqueue=!1,s&&(t=function(e){for(var t,n,r=0;n=e[r];r++)if(n=(n=n.match(he))&&n[3]||St.handler,t){if(n!==t)return!1}else t=n;return t}(s))){for(;n=se.exec(a);)a=a.replace(n[0],"");for(e.source=a,r=[],o=0;i=s[o];o++)r.push(Xe.resolve("mock:"+i).pledge);_e.all(r).then(function(){for(r.length=0,o=0;i=s[o];o++)(i=s[o]=Xe.get(i)||new Xe(i)).handler=arguments[o],r.push(i.pledge);"module"===t?(l.enqueue.apply(l,s),kt.process(e)):(kt.process(e),l.enqueue.apply(l,s)),_e.all(r).then(u.resolve,c)},c)}else c()}},new(Lt.extends(xt))),At=(Mt=/^text\/.+$/,Ct={suffix:".html"},s.on("postConfigure:/demand/handler/component",function(e){b(e)&&A(Ct,e)}),Nt.prototype={validate:function(e){return Mt.test(e)},onPreRequest:function(e,t){var n;(t=void 0!==t?t:Ct.suffix)&&(n=e.url.pathname,e.url.pathname=n.slice(-t.length)!==t?n+t:n)},onPostRequest:function(e){e.source=wt(e.url,e.source)},onPreProcess:function(o){var e,t,n,r,i=o.path,a=o.dfd,u=f.createElement("body"),s=[],c=[];function d(){a.reject(new $e("error resolving",o.id,arguments))}for(o.enqueue=!1,u.innerHTML=o.source;e=u.firstElementChild;)(t=e.getAttribute("type"))&&(r=t+"!"+i+((n=e.getAttribute("path"))?"/"+n:""),e.parentNode.removeChild(e),s.push({source:e.textContent,uri:r}),c.push(Xe.resolve("mock:"+r).pledge));_e.all(c).then(function(){var n,r,e,i=[];for(c.length=0,n=0;r=s[n];n++)(e=Xe.get(r.uri)||new Xe(r.uri)).source=wt(e.url,r.source),e.handler=arguments[n],i.push(e),c.push(e.pledge),l.enqueue(e);_e.all(c).then(function(){var e=o.path.length+1,t={};for(n=0;r=arguments[n];n++)t[i[n].path.substr(e)||"main"]=r;a.resolve(t)},d)},d)}},new(Nt.extends(xt))),Ot=(Pt="/demand/plugin/genie",Et=[],s.on("postConfigure:"+Pt,function(e){b(e)&&(Et.length=0,M(e,It))}).on("preResolve",function(e,t){for(var n,r,i={},o=0;n=e[o];o++)!x(n,"string")||fe.test(n)||Xe.get(n,t)||"module"===(n=new Xe(n,t,!1)).type&&(r=$t(n.path))&&!ke.get(n)&&(i[r.prefix]||(i[r.prefix]={fn:r.fn,matches:[]})).matches.push(n);M(i,Ht)}),!0);function $t(e){for(var t,n,r=0;t=Et[r];r++)t.prefix.test(e)&&(!n||t.weight>n.weight)&&(n=t);return n}function It(e,t){Et.push({prefix:new RegExp("^"+e),weight:e.length,fn:t})}function Ht(e,t){var n,r=t.matches,i=0;if(1<r.length){for(t.id=Pt+"/"+lt(JSON.stringify(t.matches));n=r[i];i++)r[i]=new Xe(n.uri);s.configure(function(e){var t,n,r=e.matches,i={pattern:{},modules:{"/demand/handler/bundle":{}}},o=0;for(i.pattern[e.id]=e.fn(r),i.modules["/demand/handler/bundle"][e.id]=t=[];n=r[o];o++)t.push(n.path);return i}(t)),s("bundle!"+t.id).then(function(){for(var e,t=0;e=this[t];t++)e.dfd.resolve(arguments[t])}.bind(r),function(){for(var e,t=0;e=this[t];t++)e.dfd.reject(new $e("error resolving",e.id))}.bind(r))}}function Nt(){}function Dt(e,t){for(var n,r=0;n=t[r];r++)x(n,"string")&&(t[r]=me(n))}function Lt(){}function Bt(e,t){o(e,function(){return t})}if(l=new ee,c=new gt(l),Bt("/demand/abstract/uuid",G),Bt("/demand/abstract/handler",xt),Bt("/demand/handler/module",kt),Bt("/demand/handler/bundle",Tt),Bt("/demand/handler/component",At),Bt("/demand/plugin/genie",Ot),Bt("/demand/validator/isTypeOf",x),Bt("/demand/validator/isArray",dt),Bt("/demand/validator/isObject",b),Bt("/demand/validator/isInstanceOf",q),Bt("/demand/validator/isSemver",E),Bt("/demand/function/resolveUrl",oe),Bt("/demand/function/resolveSourcemaps",wt),Bt("/demand/function/merge",A),Bt("/demand/function/iterate",M),Bt("/demand/function/hash",lt),Bt("/demand/function/defer",$),Bt("/demand/function/idle",te),Bt("/demand/function/uuid",O),Bt("/demand/function/toArray",N),Bt("/demand/task",Je),Bt("/demand/weakmap",W),Bt("/demand/descriptor",w),Bt("/demand/pledge",_e),Bt("/demand/queue",ee),Bt("/demand/failure",$e),Bt("/demand/semver",qe),e&&e.main)switch(typeof e.main){case"string":s(e.main);break;case"function":o("main",e.main())}}("demand-loader"===this.name?parent:this,setTimeout,clearTimeout);