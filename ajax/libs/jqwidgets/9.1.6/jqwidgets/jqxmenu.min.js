!function(y){y.jqx.jqxWidget("jqxMenu","",{}),y.extend(y.jqx._jqxMenu.prototype,{defineInstance:function(){var e={items:new Array,mode:"horizontal",width:null,height:null,minimizeWidth:"auto",easing:"easeInOutSine",animationShowDuration:200,animationHideDuration:200,autoCloseInterval:0,animationHideDelay:100,animationShowDelay:10,menuElements:new Array,autoSizeMainItems:!1,autoCloseOnClick:!0,autoCloseOnMouseLeave:!0,enableRoundedCorners:!0,disabled:!1,autoOpenPopup:!0,enableHover:!0,autoOpen:!0,autoGenerate:!0,clickToOpen:!1,showTopLevelArrows:!1,touchMode:"auto",source:null,popupZIndex:1e3,rtl:!1,keyboardNavigation:!1,lockFocus:!1,title:"",events:["shown","closed","itemclick","initialized","open","close"]};return this===y.jqx._jqxMenu.prototype||y.extend(!0,this,e),e},createInstance:function(e){var t,i,s=this;this.host.attr("role","menubar"),y.jqx.utilities.resize(this.host,function(){s.refresh()},!1,"popup"!=this.mode),"auto"!=this.minimizeWidth&&null!=this.minimizeWidth&&this.width&&-1==this.width.toString().indexOf("%")&&y(window).resize(function(){s.refresh()}),this.host.css("outline","none"),this.source&&null!=this.source&&(t=this.loadItems(this.source),this.element.innerHTML=t),this._tmpHTML=this.element.innerHTML,!this.element.innerHTML.indexOf("UL")||0<(i=this.host.find("ul:first")).length&&this._createMenu(i[0]),this.host.data("autoclose",{}),this._render(),this._setSize(),y.jqx.browser.msie&&y.jqx.browser.version<8&&this.host.attr("hideFocus",!0)},focus:function(){try{var t,e;"popup"===this.mode&&this.keyboardNavigation&&this.host.closest("div.jqx-menu-wrapper").focus(),this.keyboardNavigation&&(this.host.focus(),e=function(){var e;y.jqx.isHidden(y(t.items[0].element))?(e=t._nextVisibleItem(t.items[0],0))&&(y(e.element).addClass(t.toThemeProperty("jqx-fill-state-focus")),t.activeItem=e):(y(t.items[0].element).addClass(t.toThemeProperty("jqx-fill-state-focus")),t.activeItem=t.items[0])},(t=this).activeItem?y.jqx.isHidden(y(this.activeItem.element))?(y(this.activeItem.element).removeClass(this.toThemeProperty("jqx-fill-state-focus")),e()):y(this.activeItem.element).addClass(this.toThemeProperty("jqx-fill-state-focus")):e())}catch(e){}},loadItems:function(e,t){if(null!=e){if(0==e.length)return"";var i=this;this.items=new Array;var s=t?'<ul class="jqx-menu-ul" style="width:'+t+';">':'<ul class="jqx-menu-ul">';return y.map(e,function(e){if(null==e)return null;s+=i._parseItem(e)}),s+="</ul>"}},_parseItem:function(e){var t="";if(null==e)return null;var i=e.label;!e.label&&e.html&&(i=e.html),i="string"==typeof e?e:i||"Item";null!=e.selected&&e.selected;var s=!1;return null!=e.disabled&&e.disabled&&(s=!0),t+="<li",s&&(t+=' item-disabled="true" '),e.label&&!e.html&&(t+=' item-label="'+i+'" '),null!=e.value&&(t+=' item-value="'+e.value+'" '),null!=e.id&&(t+=' id="'+e.id+'" '),t+=">"+i,e.items&&(e.subMenuWidth?t+=this.loadItems(e.items,e.subMenuWidth):t+=this.loadItems(e.items)),t+="</li>"},_setSize:function(){(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.width&&-1!=this.width.toString().indexOf("px")||null!=this.width&&!isNaN(this.width))&&this.host.width(this.width),(null!=this.height&&-1!=this.height.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("px")||null!=this.height&&!isNaN(this.height))&&this.host.height(this.height),null===this.height&&this.host.height("auto");if(null!=this.minimizeWidth&&"popup"!=this.mode){var e,t=y(window).width();if(!y.jqx.response){var i=!1;navigator.userAgent.match(/Windows|Linux|MacOS/)&&(0<=navigator.userAgent.indexOf("Windows Phone")||0<=navigator.userAgent.indexOf("WPDesktop")||0<=navigator.userAgent.indexOf("IEMobile")||0<=navigator.userAgent.indexOf("ZuneWP7")||(i=!0));var s=this.minimizeWidth;if(i&&"auto"==this.minimizeWidth)return}"auto"==this.minimizeWidth&&y.jqx.response?"Phone"!=(e=new y.jqx.response).device.type&&"Tablet"!=e.device.type||this.minimized||this.minimize():t<s&&!this.minimized?this.minimize():this.minimized&&s<=t&&this.restore()}},minimize:function(){var s,e,t,i,n,o;this.minimized||((s=this).host.addClass(this.toThemeProperty("jqx-menu-minimized")),this.minimized=!0,this._tmpMode=this.mode,this.mode="simple",(n=this.host.closest("div.jqx-menu-wrapper")).remove(),y("#menuWrapper"+this.element.id).remove(),y.each(this.items,function(){y(this.element);y(this.subMenuElement).closest("div.jqx-menu-popup").remove()}),this.source&&(e=this.loadItems(this.source),this.element.innerHTML=e,this._tmpHTML=this.element.innerHTML),this.element.innerHTML=this._tmpHTML,!this.element.innerHTML.indexOf("UL")||0<(t=this.host.find("ul:first")).length&&this._createMenu(t[0]),this._render(),(i=this.host.find("ul:first")).wrap('<div class="jqx-menu-wrapper" style="z-index:'+this.popupZIndex+'; padding: 0px; display: none; margin: 0px; height: auto; width: auto; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>'),(n=i.closest("div.jqx-menu-wrapper"))[0].id="menuWrapper"+this.element.id,n.detach(),n.appendTo(y(document.body)),n.addClass(this.toThemeProperty("jqx-widget")),n.addClass(this.toThemeProperty("jqx-menu")),n.addClass(this.toThemeProperty("jqx-menu-minimized")),n.addClass(this.toThemeProperty("jqx-widget-header")),i.children().hide(),n.hide(),n.find("ul").addClass(this.toThemeProperty("jqx-menu-ul-minimized")),this.minimizedItem=y("<div></div>"),this.minimizedItem.addClass(this.toThemeProperty("jqx-item")),this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-item-top")),this.addHandler(n,"keydown",function(e){return s.handleKeyDown(e)}),this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-minimized-button")),this.minimizedItem.prependTo(this.host),this.titleElement=y("<div>"+this.title+"</div>"),this.titleElement.addClass(this.toThemeProperty("jqx-item")),this.titleElement.addClass(this.toThemeProperty("jqx-menu-title")),this.titleElement.prependTo(this.host),y("<div style='clear:both;'></div>").insertAfter(this.minimizedItem),s.minimizedHidden=!0,o=function(e){var t,i;s.minimizedHidden?(n.find("ul:first").children().show(),s.minimizedHidden=!1,n.show(),n.css("opacity",0),n.css("left",-n.outerWidth()),t=!1,i=n.width(),"right"==s.minimizedItem.css("float")&&(n.css("left",s.host.coord().left+s.host.width()+i),t=!0),n.css("top",s.host.coord().top+s.host.height()),n.animate({left:t?s.host.coord().left+s.host.width()-i:s.host.coord().left,opacity:.95},s.animationShowDuration,function(){})):function(){s.minimizedHidden=!0,s.minimizedItem.show();var e=!1;"right"==s.minimizedItem.css("float")&&(e=!0),n.animate({left:e?s.host.coord().left+s.host.width()+n.width():-n.outerWidth(),opacity:0},s.animationHideDuration,function(){n.find("ul:first").children().hide(),n.hide()})}(),s._raiseEvent("2",{type:"mouse",item:s.minimizedItem[0],event:e}),s._setSize()},this.addHandler(y(window),"orientationchange.jqxmenu"+this.element.id,function(e){setTimeout(function(){var e,t;s.minimizedHidden||(n.width(),e=!1,t=n.width(),"right"==s.minimizedItem.css("float")&&(e=!0),n.css("top",s.host.coord().top+s.host.height()),n.css({left:e?s.host.coord().left+s.host.width()-t:s.host.coord().left}))},25)}),this.addHandler(this.minimizedItem,"click",function(e){o(e)}))},restore:function(){var e,t;this.minimized&&(this.host.find("ul").removeClass(this.toThemeProperty("jqx-menu-ul-minimized")),this.host.removeClass(this.toThemeProperty("jqx-menu-minimized")),this.minimized=!1,this.mode=this._tmpMode,this.minimizedItem&&this.minimizedItem.remove(),y("#menuWrapper"+this.element.id).remove(),this.source&&(e=this.loadItems(this.source),this.element.innerHTML=e,this._tmpHTML=e),this.element.innerHTML=this._tmpHTML,!this.element.innerHTML.indexOf("UL")||0<(t=this.host.find("ul:first")).length&&this._createMenu(t[0]),this._setSize(),this._render())},isTouchDevice:function(){if(null!=this._isTouchDevice)return this._isTouchDevice;var e=y.jqx.mobile.isTouchDevice();return 1==this.touchMode?e=!0:0==this.touchMode&&(e=!1),e&&(this.host.addClass(this.toThemeProperty("jqx-touch")),y(".jqx-menu-item").addClass(this.toThemeProperty("jqx-touch"))),this._isTouchDevice=e},refresh:function(e){e||this._setSize()},resize:function(e,t){this.width=e,this.height=t,this.refresh()},_closeAll:function(e){var t=null!=e?e.data:this,i=t.items;y.each(i,function(){1==this.hasItems&&this.isOpen&&t._closeItem(t,this)}),"popup"==t.mode&&null!=e&&(t._isRightClick(e)||t.close())},closeItem:function(e){if(null==e)return!1;var t=document.getElementById(e),i=this;return y.each(i.items,function(){1==this.isOpen&&this.element==t&&(i._closeItem(i,this),this.parentId)}),!0},openItem:function(e){if(null==e)return!1;var t=document.getElementById(e),i=this;return y.each(i.items,function(){var e=this;0==e.isOpen&&e.element==t&&(i._openItem(i,e),e.parentId&&i.openItem(e.parentId))}),!0},_getClosedSubMenuOffset:function(e){var t=y(e.subMenuElement),i=-t.outerHeight(),s=-t.outerWidth(),n=0==e.level&&"horizontal"==this.mode;switch(n?s=0:i=0,e.openVerticalDirection){case"up":case"center":i=t.outerHeight()}switch(e.openHorizontalDirection){case this._getDir("left"):case"center":s=n?0:t.outerWidth()}return{left:s,top:i}},_closeItem:function(t,i,e,s){if(null==t||null==i)return!1;var n,o,r,a=y(i.subMenuElement),l=0==i.level&&"horizontal"==this.mode,m=this._getClosedSubMenuOffset(i),d=m.top,h=m.left,u=(y(i.element),a.closest("div.jqx-menu-popup"));null!=u&&(n=t.animationHideDelay,1==s&&(n=0),a.data("timer")&&null!=a.data("timer").show&&(clearTimeout(a.data("timer").show),a.data("timer").show=null),o=function(){i.isOpen=!1,l?a.stop().animate({top:d},t.animationHideDuration,function(){y(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),y(i.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected")),y(i.element).removeClass(t.toThemeProperty("jqx-rc-b-expanded")),u.removeClass(t.toThemeProperty("jqx-rc-t-expanded"));var e=y(i.arrow);0<e.length&&t.showTopLevelArrows&&(e.removeClass(),"down"==i.openVerticalDirection?(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-down")),e.addClass(t.toThemeProperty("jqx-icon-arrow-down"))):(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-up")),e.addClass(t.toThemeProperty("jqx-icon-arrow-up")))),y.jqx.aria(y(i.element),"aria-expanded",!1),u.css({display:"none"}),0==t.animationHideDuration&&a.css({top:d}),t._raiseEvent("1",i)}):(y.jqx.browser.msie,a.stop().animate({left:h},t.animationHideDuration,function(){var e;0==t.animationHideDuration&&a.css({left:h}),0<i.level?(y(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),y(i.element).removeClass(t.toThemeProperty("jqx-menu-item-selected")),0<(e=y(i.arrow)).length&&(e.removeClass(),"left"!=i.openHorizontalDirection?(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right"))),e.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left"))),e.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))):(y(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),y(i.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected")),0<(e=y(i.arrow)).length&&(e.removeClass(),"left"!=i.openHorizontalDirection?(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-"+t._getDir("right"))),e.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-"+t._getDir("left"))),e.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))),y.jqx.aria(y(i.element),"aria-expanded",!1),u.css({display:"none"}),t._raiseEvent("1",i)}))},0<n?a.data("timer")&&(a.data("timer").hide=setTimeout(function(){o()},n)):o(),null!=e&&e&&(r=a.children(),y.each(r,function(){t.menuElements[this.id]&&t.menuElements[this.id].isOpen&&(y(t.menuElements[this.id].subMenuElement),t._closeItem(t,t.menuElements[this.id],!0,!0))})))},getSubItems:function(e,t){if(null==e)return!1;var i=this,s=new Array;null!=t&&y.extend(s,t);var n=this.menuElements[e],o=y(n.subMenuElement).find(".jqx-menu-item");return y.each(o,function(){s[this.id]=i.menuElements[this.id];var e=i.getSubItems(this.id,s);y.extend(s,e)}),s},disable:function(e,t){var i,s;null==e||this.menuElements[e]&&((i=this.menuElements[e]).disabled=t,s=y(i.element),i.element.disabled=t,y.each(s.children(),function(){this.disabled=t}),t?(s.addClass(this.toThemeProperty("jqx-menu-item-disabled")),s.addClass(this.toThemeProperty("jqx-fill-state-disabled"))):(s.removeClass(this.toThemeProperty("jqx-menu-item-disabled")),s.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))))},getItem:function(e){return this.menuElements[e]?this.menuElements[e]:null},disableItem:function(e){this.disable(e,!0)},hideItem:function(e){var t;this.menuElements[e]&&(t=this.menuElements[e],y(t.element).hide())},showItem:function(e){var t;this.menuElements[e]&&(t=this.menuElements[e],y(t.element).show())},enableItem:function(e){this.disable(e,!1)},_setItemProperty:function(e,t,i){var s;null!=e&&(!this.menuElements[e]||(s=this.menuElements[e])[t]&&(s[t]=i))},setItemOpenDirection:function(e,t,i){if(null!=e){var s=this,n=y.jqx.browser.msie&&y.jqx.browser.version<8;if(this.menuElements[e]){var o=this.menuElements[e];if(null!=t&&(o.openHorizontalDirection=t,o.hasItems&&0<o.level&&null!=(a=y(o.element))&&(r=y(o.arrow),null==o.arrow&&(r=y('<span id="arrow'+a[0].id+'"></span>'),n?r.appendTo(a):r.prependTo(a),o.arrow=r[0]),r.removeClass(),"left"==o.openHorizontalDirection?(r.addClass(s.toThemeProperty("jqx-menu-item-arrow-"+s._getDir("left"))),r.addClass(s.toThemeProperty("jqx-icon-arrow-"+s._getDir("left")))):(r.addClass(s.toThemeProperty("jqx-menu-item-arrow-"+s._getDir("right"))),r.addClass(s.toThemeProperty("jqx-icon-arrow-"+s._getDir("right")))),r.css("visibility","inherit"),n?(r.css("display","inline-block"),r.css("float","none")):(r.css("display","block"),r.css("float","right")))),null!=i){o.openVerticalDirection=i;var r=y(o.arrow),a=y(o.element);if(!s.showTopLevelArrows)return;null!=a&&(null==o.arrow&&(r=y('<span id="arrow'+a[0].id+'"></span>'),n?r.appendTo(a):r.prependTo(a),o.arrow=r[0]),r.removeClass(),"down"==o.openVerticalDirection?(r.addClass(s.toThemeProperty("jqx-menu-item-arrow-down")),r.addClass(s.toThemeProperty("jqx-icon-arrow-down"))):(r.addClass(s.toThemeProperty("jqx-menu-item-arrow-up")),r.addClass(s.toThemeProperty("jqx-icon-arrow-up"))),r.css("visibility","inherit"),n?(r.css("display","inline-block"),r.css("float","none")):(r.css("display","block"),r.css("float","right")))}}}},_getSiblings:function(e){for(var t=new Array,i=0,s=0;s<this.items.length;s++)this.items[s]!=e&&this.items[s].parentId==e.parentId&&this.items[s].hasItems&&(t[i++]=this.items[s]);return t},_openItem:function(t,i,e){if(null==t||null==i)return!1;if(i.isOpen)return!1;if(i.disabled)return!1;if(t.disabled)return!1;var s=t.popupZIndex;null!=e&&(s=e);var n=t.animationHideDuration;t.animationHideDuration=0,t._closeItem(t,i,!0,!0),t.animationHideDuration=n,y(i.element).focus();var o=[5,5],r=y(i.subMenuElement);null!=r&&r.stop(),r.data("timer")&&null!=r.data("timer").hide&&clearTimeout(r.data("timer").hide);var a,l=r.closest("div.jqx-menu-popup"),m=y(i.element),d=0==i.level?this._getOffset(i.element):m.position();0<i.level&&this.hasTransform&&(a=parseInt(m.coord().top)-parseInt(this._getOffset(i.element).top),d.top+=a),0==i.level&&"popup"==this.mode&&(d=m.coord());var h,u,p=0==i.level&&"horizontal"==this.mode,c=p?d.left:null!=this.menuElements[i.parentId]&&null!=this.menuElements[i.parentId].subMenuElement?parseInt(y(y(this.menuElements[i.parentId].subMenuElement).closest("div.jqx-menu-popup")).outerWidth())-o[0]:parseInt(r.outerWidth());l.css({visibility:"visible",display:"block",left:c,top:p?d.top+m.outerHeight():d.top,zIndex:s}),r.css("display","block"),"horizontal"!=this.mode&&0==i.level?(h=this._getOffset(this.element),l.css("left",-1+h.left+this.host.outerWidth()),r.css("left",-r.outerWidth())):(u=this._getClosedSubMenuOffset(i),r.css("left",u.left),r.css("top",u.top)),l.css({height:parseInt(r.outerHeight())+parseInt(o[1])+"px"});var f,v=0,x=0;switch(i.openVerticalDirection){case"up":p?(r.css("top",r.outerHeight()),v=o[1],f=parseInt(r.parent().css("padding-bottom")),isNaN(f)&&(f=0),0<f&&l.addClass(this.toThemeProperty("jqx-menu-popup-clear")),r.css("top",r.outerHeight()-f),l.css({display:"block",top:d.top-l.outerHeight(),zIndex:s})):(v=o[1],r.css("top",r.outerHeight()),l.css({display:"block",top:d.top-l.outerHeight()+o[1]+m.outerHeight(),zIndex:s}));break;case"center":p?(r.css("top",0),l.css({display:"block",top:d.top-l.outerHeight()/2+o[1],zIndex:s})):(r.css("top",0),l.css({display:"block",top:d.top+m.outerHeight()/2-l.outerHeight()/2+o[1],zIndex:s}))}switch(i.openHorizontalDirection){case this._getDir("left"):p?l.css({left:d.left-(l.outerWidth()-m.outerWidth()-o[0])}):(x=0,r.css("left",l.outerWidth()),l.css({left:d.left-l.outerWidth()+2*i.level}));break;case"center":p?l.css({left:d.left-(l.outerWidth()/2-m.outerWidth()/2-o[0]/2)}):(l.css({left:d.left-(l.outerWidth()/2-m.outerWidth()/2-o[0]/2)}),r.css("left",l.outerWidth()))}if(p){if(parseInt(r.css("top"))==v)return void(i.isOpen=!0)}else if(parseInt(r.css("left"))==x)return void i.isOpen;y.each(t._getSiblings(i),function(){t._closeItem(t,this,!0,!0)});var g=y.data(t.element,"animationHideDelay");t.animationHideDelay=g,0<this.autoCloseInterval&&(null!=this.host.data("autoclose")&&null!=this.host.data("autoclose").close&&clearTimeout(this.host.data("autoclose").close),null!=this.host.data("autoclose")&&(this.host.data("autoclose").close=setTimeout(function(){t._closeAll()},this.autoCloseInterval))),r.data("timer")&&(r.data("timer").show=setTimeout(function(){var e;null!=l&&(p?(r.stop(),r.css("left",x),y.jqx.browser.msie,m.addClass(t.toThemeProperty("jqx-fill-state-pressed")),m.addClass(t.toThemeProperty("jqx-menu-item-top-selected")),"down"==i.openVerticalDirection?(y(i.element).addClass(t.toThemeProperty("jqx-rc-b-expanded")),l.addClass(t.toThemeProperty("jqx-rc-t-expanded"))):(y(i.element).addClass(t.toThemeProperty("jqx-rc-t-expanded")),l.addClass(t.toThemeProperty("jqx-rc-b-expanded"))),0<(e=y(i.arrow)).length&&t.showTopLevelArrows&&(e.removeClass(),"down"==i.openVerticalDirection?(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-down-selected")),e.addClass(t.toThemeProperty("jqx-icon-arrow-down"))):(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-up-selected")),e.addClass(t.toThemeProperty("jqx-icon-arrow-up")))),0==t.animationShowDuration?(r.css({top:v}),i.isOpen=!0,t._raiseEvent("0",i),y.jqx.aria(y(i.element),"aria-expanded",!0)):r.animate({top:v},t.animationShowDuration,t.easing,function(){i.isOpen=!0,y.jqx.aria(y(i.element),"aria-expanded",!0),t._raiseEvent("0",i)})):(r.stop(),r.css("top",v),y.jqx.browser.msie,0<i.level?(m.addClass(t.toThemeProperty("jqx-fill-state-pressed")),m.addClass(t.toThemeProperty("jqx-menu-item-selected"))):(m.addClass(t.toThemeProperty("jqx-fill-state-pressed")),m.addClass(t.toThemeProperty("jqx-menu-item-top-selected"))),0<(e=y(i.arrow)).length&&(e.removeClass(),"left"!=i.openHorizontalDirection?(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right")+"-selected")),e.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(e.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left")+"-selected")),e.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left"))))),y.jqx.browser.msie,0==t.animationShowDuration?(r.css({left:x}),t._raiseEvent("0",i),i.isOpen=!0,y.jqx.aria(y(i.element),"aria-expanded",!0)):r.animate({left:x},t.animationShowDuration,t.easing,function(){t._raiseEvent("0",i),i.isOpen=!0,y.jqx.aria(y(i.element),"aria-expanded",!0)})))},this.animationShowDelay))},_getDir:function(e){switch(e){case"left":return this.rtl?"right":"left";case"right":return this.rtl?"left":"right"}return"left"},_applyOrientation:function(e,t){var i,s,n,o=this,r=0;switch(o.host.removeClass(o.toThemeProperty("jqx-menu-horizontal")),o.host.removeClass(o.toThemeProperty("jqx-menu-vertical")),o.host.removeClass(o.toThemeProperty("jqx-menu")),o.host.removeClass(o.toThemeProperty("jqx-widget")),o.host.addClass(o.toThemeProperty("jqx-widget")),o.host.addClass(o.toThemeProperty("jqx-menu")),null!=e&&null!=t&&"popup"==t?0<o.host.parent().length&&0<o.host.parent().parent().length&&o.host.parent().parent()[0]==document.body&&(null!=(i=y.data(document.body,"jqxMenuOldHost"+o.element.id))&&((s=o.host.closest("div.jqx-menu-wrapper")).remove(),s.appendTo(i),o.host.css("display","block"),o.host.css("visibility","visible"),s.css("display","block"),s.css("visibility","visible"))):null==e&&null==t&&y.data(document.body,"jqxMenuOldHost"+o.element.id,o.host.parent()[0]),o.autoOpenPopup?"popup"==o.mode?(o.addHandler(y(document),"contextmenu."+o.element.id,function(e){return!1}),o.addHandler(y(document),"mousedown.menu"+o.element.id,function(e){o._openContextMenu(e)})):(o.removeHandler(y(document),"contextmenu."+o.element.id),o.removeHandler(y(document),"mousedown.menu"+o.element.id)):(o.removeHandler(y(document),"contextmenu."+o.element.id),o.removeHandler(y(document),"mousedown.menu"+o.element.id),o.addHandler(y(document),"contextmenu."+o.element.id,function(e){if(e.target&&e.target.className.indexOf&&0<=e.target.className.indexOf("jqx-menu"))return!1})),o.rtl&&o.host.addClass(o.toThemeProperty("jqx-rtl")),o.mode){case"horizontal":o.host.addClass(o.toThemeProperty("jqx-widget-header")),o.host.addClass(o.toThemeProperty("jqx-menu-horizontal")),y.each(o.items,function(){var e,t=this,i=y(t.element),s=y(t.arrow);s.removeClass(),t.hasItems&&0<t.level&&((s=y('<span style="border: none; background-color: transparent;" id="arrow'+i[0].id+'"></span>')).prependTo(i),s.css("float",o._getDir("right")),s.addClass(o.toThemeProperty("jqx-menu-item-arrow-"+o._getDir("right"))),s.addClass(o.toThemeProperty("jqx-icon-arrow-"+o._getDir("right"))),t.arrow=s[0]),0==t.level&&(y(t.element).css("float",o._getDir("left")),!t.ignoretheme&&t.hasItems&&o.showTopLevelArrows?(s=y('<span style="border: none; background-color: transparent;" id="arrow'+i[0].id+'"></span>'),e=y.jqx.browser.msie&&y.jqx.browser.version<8,null==t.arrow?e?s.appendTo(i):s.prependTo(i):s=y(t.arrow),"down"==t.openVerticalDirection?(s.addClass(o.toThemeProperty("jqx-menu-item-arrow-down")),s.addClass(o.toThemeProperty("jqx-icon-arrow-down"))):(s.addClass(o.toThemeProperty("jqx-menu-item-arrow-up")),s.addClass(o.toThemeProperty("jqx-icon-arrow-up"))),s.css("visibility","inherit"),e?s.css("display","inline-block"):(s.css("display","block"),s.css("float","right")),t.arrow=s[0]):t.ignoretheme||!t.hasItems||o.showTopLevelArrows||null!=t.arrow&&((s=y(t.arrow)).remove(),t.arrow=null),r=Math.max(r,i.height()))});break;case"vertical":case"popup":case"simple":o.host.addClass(o.toThemeProperty("jqx-menu-vertical")),y.each(o.items,function(){var e=this,t=y(e.element);if(e.hasItems&&!e.ignoretheme){if(e.arrow&&y(e.arrow).remove(),"simple"==o.mode)return!0;var i=y('<span style="border: none; background-color: transparent;" id="arrow'+t[0].id+'"></span>');i.prependTo(t),i.css("float","right"),0==e.level?i.addClass(o.toThemeProperty("jqx-menu-item-arrow-top-"+o._getDir("right"))):i.addClass(o.toThemeProperty("jqx-menu-item-arrow-"+o._getDir("right"))),i.addClass(o.toThemeProperty("jqx-icon-arrow-"+o._getDir("right"))),e.arrow=i[0]}t.css("float","none")}),"popup"==o.mode?(o.host.addClass(o.toThemeProperty("jqx-widget-content")),o.host.wrap('<div tabindex=0 class="jqx-menu-wrapper" style="z-index:'+o.popupZIndex+'; border: none; background-color: transparent; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>'),s=o.host.closest("div.jqx-menu-wrapper"),o.host.addClass(o.toThemeProperty("jqx-popup")),s[0].id="menuWrapper"+o.element.id,s.appendTo(y(document.body)),o.addHandler(s,"keydown",function(e){return o.handleKeyDown(e)})):o.host.addClass(o.toThemeProperty("jqx-widget-header")),"popup"==o.mode&&(n=o.host.height(),o.host.css("position","absolute"),o.host.css("top","0"),o.host.css("left","0"),"simple"!=o.mode&&(o.host.height(n),o.host.css("display","none")))}var a=o.isTouchDevice();o.autoCloseOnClick&&(o.removeHandler(y(document),"mousedown.menu"+o.element.id,o._closeAfterClick),o.addHandler(y(document),"mousedown.menu"+o.element.id,o._closeAfterClick,o),a&&(o.removeHandler(y(document),y.jqx.mobile.getTouchEventName("touchstart")+".menu"+o.element.id,o._closeAfterClick,o),o.addHandler(y(document),y.jqx.mobile.getTouchEventName("touchstart")+".menu"+o.element.id,o._closeAfterClick,o)))},_getBodyOffset:function(){var e=0,t=0;return"0px"!=y("body").css("border-top-width")&&(e=parseInt(y("body").css("border-top-width")),isNaN(e)&&(e=0)),"0px"!=y("body").css("border-left-width")&&(t=parseInt(y("body").css("border-left-width")),isNaN(t)&&(t=0)),{left:t,top:e}},_getOffset:function(e){var t=y.jqx.mobile.isSafariMobileBrowser(),i=y(e).coord(!0),s=i.top,n=i.left;"0px"!=y("body").css("border-top-width")&&(s=parseInt(s)+this._getBodyOffset().top),"0px"!=y("body").css("border-left-width")&&(n=parseInt(n)+this._getBodyOffset().left);var o=y.jqx.mobile.isWindowsPhone(),r=y.jqx.mobile.isTouchDevice();return this.hasTransform||null!=t&&t||o||r?{left:y.jqx.mobile.getLeftPos(e),top:y.jqx.mobile.getTopPos(e)}:{left:n,top:s}},_isRightClick:function(e){var t;return(e=e||window.event).which?t=3==e.which:e.button&&(t=2==e.button),t},_openContextMenu:function(e){this._isRightClick(e)&&this.open(parseInt(e.clientX)+5,parseInt(e.clientY)+5)},close:function(){var e=this;y.data(this.element,"contextMenuOpened"+this.element.id)&&(this.host,y.each(e.items,function(){this.hasItems&&e._closeItem(e,this)}),y.each(e.items,function(){1==this.isOpen&&y(this.subMenuElement).closest("div.jqx-menu-popup").hide(this.animationHideDuration)}),this.host.hide(this.animationHideDuration),y.data(e.element,"contextMenuOpened"+this.element.id,!1),e._raiseEvent("1",e),e._raiseEvent("5"))},open:function(e,t){var i,s;"popup"==this.mode&&(i=0,"block"==this.host.css("display")&&(this.close(),i=this.animationHideDuration),s=this,null!=e&&null!=e||(e=0),null!=t&&null!=t||(t=0),setTimeout(function(){s.host.show(s.animationShowDuration),s.host.css("visibility","visible"),y.data(s.element,"contextMenuOpened"+s.element.id,!0),s._raiseEvent("0",s),s._raiseEvent("4",{left:e,top:t}),s.host.css("z-index",s.popupZIndex),null!=e&&null!=t&&s.host.css({left:e,top:t}),s.focus()},i))},_renderHover:function(e,t,i){var s=this;t.ignoretheme||(this.addHandler(e,"mouseenter",function(){(s.hoveredItem=t).disabled||t.separator||!s.enableHover||s.disabled||(0<t.level?(e.addClass(s.toThemeProperty("jqx-fill-state-hover")),e.addClass(s.toThemeProperty("jqx-menu-item-hover"))):(e.addClass(s.toThemeProperty("jqx-fill-state-hover")),e.addClass(s.toThemeProperty("jqx-menu-item-top-hover"))))}),this.addHandler(e,"mouseleave",function(){t.disabled||t.separator||!s.enableHover||s.disabled||(0<t.level?(e.removeClass(s.toThemeProperty("jqx-fill-state-hover")),e.removeClass(s.toThemeProperty("jqx-menu-item-hover"))):(e.removeClass(s.toThemeProperty("jqx-fill-state-hover")),e.removeClass(s.toThemeProperty("jqx-menu-item-top-hover"))))}))},_closeAfterClick:function(e){var t=null!=e?e.data:this,i=!1;t.autoCloseOnClick&&(y.each(y(e.target).parents(),function(){if(this.className.indexOf&&-1!=this.className.indexOf("jqx-menu"))return!(i=!0)}),i||(e.data=t)._closeAll(e))},_autoSizeHorizontalMenuItems:function(){var m,d=this;d.autoSizeMainItems&&"horizontal"==this.mode&&(m=this.maxHeight,parseInt(m)>parseInt(this.host.height())&&(m=parseInt(this.host.height())),m=parseInt(this.host.height()),y.each(this.items,function(){var e,t,i,s,n,o,r,a,l=y(this.element);0==this.level&&0<m&&(e=0<l.children().length?parseInt(l.children().height()):l.height(),t=d.host.find("ul:first"),i=parseInt(t.css("padding-top")),s=parseInt(t.css("margin-top")),n=m-2*(s+i),o=parseInt(n)/2-e/2,r=parseInt(o),a=parseInt(o),l.css("padding-top",r),l.css("padding-bottom",a),parseInt(l.outerHeight())>n&&(l.css("padding-top",r-1),--r))})),y.each(this.items,function(){var e,t,i=this;y(i.element);i.hasItems&&0<i.level&&i.arrow&&(e=y(i.arrow),15<(t=y(i.element).height())&&e.css("margin-top",(t-15)/2))})},_nextVisibleItem:function(e,t){if(null==e||null==e)return null;for(var i=e;null!=i;)if(i=i.nextItem,this._isVisible(i)&&!i.disabled&&"separator"!==i.type){if(this.minimized)return i;if(null!=t&&i&&i.level!=t)continue;return i}return null},_prevVisibleItem:function(e,t){if(null==e||null==e)return null;for(var i=e;null!=i;)if(i=i.prevItem,this._isVisible(i)&&!i.disabled&&"separator"!==i.type){if(this.minimized)return i;if(null!=t&&i&&i.level!=t)continue;return i}return null},_parentItem:function(e){if(null==e||null==e)return null;var t=e.parentElement;if(!t)return null;var i=null;return y.each(this.items,function(){if(this.element==t)return i=this,!1}),i},_isElementVisible:function(e){return null!=e&&("none"!=y(e).css("display")&&"hidden"!=y(e).css("visibility"))},_isVisible:function(e){if(null==e||null==e)return!1;if(!this._isElementVisible(e.element))return!1;var t=this._parentItem(e);if(null==t)return!0;if(this.minimized)return!0;if(null!=t){if(!this._isElementVisible(t.element))return!1;if(!t.isOpen&&!this.minimized)return!1;for(;null!=t;){if(null!=(t=this._parentItem(t))&&!this._isElementVisible(t.element))return!1;if(null!=t&&!t.isOpen)return!1}}return!0},_render:function(e,t){this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.host.addClass(this.toThemeProperty("jqx-menu-disabled"))),null==this.host.attr("tabindex")&&this.host.attr("tabindex",0);var a=this.popupZIndex,d=[5,5],f=this;y.data(f.element,"animationHideDelay",f.animationHideDelay);var h=this.isTouchDevice(),u=h&&(y.jqx.mobile.isWindowsPhone()||0<=navigator.userAgent.indexOf("Touch"));-1!=navigator.platform.toLowerCase().indexOf("win")&&(0<=navigator.userAgent.indexOf("Windows Phone")||0<=navigator.userAgent.indexOf("WPDesktop")||0<=navigator.userAgent.indexOf("IEMobile")||0<=navigator.userAgent.indexOf("ZuneWP7")?this.touchDevice=!0:0<=navigator.userAgent.indexOf("Touch")&&("MSPointerDown"in window||y.jqx.mobile.isWindowsPhone()||0<=navigator.userAgent.indexOf("ARM"))&&(u=!0,f.clickToOpen=!0,f.autoCloseOnClick=!1,f.enableHover=!1)),y.data(document.body,"menuel",this),this.hasTransform=y.jqx.utilities.hasTransform(this.host),this._applyOrientation(e,t),this.removeHandler(this.host,"blur"),this.removeHandler(this.host,"focus"),this.addHandler(this.host,"blur",function(e){if(f.keyboardNavigation&&f.activeItem){if("popup"===f.mode&&document.activeElement&&0<=document.activeElement.className.indexOf("jqx-menu-wrapper"))return;y(f.activeItem.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=null}}),this.addHandler(this.host,"focus",function(e){var t;f.keyboardNavigation&&(f.activeItem||(f.hoveredItem?(y(f.hoveredItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=f.hoveredItem):(t=function(){var e;y.jqx.isHidden(y(f.items[0].element))?(e=f._nextVisibleItem(f.items[0],0))&&(y(e.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=e):(y(f.items[0].element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=f.items[0])},f.activeItem?y.jqx.isHidden(y(f.activeItem.element))?(y(f.activeItem.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),t()):y(f.activeItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus")):t())))}),this.removeHandler(this.host,"keydown.menu"+this.element.id),f.handleKeyDown=function(e){if(!f.keyboardNavigation)return!0;if("input"===e.target.nodeName.toLowerCase())return!0;var t=null,i=null;if(y.each(f.items,function(){return!!this.disabled||(0<=this.element.className.indexOf("pressed")&&(i=this),0<=this.element.className.indexOf("focus")?(t=this,!1):void 0)}),!t&&i)return t=i,!1;if(!t)return y(f.items[0].element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=f.items[0],t=f.activeItem,!1;var s,n,o;if(27==e.keyCode){if((e.data=f)._closeAll(e),t)for(var r=t;null!=r;)r=(r.parentItem||(y(f.activeItem.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=r,y(f.activeItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus"))),r.parentItem);0}13==e.keyCode&&t&&(f._raiseEvent("2",{item:t.element,event:e,type:"keyboard"}),null!=(s=null!=t.anchor?y(t.anchor):null)&&0<s.length&&(n=s.attr("href"),o=s.attr("target"),null!=n&&(null!=o?window.open(n,o):window.location=n)),e.preventDefault(),e.stopPropagation(),y(t.element).focus());function a(e){if(null==e)return new Array;for(var t=new Array,i=0,s=0;s<f.items.length;s++)f.items[s].parentId==e.parentId&&(t[i++]=f.items[s]);return t}var l,m,d,h="";switch(e.keyCode){case 40:h="down";break;case 38:h="up";break;case 39:h="right";break;case 37:h="left"}if(t&&"left"===t.openHorizontalDirection&&"left"===h&&(h="right"),t&&"left"===t.openHorizontalDirection&&"right"===h&&(h="left"),t&&"top"===t.openVerticalDirection&&"top"===h&&(h="bottom"),t&&"top"===t.openVerticalDirection&&"bottom"===h&&(h="top"),f.rtl&&("right"===h?h="left":"left"===h&&(h="right")),"right"!==h||f.minimized||(e.altKey&&(0!=t.level&&t.hasItems||"horizontal"!=f.mode)?f._openItem(f,t):(d=f._nextVisibleItem(t,0),u=a(l=f._nextVisibleItem(t)),(d=d||l)&&(d.parentId===t.parentId&&0==d.level&&"horizontal"==f.mode||l.id==u[0].id&&0!=l.level)&&(l.id==u[0].id&&(0!=t.level||0==t.level&&"horizontal"!=f.mode)&&(d=l),y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d)),e.preventDefault(),e.stopPropagation()),"left"!==h||f.minimized||(e.altKey&&(0!=t.level&&"horizontal"!==f.mode||1<t.level&&"horizontal"===f.mode||1==t.level&&t.hasItems&&"horizontal"===f.mode)?t.hasItems?f._closeItem(f,t):t.parentItem&&(f._closeItem(f,t.parentItem),y(t.parentItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=t.parentItem):(d=f._prevVisibleItem(t,0),m=t.parentItem,d&&d.parentId===t.parentId&&0==d.level&&"horizontal"==f.mode?(y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d):m&&0==m.level&&"horizontal"==f.mode||!m||m.level!=t.level-1||(y(m.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=m)),e.preventDefault(),e.stopPropagation()),"down"===h?(e.altKey?(0==t.level&&t.hasItems&&f._openItem(f,t),f.minimized&&f.minimizedHidden&&f.minimizedItem.trigger("click")):(u=a(d=f._nextVisibleItem(t,t.level)),f.minimized&&d?(y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d):(d&&(d.parentId===t.parentId||d.id==u[0].id&&"horizontal"==f.mode)&&(0==d.level&&"horizontal"==f.mode||(y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d)),"horizontal"===f.mode&&0===t.level&&t.isOpen&&t.hasItems&&(d=f._nextVisibleItem(t),y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d))),e.preventDefault(),e.stopPropagation()):"up"===h&&(e.altKey?(t.parentItem&&0==t.parentItem.level?(f._closeItem(f,t.parentItem),y(t.parentItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=t.parentItem):null===t.parentItem&&0===t.level&&"horizontal"===f.mode&&f._closeItem(f,t),f.minimized&&(f.minimizedHidden||f.minimizedItem.trigger("click"))):(d=f._prevVisibleItem(t,t.level),u=a(t),f.minimized&&d?(y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d):d&&(d.parentId===t.parentId||d.id==t.parentId&&0==d.level&&"horizontal"==f.mode)?0==d.level&&"horizontal"===f.mode&&0===t.level||(y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d):t&&t.id==u[0].id&&t.parentItem&&0===t.parentItem.level&&"horizontal"===f.mode&&(d=t.parentItem,y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d)),e.preventDefault(),e.stopPropagation()),9==e.keyCode)if(d=e.shiftKey?f._prevVisibleItem(t):f._nextVisibleItem(t))y(d.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=d,e.preventDefault(),e.stopPropagation();else if(f.lockFocus){for(var u=new Array,p=0,c=0;c<f.items.length;c++)f.items[c]!=t&&f.items[c].parentId==t.parentId&&(u[p++]=f.items[c]);0<u.length&&(e.shiftKey?(y(u[u.length-1].element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=u[u.length-1]):(y(u[0].element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=u[0]),y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus"))),e.preventDefault(),e.stopPropagation()}else t&&(y(t.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=null)},this.addHandler(this.host,"keydown.menu"+this.element.id,function(e){f.handleKeyDown(e)}),f.enableRoundedCorners&&this.host.addClass(f.toThemeProperty("jqx-rc-all")),y.each(this.items,function(){var l=this,e=y(l.element);if(e.attr("role","menuitem"),f.enableRoundedCorners&&e.addClass(f.toThemeProperty("jqx-rc-all")),f.removeHandler(e,"click"),f.addHandler(e,"click",function(e){var t,i,s;l.disabled||f.disabled||(f.keyboardNavigation&&(f.activeItem&&y(f.activeItem.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=l,y(l.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.minimized&&e.stopPropagation()),f._raiseEvent("2",{type:"mouse",item:l.element,event:e}),f.autoOpen?!f.autoCloseOnClick||h||f.clickToOpen||l.closeOnClick&&(e.data=f)._closeAll(e):0<l.level&&(!f.autoCloseOnClick||h||f.clickToOpen||(e.data=f)._closeAll(e)),h&&f.autoCloseOnClick&&(e.data=f,l.hasItems||f._closeAll(e)),"A"==e.target.tagName||"a"==e.target.tagName||null!=(t=null!=l.anchor?y(l.anchor):null)&&0<t.length&&(i=t.attr("href"),s=t.attr("target"),null!=i&&(null!=s?window.open(i,s):window.location=i)))}),f.removeHandler(e,"mouseenter"),f.removeHandler(e,"mouseleave"),u||"simple"==f.mode||f._renderHover(e,l,h),null!=l.subMenuElement){var m=y(l.subMenuElement);if("simple"==f.mode)return m.show(),!0;m.wrap('<div class="jqx-menu-popup '+f.toThemeProperty("jqx-menu-popup")+'" style="border: none; background-color: transparent; z-index:'+a+'; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: hidden;"><div style="background-color: transparent; border: none; position:absolute; overflow:hidden; left: 0; top: 0; right: 0; width: 100%; height: 100%;"></div></div>'),m.css({overflow:"hidden",position:"absolute",left:0,display:"inherit",top:-m.outerHeight()}),m.data("timer",{}),0<l.level?m.css("left",-m.outerWidth()):"horizontal"==f.mode&&m.css("left",0),a++;var t,i,s,n,o=y(l.subMenuElement).closest("div.jqx-menu-popup").css({width:parseInt(y(l.subMenuElement).outerWidth())+parseInt(d[0])+"px",height:parseInt(y(l.subMenuElement).outerHeight())+parseInt(d[1])+"px"}),r=e.closest("div.jqx-menu-popup");0<r.length?(t=m.css("margin-left"),i=m.css("margin-right"),s=m.css("padding-left"),n=m.css("padding-right"),o.appendTo(r)):(t=m.css("margin-left"),i=m.css("margin-right"),s=m.css("padding-left"),n=m.css("padding-right"),o.appendTo(y(document.body))),m.css("margin-left",t),m.css("margin-right",i),m.css("padding-left",s),m.css("padding-right",n),f.clickToOpen?(f.removeHandler(e,"mousedown"),f.addHandler(e,"mousedown",function(e){clearTimeout(m.data("timer").hide),null!=m&&m.stop(),0!=l.level||l.isOpen||(e.data=f)._closeAll(e),l.isOpen?f._closeItem(f,l,!0):f._openItem(f,l)})):((h||u)&&(f.removeHandler(e,y.jqx.mobile.getTouchEventName("touchstart")),f.addHandler(e,y.jqx.mobile.getTouchEventName("touchstart"),function(e){return clearTimeout(m.data("timer").hide),null!=m&&m.stop(),0!=l.level||l.isOpen||"popup"==f.mode||(e.data=f)._closeAll(e),l.isOpen?f._closeItem(f,l,!0):f._openItem(f,l),!1})),u||(f.addHandler(e,"mouseenter",function(){if(((f.autoOpen||0<l.level&&!f.autoOpen)&&clearTimeout(m.data("timer").hide),l.parentId&&0!=l.parentId)&&(f.menuElements[l.parentId]&&!f.menuElements[l.parentId].isOpen))return;return(f.autoOpen||0<l.level&&!f.autoOpen)&&f._openItem(f,l),!1}),f.addHandler(e,"mousedown",function(){f.autoOpen||0!=l.level||(clearTimeout(m.data("timer").hide),null!=m&&m.stop(),l.isOpen?f._closeItem(f,l,!0):f._openItem(f,l))}),f.addHandler(e,"mouseleave",function(e){var t,i,s,n,o,r,a;f.autoCloseOnMouseLeave&&(clearTimeout(m.data("timer").hide),t=y(l.subMenuElement),i=parseInt(e.pageX),s=parseInt(e.pageY),n=parseInt(t.coord().left),o=parseInt(t.coord().top),r=parseInt(t.outerWidth()),a=parseInt(t.outerHeight()),n-5<=i&&i<=n+r+5&&o<=s&&s<=o+a||f._closeItem(f,l,!0))}),f.removeHandler(o,"mouseenter"),f.addHandler(o,"mouseenter",function(){clearTimeout(m.data("timer").hide)}),f.removeHandler(o,"mouseleave"),f.addHandler(o,"mouseleave",function(e){f.autoCloseOnMouseLeave&&(clearTimeout(m.data("timer").hide),clearTimeout(m.data("timer").show),null!=m&&m.stop(),f._closeItem(f,l,!0))})))}}),"simple"==this.mode&&this._renderSimpleMode(),this._autoSizeHorizontalMenuItems(),this._raiseEvent("3",this)},_renderSimpleMode:function(){this.host.show()},createID:function(){var e=Math.random()+"";for(e=+(e="99"+(e=e.replace(".","")));this.items[e];)e=+(e=(e=Math.random()+"").replace(".",""));return"menuItem"+e},_createMenu:function(e,t){if(null!=e){null==t&&(t=!0),null==t&&(t=!0);y(e).addClass("jqx-menu-ul");var i=y(e).find("li"),s=0;this.itemMapping=new Array;for(var n=0;n<i.length;n++){var o,r,a,l,m,d,h,u,p=i[n],c=y(p);-1==p.className.indexOf("jqx-menu")&&0==this.autoGenerate||(o=(o=p.id)||this.createID(),t&&(p.id=o,this.items[s]=new y.jqx._jqxMenu.jqxMenuItem,this.menuElements[o]=this.items[s]),s+=1,r=0,a=this,c.children().each(function(){return t||(this.className="",a.autoGenerate&&(y(a.items[s-1].subMenuElement)[0].className="",a.minimized||y(a.items[s-1].subMenuElement).addClass(a.toThemeProperty("jqx-widget-content")),y(a.items[s-1].subMenuElement).addClass(a.toThemeProperty("jqx-menu-dropdown")),y(a.items[s-1].subMenuElement).addClass(a.toThemeProperty("jqx-popup")))),-1!=this.className.indexOf("jqx-menu-dropdown")?(t&&(a.items[s-1].subMenuElement=this),!1):!a.autoGenerate||"ul"!=this.tagName&&"UL"!=this.tagName?void 0:(t&&(a.items[s-1].subMenuElement=this),this.className="",a.minimized||y(this).addClass(a.toThemeProperty("jqx-widget-content")),y(this).addClass(a.toThemeProperty("jqx-menu-dropdown")),y(this).addClass(a.toThemeProperty("jqx-popup")),y(this).attr("role","menu"),a.rtl?y(this).addClass(a.toThemeProperty("jqx-rc-l")):y(this).addClass(a.toThemeProperty("jqx-rc-r")),y(this).addClass(a.toThemeProperty("jqx-rc-b")),!1)}),c.parents().each(function(){return-1==this.className.indexOf("jqx-menu-item")&&(!a.autoGenerate||"li"!=this.tagName&&"LI"!=this.tagName)?void 0:(r=this.id,!1)}),d=!1,l=p.getAttribute("type"),(m=p.getAttribute("ignoretheme")||p.getAttribute("data-ignoretheme"))?"true"!=m&&1!=m||(m=!0):m=!1,l?"separator"==l&&(d=!0):l=p.type,d||(l=r?"sub":"top"),v=this.items[s-1],t&&(v.id=o,v.parentId=r,v.type=l,v.separator=d,v.element=i[n],h=c.children("a"),v.disabled="true"==p.getAttribute("item-disabled"),v.level=c.parents("li").length,v.anchor=0<h.length?h:null,v.anchor&&y(v.anchor).attr("tabindex",-1)),v.ignoretheme=m,null!=(u=this.menuElements[r])&&(u.ignoretheme&&(v.ignoretheme=u.ignoretheme,m=u.ignoretheme),v.parentItem=u,v.parentElement=u.element),this.autoGenerate&&("separator"==l?(c.removeClass(),c.addClass(this.toThemeProperty("jqx-menu-item-separator")),c.attr("role","separator")):m||(0<=c[0].className.indexOf("jqx-grid-menu-item-touch")?c[0].className=this.toThemeProperty("jqx-grid-menu-item-touch"):c[0].className="",this.rtl&&c.addClass(this.toThemeProperty("jqx-rtl")),0<v.level&&!a.minimized?(c.addClass(this.toThemeProperty("jqx-item")),c.addClass(this.toThemeProperty("jqx-menu-item"))):(c.addClass(this.toThemeProperty("jqx-item")),c.addClass(this.toThemeProperty("jqx-menu-item-top"))))),v.disabled&&(c.addClass(a.toThemeProperty("jqx-menu-item-disabled")),c.addClass(a.toThemeProperty("jqx-fill-state-disabled"))),this.itemMapping[n]={element:i[n],item:v},this.itemMapping["id"+i[n].id]=this.itemMapping[n],t&&!m&&(v.hasItems=0<c.find("li").length,v.hasItems&&v.element&&(y.jqx.aria(y(v.element),"aria-haspopup",!0),v.subMenuElement.id||(v.subMenuElement.id=y.jqx.utilities.createId()),y.jqx.aria(y(v.element),"aria-owns",v.subMenuElement.id))))}for(var f=0;f<i.length;f++){var v,x=i[f];if(this.itemMapping["id"+x.id]){if(!(v=this.itemMapping["id"+x.id].item))continue;v.prevItem=null,v.nextItem=null,0<f&&this.itemMapping["id"+i[f-1].id]&&(v.prevItem=this.itemMapping["id"+i[f-1].id].item),f<i.length-1&&this.itemMapping["id"+i[f+1].id]&&(v.nextItem=this.itemMapping["id"+i[f+1].id].item)}}}},destroy:function(){var t=this;y.jqx.utilities.resize(t.host,null,!0);var e=t.host.closest("div.jqx-menu-wrapper");t.removeHandler(e,"keydown"),e.remove(),t.removeHandler(y("#menuWrapper"+t.element.id),"keydown"),y("#menuWrapper"+t.element.id).remove(),t.removeHandler(t.host,"keydown"),t.removeHandler(t.host,"focus"),t.removeHandler(t.host,"blur"),t.removeHandler(y(document),"mousedown.menu"+t.element.id,t._closeAfterClick),t.removeHandler(y(document),"mouseup.menu"+t.element.id,t._closeAfterClick),t.removeHandler(y(document),"contextmenu."+t.element.id),t.removeHandler(t.host,"contextmenu."+t.element.id),y.data(document.body,"jqxMenuOldHost"+t.element.id,null),t.isTouchDevice()&&t.removeHandler(y(document),y.jqx.mobile.getTouchEventName("touchstart")+".menu"+t.element.id,t._closeAfterClick,this),y(window).off&&y(window).off("resize.menu"+t.element.id),y.each(t.items,function(){var e=y(this.element);t.removeHandler(e,"click"),t.removeHandler(e,"selectstart"),t.removeHandler(e,"mouseenter"),t.removeHandler(e,"mouseleave"),t.removeHandler(e,"mousedown"),t.removeHandler(e,"mouseleave"),y(this.subMenuElement).closest("div.jqx-menu-popup").remove(),delete this.subMenuElement,delete this.element}),y.data(document.body,"menuel",null),delete t.menuElements,t.items=new Array,delete t.items;var i=y.data(t.element,"jqxMenu");i&&delete i.instance,t.host.removeClass(),t.host.remove(),delete t.host,delete t.element},_raiseEvent:function(e,t){null==t&&(t={owner:null});var i=this.events[e],s=t;s.owner=this;var n=new y.Event(i);return"2"==e&&((s=t.item).owner=this,s.clickType=t.type,y.extend(n,t.event),n.type="itemclick"),n.owner=this,n.args=s,this.host.trigger(n)},propertiesChangedHandler:function(e,t,i){var s;i.width&&i.height&&2==Object.keys(i).length&&(e._setSize(),"popup"===e.mode&&(this.host.closest("div.jqx-menu-wrapper")[t](i),s=this.host[0].id,y("#"+s)[t](i)))},propertyChangedHandler:function(e,t,i,s){if(null!=this.isInitialized&&0!=this.isInitialized&&!(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length)&&("disabled"==t&&(e.disabled?(e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")),e.host.addClass(e.toThemeProperty("jqx-menu-disabled"))):(e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")),e.host.removeClass(e.toThemeProperty("jqx-menu-disabled")))),s!=i)){var n,o,r;if("touchMode"==t&&(this._isTouchDevice=null,e._render(s,i)),"width"===t||"height"===t)return e._setSize(),void("popup"===e.mode&&(this.host.closest("div.jqx-menu-wrapper")[t](s),n=this.host[0].id,y("#"+n)[t](s)));"source"==t&&null!=e.source&&(o=e.loadItems(e.source),e.element.innerHTML=o,0<(r=e.host.find("ul:first")).length&&(e.refresh(),e._createMenu(r[0]),e._render())),"autoCloseOnClick"==t?0==s?e.removeHandler(y(document),"mousedown.menu"+this.element.id,e._closeAll):e.addHandler(y(document),"mousedown.menu"+this.element.id,e,e._closeAll):"mode"==t||"width"==t||"height"==t||"showTopLevelArrows"==t?(e.refresh(),"mode"==t?e._render(s,i):e._applyOrientation()):"theme"==t&&y.jqx.utilities.setTheme(i,s,e.host)}}})}(jqxBaseFramework),jqxBaseFramework.jqx._jqxMenu.jqxMenuItem=function(e,t,i){return{id:e,parentId:t,parentItem:null,anchor:null,type:i,disabled:!1,level:0,isOpen:!1,hasItems:!1,element:null,subMenuElement:null,arrow:null,openHorizontalDirection:"right",openVerticalDirection:"down",closeOnClick:!0}};