!function(A){A.jqx.jqxWidget("jqxListBox","",{}),A.extend(A.jqx._jqxListBox.prototype,{defineInstance:function(){var e={disabled:!1,checkboxSize:16,checkboxes:!1,width:null,height:null,items:new Array,multiple:!1,selectedIndex:-1,selectedIndexes:new Array,source:null,scrollBarSize:A.jqx.utilities.scrollBarSize,enableHover:!0,enableSelection:!0,visualItems:new Array,groups:new Array,equalItemsWidth:!0,itemHeight:-1,visibleItems:new Array,emptyGroupText:"Group",hasThreeStates:!1,autoHeight:!1,autoItemsHeight:!1,roundedcorners:!0,touchMode:"auto",displayMember:"",groupMember:"",valueMember:"",searchMember:"",searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:1e3,incrementalSearchKeyDownDelay:300,allowDrag:!1,allowDrop:!0,dropAction:"default",touchModeStyle:"auto",keyboardNavigation:!0,enableMouseWheel:!0,multipleextended:!1,selectedValues:new Array,emptyString:"",rtl:!1,rendered:null,renderer:null,dragStart:null,dragEnd:null,focusable:!0,ready:null,_checkForHiddenParent:!0,autoBind:!0,_renderOnDemand:!1,filterable:!1,filterHeight:27,filterPlaceHolder:"Looking for",filterDelay:100,filterChange:null,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["select","unselect","change","checkChange","dragStart","dragEnd","bindingComplete","itemAdd","itemRemove","itemUpdate"]};return this===A.jqx._jqxListBox.prototype||A.extend(!0,this,e),e},createInstance:function(e){var t=this;15!=A.jqx.utilities.scrollBarSize&&(t.scrollBarSize=A.jqx.utilities.scrollBarSize),null==t.width&&(t.width=200),null==t.height&&(t.height=200),t.renderListBox();var i=t;A.jqx.utilities.resize(t.host,function(){i._updateSize()},!1,t._checkForHiddenParent)},resize:function(e,t){this.width=e,this.height=t,this._updateSize()},render:function(){this.renderListBox(),this.refresh()},renderListBox:function(){var e,t,i,s,l,n=this,r=n.element.nodeName.toLowerCase();"select"==r||"ul"==r||"ol"==r?(n.field=n.element,n.field.className&&(n._className=n.field.className),e={title:n.field.title},n.field.id.length?e.id=n.field.id.replace(/[^\w]/g,"_")+"_jqxListBox":e.id=A.jqx.utilities.createId()+"_jqxListBox",t=A("<div></div>",e),n.width||(n.width=A(n.field).width()),n.height||(n.height=A(n.field).outerHeight()),n.element.style.cssText=n.field.style.cssText,A(n.field).hide().after(t),i=n.host.data(),n.host=t,n.host.data(i),n.element=t[0],n.element.id=n.field.id,n.field.id=e.id,n._className&&(n.host.addClass(n._className),A(n.field).removeClass(n._className)),n.field.tabIndex&&(s=n.field.tabIndex,n.field.tabIndex=-1,n.element.tabIndex=s)):(0<n.host.find("li").length||0<n.host.find("option").length)&&(l=A.jqx.parseSourceTag(n.element),n.source=l.items),n.element.innerHTML="";var a=(n=n).element.className;a+=" "+n.toThemeProperty("jqx-listbox"),a+=" "+n.toThemeProperty("jqx-reset"),a+=" "+n.toThemeProperty("jqx-rc-all"),a+=" "+n.toThemeProperty("jqx-widget"),a+=" "+n.toThemeProperty("jqx-widget-content"),n.element.className=a;var h=window.getComputedStyle(this.element),o=2*parseInt(h.borderLeftWidth),d=h.boxSizing;0===this.element.offsetWidth&&(o=2),"border-box"!==d&&!isNaN(o)||(o=0),null!=n.width&&-1!=n.width.toString().indexOf("%")&&(n.host.width(n.width),0<o&&this.host.css("box-sizing","border-box")),null!=n.height&&-1!=n.height.toString().indexOf("%")&&(n.host.height(n.height),0==n.host.height()&&n.host.height(200)),(null!=n.width&&-1!=n.width.toString().indexOf("px")||null!=n.width&&!isNaN(n.width))&&(n.element.style.width=parseInt(n.width)-o+"px"),(null!=n.height&&-1!=n.height.toString().indexOf("px")||null!=n.height&&!isNaN(n.height))&&(n.element.style.height=parseInt(n.height)-o+"px"),n.multiple||n.multipleextended||n.checkboxes?A.jqx.aria(n,"aria-multiselectable",!0):A.jqx.aria(n,"aria-multiselectable",!1);var c="<div style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='filter"+n.element.id+"' style='display: none; visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><input style='position: absolute;'/></div><div id='listBoxContent' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+n.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+n.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/></div></div>";n.host.attr("role","listbox"),n.element.innerHTML=c,n._checkForHiddenParent&&(n._addInput(),n.host.attr("tabIndex")||n.host.attr("tabIndex",1)),n.filter=A(n.element.firstChild.firstChild.firstChild),n.filterInput=A(n.filter[0].firstChild),n.filterInput.attr("placeholder",n.filterPlaceHolder),n.filterInput.addClass(n.toThemeProperty("jqx-widget jqx-listbox-filter-input jqx-input jqx-rc-all")),n.addHandler(n.filterInput,"keyup.textchange",function(e){13==e.keyCode?n._search(e):0<n.filterDelay&&(n._filterTimer&&clearTimeout(n._filterTimer),n._filterTimer=setTimeout(function(){n._search(e)},n.filterDelay)),e.stopPropagation()});var u=A(n.element.firstChild.firstChild.firstChild.nextSibling.nextSibling);if(!n.host.jqxButton)throw new Error("jqxListBox: Missing reference to jqxbuttons.js.");if(!u.jqxScrollBar)throw new Error("jqxListBox: Missing reference to jqxscrollbar.js.");var m=parseInt(n.host.height())/2;0==m&&(m=10),n.vScrollBar=u.jqxScrollBar({_initialLayout:!0,vertical:!0,rtl:n.rtl,theme:n.theme,touchMode:n.touchMode,largestep:m});var v,p=A(n.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling);n.hScrollBar=p.jqxScrollBar({_initialLayout:!0,vertical:!1,rtl:n.rtl,touchMode:n.touchMode,theme:n.theme}),n.content=A(n.element.firstChild.firstChild.firstChild.nextSibling),n.content[0].id="listBoxContent"+n.element.id,n.bottomRight=A(n.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling.nextSibling).addClass(n.toThemeProperty("jqx-listbox-bottomright")).addClass(n.toThemeProperty("jqx-scrollbar-state-normal")),n.bottomRight[0].id="bottomRight"+n.element.id,n.vScrollInstance=A.data(n.vScrollBar[0],"jqxScrollBar").instance,n.hScrollInstance=A.data(n.hScrollBar[0],"jqxScrollBar").instance,n.isTouchDevice()&&(A.jqx.browser.msie&&A.jqx.browser.version<9||(v=A("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>"),n.content.parent().append(v),n.overlayContent=n.host.find(".overlay"),n.filterable&&n.overlayContent.css("top","30px"))),n._updateTouchScrolling(),n.host.addClass("jqx-disableselect"),n.host.jqxDragDrop&&window.jqxListBoxDragDrop()},_highlight:function(e,t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+i+")","ig"),function(e,t){return"<b>"+t+"</b>"})},_addInput:function(){var e=this.host.attr("name");e&&this.host.attr("name",""),this.input=A("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",e)},_updateTouchScrolling:function(){var e,i=this;this.isTouchDevice()&&(i.enableHover=!1,e=this.overlayContent?this.overlayContent:this.content,this.removeHandler(A(e),A.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"),this.removeHandler(A(e),A.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(A(e),A.jqx.mobile.getTouchEventName("touchend")+".touchScroll"),this.removeHandler(A(e),"touchcancel.touchScroll"),A.jqx.mobile.touchScroll(e,i.vScrollInstance.max,function(e,t){null!=t&&"hidden"!=i.vScrollBar.css("visibility")&&(i.vScrollInstance.value,i.vScrollInstance.setPosition(t),i._lastScroll=new Date),null!=e&&"hidden"!=i.hScrollBar.css("visibility")&&(i.hScrollInstance.value,i.hScrollInstance.setPosition(e),i._lastScroll=new Date)},this.element.id,this.hScrollBar,this.vScrollBar),"visible"!=i.vScrollBar.css("visibility")&&"visible"!=i.hScrollBar.css("visibility")?A.jqx.mobile.setTouchScroll(!1,this.element.id):A.jqx.mobile.setTouchScroll(!0,this.element.id),this._arrange())},isTouchDevice:function(){var e=A.jqx.mobile.isTouchDevice();if(1==this.touchMode){if(this.touchDevice)return!0;if(A.jqx.browser.msie&&A.jqx.browser.version<9)return!1;e=this.touchDevice=!0,A.jqx.mobile.setMobileSimulator(this.element)}else 0==this.touchMode&&(e=!1);return e&&0!=this.touchModeStyle&&(this.scrollBarSize=A.jqx.utilities.touchScrollBarSize),e&&this.host.addClass(this.toThemeProperty("jqx-touch")),e},beginUpdate:function(){this.updatingListBox=!0},endUpdate:function(){this.updatingListBox=!1,this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop()},beginUpdateLayout:function(){this.updating=!0},resumeUpdateLayout:function(){this.updating=!1,this.vScrollInstance.value=0,this._render(!1)},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&(e._cachedItemHtml=new Array,e.refresh())},propertyChangedHandler:function(e,t,i,s){var l,n,r;null!=this.isInitialized&&0!=this.isInitialized&&i!=s&&(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length||("_renderOnDemand"==t&&(e._render(!1,!0),-1!=e.selectedIndex&&(l=e.selectedIndex,e.selectedIndex=-1,e._stopEvents=!0,e.selectIndex(l,!1,!0),-1==e.selectedIndex&&(e.selectedIndex=l),e._stopEvents=!1)),"filterable"==t&&e.refresh(),"filterHeight"==t&&e._arrange(),"filterPlaceHolder"==t&&e.filterInput.attr("placeholder",s),"renderer"==t&&(e._cachedItemHtml=new Array,e.refresh()),"itemHeight"!=t&&"checkboxSize"!==t||e.refresh(),"source"!=t&&"checkboxes"!=t||(null==s&&i&&i.unbindBindingUpdate&&(i.unbindBindingUpdate(e.element.id),i.unbindDownloadComplete(e.element.id)),e.clearSelection(),e.refresh()),"scrollBarSize"!=t&&"equalItemsWidth"!=t||s!=i&&e._updatescrollbars(),"disabled"==t&&(e._renderItems(),e.vScrollBar.jqxScrollBar({disabled:s}),e.hScrollBar.jqxScrollBar({disabled:s})),"touchMode"!=t&&"rtl"!=t||(e._removeHandlers(),e.vScrollBar.jqxScrollBar({touchMode:s}),e.hScrollBar.jqxScrollBar({touchMode:s}),"touchMode"==t&&(A.jqx.browser.msie&&A.jqx.browser.version<9||(n=A("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>"),e.content.parent().append(n),e.overlayContent=e.host.find(".overlay"))),e.filterable&&e.filterInput&&("rtl"==t&&s?e.filterInput.addClass(e.toThemeProperty("jqx-rtl")):"rtl"!=t||s||e.filterInput.removeClass(e.toThemeProperty("jqx-rtl")),e._arrange()),e._updateTouchScrolling(),e._addHandlers(),e._render(!1)),this.updating||"width"!=t&&"height"!=t||e._updateSize(),"theme"==t&&i!=s&&(e.hScrollBar.jqxScrollBar({theme:e.theme}),e.vScrollBar.jqxScrollBar({theme:e.theme}),e.host.removeClass(),e.host.addClass(e.toThemeProperty("jqx-listbox")),e.host.addClass(e.toThemeProperty("jqx-widget")),e.host.addClass(e.toThemeProperty("jqx-widget-content")),e.host.addClass(e.toThemeProperty("jqx-reset")),e.host.addClass(e.toThemeProperty("jqx-rc-all")),e.refresh()),"selectedIndex"==t&&(e.clearSelection(),e.selectIndex(s,!0)),"displayMember"!=t&&"valueMember"!=t||(i!=s&&(r=e.selectedIndex,e.refresh(),e.selectedIndex=r,e.selectedIndexes[r]=r),e._renderItems()),"autoHeight"==t&&(i!=s?e._render(!1):(e._updatescrollbars(),e._renderItems())),e._checkForHiddenParent&&A.jqx.isHidden(e.host)&&A.jqx.utilities.resize(this.host,function(){e._updateSize()},!1,e._checkForHiddenParent)))},loadFromSelect:function(e){var t,i,s,l;null==e||0<(t=A("#"+e)).length&&(s=(i=A.jqx.parseSourceTag(t[0])).items,l=i.index,this.source=s,this.fromSelect=!0,this.clearSelection(),this.selectedIndex=l,this.selectedIndexes[this.selectedIndex]=this.selectedIndex,this.refresh())},invalidate:function(){this._cachedItemHtml=[],this._renderItems(),this.virtualSize=null,this._updateSize()},refresh:function(e){var i=this;if(null!=this.vScrollBar){this.itemHeight=parseInt(this.itemHeight),this._cachedItemHtml=[],this.visibleItems=new Array;function t(e){var t;1==e&&-1!=i.selectedIndex&&(t=i.selectedIndex,i.selectedIndex=-1,i._stopEvents=!0,i.selectIndex(t,!1,!0),-1==i.selectedIndex&&(i.selectedIndex=t),i._stopEvents=!1)}if(null!=this.itemswrapper&&(this.itemswrapper.remove(),this.itemswrapper=null),A.jqx.dataAdapter&&null!=this.source&&this.source._source)return this.databind(this.source,e),void t(e);!this.autoBind&&(this.autoBind||e)||(this.field&&this.loadSelectTag(),this.items=this.loadItems(this.source)),this._render(!1,1==e),t(e),this._raiseEvent("6")}},loadSelectTag:function(){var e=A.jqx.parseSourceTag(this.field);this.source=e.items,-1==this.selectedIndex&&(this.selectedIndex=e.index)},_render:function(e,t){return this._renderOnDemand?(this.visibleItems=new Array,this.renderedVisibleItems=new Array,void this._renderItems()):(this._addItems(),this._renderItems(),this.vScrollInstance.setPosition(0),this._cachedItemHtml=new Array,(null==e||e)&&null!=this.items&&null!=this.items&&0<=this.selectedIndex&&this.selectedIndex<this.items.length&&this.selectIndex(this.selectedIndex,!0,!0,!0),this.allowDrag&&this._enableDragDrop&&(this._enableDragDrop(),this.isTouchDevice())?(this._removeHandlers(),this.overlayContent&&(this.overlayContent.remove(),this.overlayContent=null),this._updateTouchScrolling(),void this._addHandlers()):(this._updateTouchScrolling(),this.rendered&&this.rendered(),void(this.ready&&this.ready())))},_hitTest:function(e,t){this.filterable&&(t-=this.filterHeight)<0&&(t=0);var i=parseInt(this.vScrollInstance.value),s=this._searchFirstVisibleIndex(t+i,this.renderedVisibleItems);if(null!=this.renderedVisibleItems[s]&&this.renderedVisibleItems[s].isGroup)return null;if(0<this.renderedVisibleItems.length){var l=this.renderedVisibleItems[this.renderedVisibleItems.length-1];if(l.height+l.top<t+i)return null}return s=this._searchFirstVisibleIndex(t+i),this.visibleItems[s]},_searchFirstVisibleIndex:function(e,t){null==e&&(e=parseInt(this.vScrollInstance.value));var i=0;null!=t&&null!=t||(t=this.visibleItems);for(var s=t.length;i<=s;){var l=parseInt((i+s)/2),n=t[l];if(null==n)break;if(n.initialTop>e&&n.initialTop+n.height>e)s=l-1;else{if(!(n.initialTop<e&&n.initialTop+n.height<=e))return l;i=l+1}}return 0},_renderItems:function(){if(null!=this.items&&0!=this.items.length){if(1!=this.updatingListBox){var e=this.isTouchDevice(),t=this.vScrollInstance,i=this.hScrollInstance,s=parseInt(t.value),l=parseInt(i.value);this.rtl&&"hidden"!=this.hScrollBar[0].style.visibility&&(l=i.max-l);this.items.length,this.host.width();var n=parseInt(this.content[0].style.width),r=n+parseInt(i.max);parseInt(this.vScrollBar[0].style.width);"hidden"==this.vScrollBar[0].style.visibility&&0,"visible"!=this.hScrollBar[0].style.visibility&&(r=n);this._getVirtualItemsCount();var a=new Array,h=0,o=parseInt(this.element.style.height)+2;-1!=this.element.style.height.indexOf("%")&&(o=this.host.outerHeight()),isNaN(o)&&(o=0);var d=0,c=0,u=0;if(0==t.value||0==this.visibleItems.length)for(var m=0;m<this.items.length;m++){(w=this.items[m]).visible&&(w.top=-s,w.initialTop=-s,!w.isGroup&&w.visible&&((this.visibleItems[c++]=w).visibleIndex=c-1),(this.renderedVisibleItems[u++]=w).left=-l,0<=w.top+w.height&&w.top-w.height<=o&&(a[h++]={index:m,item:w}),s-=w.height,s--)}for(var v=0<s?this._searchFirstVisibleIndex(this.vScrollInstance.value,this.renderedVisibleItems):0,p=0,h=0,g=this.vScrollInstance.value,b=0;p<100+o;){if(null==(w=this.renderedVisibleItems[v]))break;if(w.visible&&(w.left=-l,0<=w.top+w.height-g&&w.initialTop-g-w.height<=2*o&&(a[h++]={index:v,item:w})),v++,w.visible&&(p+=w.initialTop-g+w.height-p),++b>this.items.length-1)break}if(!this._renderOnDemand){var x=this.toThemeProperty("jqx-listitem-state-normal")+" "+this.toThemeProperty("jqx-item"),f=this.toThemeProperty("jqx-listitem-state-group"),I=this.toThemeProperty("jqx-listitem-state-disabled")+" "+this.toThemeProperty("jqx-fill-state-disabled");this.checkboxes&&(x+=" checkboxes");for(var y=0,S=this,m=0;m<this.visualItems.length;m++){function _(){var e=k[0].firstChild;S.checkboxes&&(e=k[0].lastChild),null!=e&&(e.style.visibility="hidden",e.className=""),S.checkboxes&&(k[0].firstChild.style.visibility="hidden")}var w,k=this.visualItems[m];if(m<a.length){if((w=a[m].item).initialTop-g>=o){_();continue}var q=A(k[0].firstChild);if(this.checkboxes&&(q=A(k[0].lastChild)),0==q.length)continue;if(null==q[0])continue;q[0].className="",q[0].style.display="block",q[0].style.visibility="inherit";var j,B,T,H,C,P,D,M,V="",V=!w.isGroup&&0<=!this.selectedIndexes[w.index]?x:f;(w.disabled||this.disabled)&&(V+=" "+I),this.roundedcorners&&(V+=" "+this.toThemeProperty("jqx-rc-all")),e&&(V+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),q[0].className=V,this.renderer?(w.key||(w.key=this.generatekey()),this._cachedItemHtml||(this._cachedItemHtml=new Array),this._cachedItemHtml[w.key]?q[0].innerHTML!=this._cachedItemHtml[w.key]&&(q[0].innerHTML=this._cachedItemHtml[w.key]):(j=this.renderer(w.index,w.label,w.value),q[0].innerHTML=j,this._cachedItemHtml[w.key]=q[0].innerHTML)):(-1!==this.itemHeight&&(B=2+2*parseInt(q.css("padding-top")),q[0].style.lineHeight=w.height-B+"px",q.css("vertical-align","middle")),null!=w.html&&0<w.html.toString().length?q[0].innerHTML=w.html:null!=w.label||null!=w.value?null!=w.label?(q[0].innerHTML!==w.label&&(q[0].innerHTML=w.label),""==A.trim(w.label)&&(q[0].innerHTML=this.emptyString,""==this.emptyString&&(q[0].style.height=w.height-8+"px")),this.incrementalSearch||w.disabled||null!=this.searchString&&""!=this.searchString&&(q[0].innerHTML=this._highlight(w.label.toString(),this.searchString))):null===w.label?(q[0].innerHTML=this.emptyString,""==this.emptyString&&(q[0].style.height=w.height-8+"px")):q[0].innerHTML!==w.value?q[0].innerHTML=w.value:""==w.label&&(q[0].innerHTML=" "):""!=w.label&&null!=w.label||(q[0].innerHTML="",q[0].style.height=w.height-8+"px")),k[0].style.left=w.left+"px",k[0].style.top=w.initialTop-g+"px",w.element=q[0],this.isMaterialized()&&!this.renderer&&this._checkForHiddenParent&&(A(w.element).addClass("ripple"),A.jqx.ripple(A(w.element))),w.title&&(q[0].title=w.title),this.equalItemsWidth&&!w.isGroup?(0==d&&(T=parseInt(r),T-=parseInt(q.outerWidth())-parseInt(q.width()),H=null!=(H=1)?parseInt(H):0,"border-box"===this.host.css("box-sizing")&&(T-=2),d=T,this.checkboxes&&"hidden"==this.hScrollBar[0].style.visibility&&(d-=this.checkboxSize+13)),n>this.virtualSize.width?(q[0].style.width=d+"px",w.width=d):(q[0].style.width=-4+this.virtualSize.width+"px",w.width=this.virtualSize.width-4)):q.width()<this.host.width()&&q.width(this.host.width()-2),this.rtl&&(q[0].style.textAlign="right"),this.autoItemsHeight&&(q[0].style.whiteSpace="pre-line",q.width(d),w.width=d),y=0,this.checkboxes&&!w.isGroup?(0==y&&(y=(w.height-this.checkboxSize-3)/2,y=parseInt(y),y++),(M=A(k.children()[0]))[0].item=w,this.rtl?"0px"!=q[0].style.left&&(q[0].style.left="0px"):(C=this.checkboxSize+9,q[0].style.left!=C+"px"&&(q[0].style.left=C+"px")),this.rtl&&M.css("left",8+w.width+"px"),M[0].style.top=y+"px",M[0].style.display="block",M[0].style.visibility="inherit",P=w.checked,D=w.checked?" "+this.toThemeProperty("jqx-checkbox-check-checked"):"",M[0].setAttribute("checked",w.checked),M[0].firstChild&&M[0].firstChild.firstChild&&M[0].firstChild.firstChild.firstChild&&M[0].firstChild.firstChild&&(P?M[0].firstChild.firstChild.firstChild.className=D:!1===P?M[0].firstChild.firstChild.firstChild.className="":null===P&&(M[0].firstChild.firstChild.firstChild.className=this.toThemeProperty("jqx-checkbox-check-indeterminate"))),A.jqx.ariaEnabled&&(P?k[0].setAttribute("aria-selected",!0):k[0].removeAttribute("aria-selected"))):this.checkboxes&&(M=A(k.children()[0])).css({display:"none",visibility:"inherit"}),!w.disabled&&(!this.filterable&&0<=this.selectedIndexes[w.visibleIndex]||w.selected&&this.filterable)?(q.addClass(this.toThemeProperty("jqx-listitem-state-selected")),q.addClass(this.toThemeProperty("jqx-fill-state-pressed")),A.jqx.ariaEnabled&&(k[0].setAttribute("aria-selected",!0),this._activeElement=k[0])):this.checkboxes||A.jqx.ariaEnabled&&k[0].removeAttribute("aria-selected")}else _()}}}}else this.visibleItems=new Array},generatekey:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_calculateVirtualSize:function(e){if(!this._renderOnDemand){var t=0,i=2,s=0,l=document.createElement("span");this.equalItemsWidth&&A(l).css("float","left"),l.style.whiteSpace="pre";var n=0,r=void 0===e?this.host.outerHeight():e+2;document.body.appendChild(l);var a=this.items.length,h=this.host.width();if(this.autoItemsHeight&&(h-=10,"hidden"!=this.vScrollBar.css("visibility")&&(h-=20)),this.autoItemsHeight||this.renderer||1<=this.groups.length||0<a&&null!=this.items[0].html&&""!=this.items[0].html)for(var o,d,s=0;s<a;s++){(c=this.items[s]).isGroup&&""==c.label&&""==c.html||c.visible&&(u="",c.isGroup?u+=this.toThemeProperty("jqx-listitem-state-group jqx-rc-all"):u+=this.toThemeProperty("jqx-widget jqx-listitem-state-normal jqx-rc-all"),u+=" "+this.toThemeProperty("jqx-fill-state-normal"),this.isTouchDevice()&&(u+=" "+this.toThemeProperty("jqx-touch")),l.className=u,this.autoItemsHeight&&(l.style.whiteSpace="pre-line",m=this.checkboxSize+9,v=this.checkboxes?-m:0,l.style.width=v+h+"px"),this.renderer?(o=this.renderer(c.index,c.label,c.value),l.innerHTML=o):null!=c.html&&0<c.html.toString().length?l.innerHTML=c.html:null==c.label&&null==c.value||(null!=c.label?(l.innerHTML=c.label,""==c.label&&(l.innerHTML="Empty")):l.innerHTML=c.value),p=l.offsetHeight,d=l.offsetWidth,-1<this.itemHeight&&(p=this.itemHeight),c.height=p,c.width=d,i+=++p,t=Math.max(t,d),i<=r&&n++)}else{for(var c,u,m,v,p,i=0,g=0,b="",x=0,f=0,I=-1,s=0;s<a;s++){(c=this.items[s]).isGroup&&""==c.label&&""==c.html||c.visible&&(u="",0==++I&&(u+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"),u+=" "+this.toThemeProperty("jqx-fill-state-normal"),u+=" "+this.toThemeProperty("jqx-widget"),u+=" "+this.toThemeProperty("jqx-listbox"),u+=" "+this.toThemeProperty("jqx-widget-content"),this.isTouchDevice()&&(u+=" "+this.toThemeProperty("jqx-touch"),u+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),l.className=u,this.autoItemsHeight&&(l.style.whiteSpace="pre-line",m=this.checkboxSize+9,v=this.checkboxes?-m:0,l.style.width=v+h+"px"),null==c.html||""==c.label||null==c.label?l.innerHTML="Item":null!=c.html&&0<c.html.toString().length?l.innerHTML=c.html:null==c.label&&null==c.value||(null!=c.label?null!=c.label.toString().match(new RegExp("\\w"))||null!=c.label.toString().match(new RegExp("\\d"))?l.innerHTML=c.label:l.innerHTML="Item":l.innerHTML=c.value),p=1+l.offsetHeight,-1<this.itemHeight&&(p=this.itemHeight),g=p),null!=x&&(f=x),null!=c.html&&0<c.html.toString().length?f!=(x=Math.max(x,c.html.toString().length))&&(b=c.html):null!=c.label?f!=(x=Math.max(x,c.label.length))&&(b=c.label):null!=c.value&&f!=(x=Math.max(x,c.value.length))&&(b=c.value),i+=c.height=g,++i<=r&&n++)}l.innerHTML=b,t=l.offsetWidth}return i+=2,n<10&&(n=10),this.filterable&&(i+=this.filterHeight),i-=4,l.parentNode.removeChild(l),{width:t,height:i,itemsPerPage:n}}},_getVirtualItemsCount:function(){if(0!=this.virtualItemsCount)return this.virtualItemsCount;var e=parseInt(this.host.height())/5;return e>this.items.length&&(e=this.items.length),e},_addItems:function(e){if(!this._renderOnDemand&&1!=(l=this).updatingListBox){if(null==l.items||0==l.items.length)return l.virtualSize={width:0,height:0,itemsPerPage:0},l._updatescrollbars(),l.renderedVisibleItems=new Array,void(l.itemswrapper&&l.itemswrapper.children().remove());var t=l.host.height();if(0==e){var i=2*(v=l._calculateVirtualSize(t)).itemsPerPage;l.autoHeight&&(i=l.items.length),l.virtualItemsCount=Math.min(i,l.items.length);v.width;return l.virtualSize=v,void l._updatescrollbars()}var s=0;l.visibleItems=new Array,l.renderedVisibleItems=new Array,l._removeHandlers(),l.allowDrag&&l._enableDragDrop&&(l.itemswrapper=null),null==l.itemswrapper&&(l.content[0].innerHTML="",l.itemswrapper=A('<div style="outline: 0 none; overflow:hidden; width:100%; position: relative;"></div>'),l.itemswrapper[0].style.height=2*t+"px",l.content[0].appendChild(l.itemswrapper[0]));i=2*(v=l._calculateVirtualSize(t)).itemsPerPage;l.autoHeight&&(i=l.items.length),l.virtualItemsCount=Math.min(i,l.items.length);var l=this;v.width;l.virtualSize=v;var n=Math.max(l.host.width(),17+v.width);l.itemswrapper[0].style.width=n+"px";for(var r="",a=A.jqx.browser.msie&&A.jqx.browser.version<9?' unselectable="on"':"",h=0;h<l.virtualItemsCount;h++){var o,d,c,u=l.items[h],m="listitem"+h+l.element.id;""!=l.theme?r+="<div"+a+" role='option' id='"+m+"' class='jqx-listitem-element jqx-listitem-element-"+l.theme+"'>":r+="<div"+a+" role='option' id='"+m+"' class='jqx-listitem-element'>",l.checkboxes&&(r+='<div style="background-color: transparent; padding: 0; margin: 0; overflow:hidden; position: absolute; float: left; width: '+(o=this.checkboxSize+8)+"px; height:  "+o+'px;" class="'+l.toThemeProperty("jqx-checkbox")+' chkbox">',d='<div class="'+l.toThemeProperty("jqx-checkbox-default")+" "+l.toThemeProperty("jqx-fill-state-normal")+" "+l.toThemeProperty("jqx-rc-all")+'"><div style="cursor: pointer; width:  '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;">',c=u.checked?" "+l.toThemeProperty("jqx-checkbox-check-checked"):"",d+='<span style="width: '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;" class="checkBoxCheck'+c+'"></span>',r+=d+="</div></div>",r+="</div>"),r+="<span"+a+" style='white-space: pre; -ms-touch-action: none;'></span></div>"}this.WinJS?l.itemswrapper.html(r):l.itemswrapper[0].innerHTML=r;for(var v,p=l.itemswrapper.children(),h=0;h<l.virtualItemsCount;h++){var u=l.items[h],g=A(p[h]);l.allowDrag&&l._enableDragDrop&&g.addClass("draggable"),l.checkboxes&&(A(g.children()[0]),g.css("float","left"),A(g[0].firstChild).css("float","left")),g[0].style.height=u.height+"px",g[0].style.top=s+"px",s+=u.height+1,l.visualItems[h]=g}l._addHandlers(),l._updatescrollbars(),l.autoItemsHeight&&(i=2*(v=l._calculateVirtualSize(t)).itemsPerPage,l.autoHeight&&(i=l.items.length),l.virtualItemsCount=Math.min(i,l.items.length),l=this,v.width,l.virtualSize=v,l._updatescrollbars()),A.jqx.browser.msie&&A.jqx.browser.version<8&&(l.host.attr("hideFocus",!0),l.host.find("div").attr("hideFocus",!0))}},_updatescrollbars:function(){var e,t,i,s,l,n,r,a,h,o,d,c,u=this;u.virtualSize&&(e=u.virtualSize.height,t=u.virtualSize.width,i=u.vScrollInstance,s=u.hScrollInstance,u._arrange(!1),l=!1,n=u.host.outerWidth(),r=u.host.outerHeight(),a=0,n<t&&(a=u.hScrollBar.outerHeight()+2),r<e+a?(h=i.max,i.max=2+parseInt(e)+a-parseInt(r-2),"inherit"!=u.vScrollBar[0].style.visibility&&(u.vScrollBar[0].style.visibility="inherit",l=!0),h!=i.max&&i._arrange()):"hidden"!=u.vScrollBar[0].style.visibility&&(u.vScrollBar[0].style.visibility="hidden",l=!0,i.setPosition(0)),o=0,"hidden"!=u.vScrollBar[0].style.visibility&&(o=u.scrollBarSize+6),d=u.checkboxes?this.checkboxSize+6:0,u.autoItemsHeight?u.hScrollBar[0].style.visibility="hidden":n-o-d<=t?(c=s.max,"inherit"==u.vScrollBar[0].style.visibility?s.max=d+o+parseInt(t)-u.host.width()+2:s.max=d+parseInt(t)-u.host.width()+4,"inherit"!=u.hScrollBar[0].style.visibility&&(u.hScrollBar[0].style.visibility="inherit",l=!0),c!=s.max&&s._arrange(),"inherit"==u.vScrollBar[0].style.visibility&&(i.max=2+parseInt(e)+u.hScrollBar.outerHeight()+2-parseInt(u.host.height()))):"hidden"!=u.hScrollBar[0].style.visibility&&(u.hScrollBar[0].style.visibility="hidden",l=!0),s.setPosition(0),l&&u._arrange(),u.itemswrapper&&(u.itemswrapper[0].style.width=Math.max(0,Math.max(n-2,17+t))+"px",u.itemswrapper[0].style.height=Math.max(0,2*r)+"px"),u.isTouchDevice()&&("visible"!=u.vScrollBar.css("visibility")&&"visible"!=u.hScrollBar.css("visibility")?A.jqx.mobile.setTouchScroll(!1,u.element.id):A.jqx.mobile.setTouchScroll(!0,u.element.id)))},clear:function(){this.source=null,this.visibleItems=new Array,this.renderedVisibleItems=new Array,this.itemsByValue=new Array,this.clearSelection(),this.refresh()},clearSelection:function(e){for(var t=0;t<this.selectedIndexes.length;t++)this.selectedIndexes[t]&&-1!=this.selectedIndexes[t]&&this._raiseEvent("1",{index:t,type:"api",item:this.getVisibleItem(t),originalEvent:null}),this.selectedIndexes[t]=-1;this.selectedIndex=-1,this.selectedValue=null,this.selectedValues=new Array,0!=e&&this._renderItems()},unselectIndex:function(e,t){if(!isNaN(e)){for(var i,s=!(this.selectedIndexes[e]=-1),l=0;l<this.selectedIndexes.length;l++){var n=this.selectedIndexes[l];-1!=n&&null!=n&&(s=!0)}s||(this.selectedValue=null,this.selectedIndex=-1,(i=this.getVisibleItem(e))&&this.selectedValues[i.value]&&(this.selectedValues[i.value]=null)),null!=t&&1!=t||(this._renderItems(),this._raiseEvent("1",{index:e,type:"api",item:this.getVisibleItem(e),originalEvent:null})),this._updateInputSelection(),this._raiseEvent("2",{index:e,type:"api",item:this.getItem(e)})}},getInfo:function(){var r=this,e=this.getItems(),a=this.getVisibleItems(),t=function(){var e=r.vScrollInstance.value;r.filterable&&(e-=r.filterHeight);for(var t=new Array,i=0;i<a.length;i++){var s,l,n=a[i];n&&(l=!0,((s=n.initialTop)+n.height-e<0||s-e>=r.host.height())&&(l=!1),l&&t.push(n))}return t}();return{items:e,visibleItems:a,viewItems:t}},getItem:function(e){if(-1==e||isNaN(e)||"string"==typeof e)return-1===e?null:this.getItemByValue(e);var t=null;A.each(this.items,function(){if(this.index==e)return t=this,!1});return t},getVisibleItem:function(e){return-1==e||isNaN(e)||"string"==typeof e?-1===e?null:this.getItemByValue(e):this.visibleItems[e]},getVisibleItems:function(){return this.visibleItems},checkIndex:function(e,t,i){var s;this.checkboxes&&(isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),(0<this.groups.length||this.filterable)&&(s=this.getVisibleItem(e)),null!=s&&(A(s.checkBoxElement),s.checked=!0,null!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{label:s.label,value:s.value,checked:!0,item:s})))},getCheckedItems:function(){if(!this.checkboxes)return null;var e=new Array;return null!=this.items?(A.each(this.items,function(){this.checked&&(e[e.length]=this)}),e):void 0},checkAll:function(t){var i;this.checkboxes&&(this.disabled||(i=this,A.each(this.items,function(){var e=this.checked;!(this.checked=!0)!==t&&!0!==e&&i._raiseEvent(3,{label:this.label,value:this.value,checked:!0,item:this})}),this._updateCheckedItems()))},uncheckAll:function(t){var i;this.checkboxes&&(this.disabled||(i=this,A.each(this.items,function(){var e=this.checked;(this.checked=!1)!==t&&!1!==e&&(this.checked=!1,i._raiseEvent(3,{label:this.label,value:this.value,checked:!1,item:this}))}),this._updateCheckedItems()))},uncheckIndex:function(e,t,i){var s;this.checkboxes&&(isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),(0<this.groups.length||this.filterable)&&(s=this.getVisibleItem(e)),null!=s&&(A(s.checkBoxElement),s.checked=!1,null!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{label:s.label,value:s.value,checked:!1,item:s})))},indeterminateIndex:function(e,t,i){var s;this.checkboxes&&(isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),(0<this.groups.length||this.filterable)&&(s=this.getVisibleItem(e)),null!=s&&(A(s.checkBoxElement),(s.checked=null)!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{checked:null})))},getSelectedIndex:function(){return this.selectedIndex},getSelectedItems:function(){var e=this.getVisibleItems(),t=this.selectedIndexes,i=[];for(var s in t)-1!=t[s]&&(i[i.length]=e[s]);return i},getSelectedItem:function(){var e=this.getSelectedItems();return e&&0<e.length?e[0]:null},_updateCheckedItems:function(){var e=this.selectedIndex;this.clearSelection(!1);this.getCheckedItems();this.selectedIndex=e,this._renderItems();var t=A.data(this.element,"hoveredItem");null!=t&&(A(t).addClass(this.toThemeProperty("jqx-listitem-state-hover")),A(t).addClass(this.toThemeProperty("jqx-fill-state-hover"))),this._updateInputSelection()},getItemByValue:function(e){if(null!=this.visibleItems){if(e&&e.value&&(e=e.value),this.itemsByValue)return this.itemsByValue[A.trim(e).split(" ").join("?")];for(var t=this.visibleItems,i=0;i<t.length;i++)if(t[i].value==e)return t[i]}},checkItem:function(e){if(null==e)return!1;var t=this._getItemByParam(e);return this.checkIndex(t.visibleIndex,!0)},uncheckItem:function(e){if(null==e)return!1;var t=this._getItemByParam(e);return this.uncheckIndex(t.visibleIndex,!0)},indeterminateItem:function(e){if(null==e)return!1;var t=this._getItemByParam(e);return this.indeterminateIndex(t.visibleIndex,!0)},val:function(i){if(this.input){if(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return"number"!=typeof i&&("date"!=typeof i&&("boolean"!=typeof i&&"string"!=typeof i))}(i)||0==arguments.length)return this.input.val();var e=this.getItemByValue(i);return null!=e&&this.selectItem(e),this.input?this.input.val():void 0}},selectItem:function(e){var t;return null!=e?(null!=e.index||(t=this.getItemByValue(e))&&(e=t),this.selectIndex(e.visibleIndex,!0)):(this.clearSelection(),!1)},unselectItem:function(e){return null!=e&&(null!=e.index||(t=this.getItemByValue(e))&&(e=t),this.unselectIndex(e.visibleIndex,!0));var t},selectIndex:function(e,t,i,s,l,n){if(!isNaN(e)){var r=this.selectedIndex;if(this.filterable&&(this.selectedIndex=-1),!(e<-1||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled)){if(this.multiple||this.multipleextended||this.selectedIndex!=e||s||this.checkboxes){if(this.checkboxes){this._updateCheckedItems();var a=r;this.selectedIndex!=e||this.multiple||(a=-1),null==l&&(l="none");var h=this.getItem(e),o=this.getItem(a);return this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(h=this.getVisibleItem(e),o=this.getVisibleItem(a)),this._raiseEvent("1",{index:a,type:l,item:o,originalEvent:n}),this.selectedIndex=e,this.selectedIndexes[a]=-1,this.selectedIndexes[e]=e,h&&(this.selectedValue=h.value,this.selectedValues[h.value]=h.value),this._raiseEvent("0",{index:e,type:l,item:h,originalEvent:n}),void this._renderItems()}var d=!(this.focused=!0);this.selectedIndex!=e&&(d=!0);a=r;this.selectedIndex!=e||this.multiple||(a=-1),null==l&&(l="none");h=this.getItem(e),o=this.getItem(a);if(this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(h=this.getVisibleItem(e),o=this.getVisibleItem(a)),null!=s&&s)this._raiseEvent("1",{index:a,type:l,item:o,originalEvent:n}),this.selectedIndex=e,this.selectedIndexes[a]=-1,this.selectedIndexes[e]=e,h&&(this.selectedValue=h.value,this.selectedValues[h.value]=h.value),this._raiseEvent("0",{index:e,type:l,item:h,originalEvent:n});else{function c(e,t,i,s,l,n){m._raiseEvent("1",{index:t,type:i,item:s,originalEvent:n}),m.selectedIndex=e,m.selectedIndexes=[],t=e,m.selectedIndexes[e]=e,m.selectedValues=new Array,l&&(m.selectedValues[l.value]=l.value),m._raiseEvent("0",{index:e,type:i,item:l,originalEvent:n})}function u(e,t,i,s,l,n){null==m.selectedIndexes[e]||-1==m.selectedIndexes[e]?(m.selectedIndexes[e]=e,m.selectedIndex=e,l&&(m.selectedValues[l.value]=l.value,m._raiseEvent("0",{index:e,type:i,item:l,originalEvent:n}))):(t=m.selectedIndexes[e],(s=m.getVisibleItem(t))&&(m.selectedValues[s.value]=null),m.selectedIndexes[e]=-1,m.selectedIndex=-1,m._raiseEvent("1",{index:t,type:i,item:s,originalEvent:n}))}var m=this;if(this.multipleextended)if(this._shiftKey||this._ctrlKey){if(this._ctrlKey)"keyboard"==l&&(this.clearSelection(!1),m._clickedIndex=e),u(e,a,l,o,h,n);else if(this._shiftKey){null==m._clickedIndex&&(m._clickedIndex=a);var v=Math.min(m._clickedIndex,e),p=Math.max(m._clickedIndex,e);this.clearSelection(!1);for(var g=v;g<=p;g++)m.selectedIndexes[g]=g,m.selectedValues[m.getVisibleItem(g).value]=m.getVisibleItem(g).value,m._raiseEvent("0",{index:g,type:l,item:this.getVisibleItem(g),originalEvent:n});m.selectedIndex="keyboard"!=l?m._clickedIndex:e}}else"keyboard"!=l&&"mouse"!=l?(u(e,a,l,o,h,n),m._clickedIndex=e):(this.clearSelection(!1),c(m._clickedIndex=e,a,l,o,h,n));else this.multiple?u(e,a,l,o,h,n):(h&&(this.selectedValue=h.value),c(e,a,l,o,h,n))}return null!=i&&1!=i||this._renderItems(),null!=t&&null!=t&&1==t&&this.ensureVisible(e),this._raiseEvent("2",{index:e,item:h,oldItem:o,type:l,originalEvent:n}),this._updateInputSelection(),d}this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(h=this.getVisibleItem(e))&&(this.selectedValue=h.value,this.selectedValues[h.value]=h.value)}}},_updateInputSelection:function(){this._syncSelection();var i=new Array;if(this.input&&(-1==this.selectedIndex?this.input.val(""):this.items&&null!=this.items[this.selectedIndex]&&(this.input.val(this.items[this.selectedIndex].value),i.push(this.items[this.selectedIndex].value)),this.multiple||this.multipleextended||this.checkboxes)){var e=this.checkboxes?this.getCheckedItems():this.getSelectedItems(),t="";if(e){for(var s=0;s<e.length;s++)null!=e[s]&&(s==e.length-1?t+=e[s].value:t+=e[s].value+",",i.push(e[s].value));this.input.val(t)}}this.field&&this.input&&("select"==this.field.nodeName.toLowerCase()?A.each(this.field,function(e,t){A(this).removeAttr("selected"),this.selected=0<=i.indexOf(this.value),this.selected&&A(this).attr("selected",!0)}):A.each(this.items,function(e,t){A(this.originalItem.originalItem).removeAttr("data-selected"),this.selected=0<=i.indexOf(this.value),this.selected&&A(this.originalItem.originalItem).attr("data-selected",!0)}))},isIndexInView:function(e){if(isNaN(e))return!1;if(!this.items)return!1;if(e<0||e>=this.items.length)return!1;var t=this.vScrollInstance.value,i=0;this.filterable&&(i=this.filterHeight);var s=this.visibleItems[e];if(null==s)return!0;var l=s.initialTop,n=s.height;return!(l-t<i||l-t+i+n>=this.host.outerHeight())},_itemsInPage:function(){var e=0,t=this;return this.items&&A.each(this.items,function(){if(this.initialTop+this.height>=t.content.height())return!1;e++}),e},_firstItemIndex:function(){return null!=this.visibleItems?this.visibleItems[0]&&this.visibleItems[0].isGroup?this._nextItemIndex(0):0:-1},_lastItemIndex:function(){return null!=this.visibleItems?this.visibleItems[this.visibleItems.length-1]&&this.visibleItems[this.visibleItems.length-1].isGroup?this._prevItemIndex(this.visibleItems.length-1):this.visibleItems.length-1:-1},_nextItemIndex:function(e){for(var t=e+1;t<this.visibleItems.length;t++)if(this.visibleItems[t]&&!this.visibleItems[t].disabled&&!this.visibleItems[t].isGroup)return t;return-1},_prevItemIndex:function(e){for(var t=e-1;0<=t;t--)if(this.visibleItems[t]&&!this.visibleItems[t].disabled&&!this.visibleItems[t].isGroup)return t;return-1},clearFilter:function(){this.filterInput.val(""),this._updateItemsVisibility("")},_search:function(e){var t=this,i=t.filterInput.val();if(9!=e.keyCode&&"none"!=t.searchMode&&null!=t.searchMode&&"undefined"!=t.searchMode&&16!=e.keyCode&&17!=e.keyCode&&20!=e.keyCode)return 37!=e.keyCode&&39!=e.keyCode&&void(e.altKey||18==e.keyCode||33<=e.keyCode&&e.keyCode<=40||(e.ctrlKey||e.metaKey||t.ctrlKey)&&88!=e.keyCode&&86!=e.keyCode||i!==t.searchString&&t._updateItemsVisibility(i))},_updateItemsVisibility:function(s){var e=this.getItems();if(null==e)return{index:-1,matchItem:new Array};var l=this,n=new Array,r=0;A.each(e,function(e){var t="";if(!this.isGroup){t=(t=this.searchLabel?this.searchLabel:this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem").toString();var i=!1;switch(l.searchMode){case"containsignorecase":i=A.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=A.jqx.string.contains(t,s);break;case"equals":i=A.jqx.string.equals(t,s);break;case"equalsignorecase":i=A.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=A.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=A.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=A.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=A.jqx.string.endsWithIgnoreCase(t,s)}i||(this.visible=!1),i&&((n[r++]=this).visible=!0,this.visibleIndex),""==s&&(i=!(this.visible=!0))}}),l.renderedVisibleItems=new Array,l.visibleItems=new Array,l.vScrollInstance.setPosition(0,!0),l._addItems(!1),l._renderItems();for(var t=0;t<l.items.length;t++)l.selectedIndexes[t]=-1;for(var i in l.selectedIndex=-1,l.selectedValues){var s=l.selectedValues[i],a=l.getItemByValue(s);a&&a.visible&&(l.selectedIndex=a.visibleIndex,l.selectedIndexes[a.visibleIndex]=a.visibleIndex)}l._syncSelection(),l.filterChange&&l.filterChange(s)},_getMatches:function(s,l){if(null==s||0==s.length)return-1;null==l&&(l=0);var e=this.getItems(),n=this,r=-1;return A.each(e,function(e){var t="";if(!this.isGroup){t=this.searchLabel?this.searchLabel.toString():this.label?this.label.toString():this.value?this.value.toString():this.title?this.title.toString():"jqxItem";var i=!1;switch(n.searchMode){case"containsignorecase":i=A.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=A.jqx.string.contains(t,s);break;case"equals":i=A.jqx.string.equals(t,s);break;case"equalsignorecase":i=A.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=A.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=A.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=A.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=A.jqx.string.endsWithIgnoreCase(t,s)}if(i&&this.visibleIndex>=l)return r=this.visibleIndex,!1}}),r},findItems:function(s){var e=this.getItems(),l=this,n=0,r=new Array;return A.each(e,function(e){var t="";if(!this.isGroup){t=this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem";var i=!1;switch(l.searchMode){case"containsignorecase":i=A.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=A.jqx.string.contains(t,s);break;case"equals":i=A.jqx.string.equals(t,s);break;case"equalsignorecase":i=A.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=A.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=A.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=A.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=A.jqx.string.endsWithIgnoreCase(t,s)}i&&(r[n++]=this)}}),r},_syncSelection:function(){var e=this;if(e.filterable){if(e.items)for(var t=0;t<e.items.length;t++){(i=e.items[t]).selected=!1}for(t=0;t<e.visibleItems.length;t++){var i=e.visibleItems[t];e.selectedIndexes&&e.selectedIndexes[t]==i.visibleIndex&&(i.selected=!0)}e.itemswrapper&&e._renderItems()}},_handleKeyDown:function(e){var t=e.keyCode,i=this,s=i.selectedIndex,l=i.selectedIndex;if(this.keyboardNavigation&&this.enableSelection&&!(this.filterInput&&e.target==this.filterInput[0]||e.target instanceof HTMLInputElement&&A(e.target).ischildof(this.host))){function n(){(i.multiple||i.checkboxes)&&i.clearSelection(!1)}var r,a,h;if(e.altKey&&(t=-1),32==t&&this.checkboxes)return null!=(r=this.getItem(s))&&(i._updateItemCheck(r,s),e.preventDefault()),i._searchString="",i.selectIndex(r.visibleIndex,!1,!0,!0,"keyboard",e),void i._renderItems();if(i.incrementalSearch){var o=-1;i._searchString||(i._searchString=""),(8==t||46==t)&&1<=i._searchString.length&&(i._searchString=i._searchString.substr(0,i._searchString.length-1));var d,c,u=String.fromCharCode(t),m=!isNaN(parseInt(u)),v=!1;if((65<=t&&t<=97||m||8==t||32==t||46==t)&&(e.shiftKey||(u=u.toLocaleLowerCase()),d=1+i.selectedIndex,8!=t&&32!=t&&46!=t&&(0<i._searchString.length&&i._searchString.substr(0,1)==u&&(d=1+i.selectedIndex),i._searchString+=u),32==t&&(i._searchString+=" "),c=this._getMatches(i._searchString,d),(o=c)!=i._lastMatchIndex&&-1!=o||(o=c=this._getMatches(i._searchString,0)),0<=(i._lastMatchIndex=o)&&(i._toSelectTimer&&clearTimeout(i._toSelectTimer),i._toSelectTimer=setTimeout(function(){n(),i.selectIndex(o,!1,!1,!1,"keyboard",e),i.isIndexInView(o)?i._renderItems():i.ensureVisible(o)},i.incrementalSearchKeyDownDelay)),v=!0),null!=i._searchTimer&&clearTimeout(i._searchTimer),27!=t&&13!=t||(i._searchString=""),i._searchTimer=setTimeout(function(){i._searchString="",i._renderItems()},i.incrementalSearchDelay),0<=o)return;if(v)return!1}if(33==t&&(a=i._itemsInPage(),0<=i.selectedIndex-a?(n(),i.selectIndex(l-a,!1,!1,!1,"keyboard",e)):(n(),i.selectIndex(i._firstItemIndex(),!1,!1,!1,"keyboard",e)),i._searchString=""),32==t&&this.checkboxes&&(null!=(r=this.getItem(s))&&(i._updateItemCheck(r,s),e.preventDefault()),i._searchString=""),36==t&&(n(),i.selectIndex(i._firstItemIndex(),!1,!1,!1,"keyboard",e),i._searchString=""),35==t&&(n(),i.selectIndex(i._lastItemIndex(),!1,!1,!1,"keyboard",e),i._searchString=""),34==t&&(a=i._itemsInPage(),i.selectedIndex+a<i.visibleItems.length?(n(),i.selectIndex(l+a,!1,!1,!1,"keyboard",e)):(n(),i.selectIndex(i._lastItemIndex(),!1,!1,!1,"keyboard",e)),i._searchString=""),38==t){if(i._searchString="",!(0<i.selectedIndex))return!1;if((h=i._prevItemIndex(i.selectedIndex))==i.selectedIndex||-1==h)return!0;n(),i.selectIndex(h,!1,!1,!1,"keyboard",e)}else if(40==t){if(i._searchString="",!(i.selectedIndex+1<i.visibleItems.length))return!1;if((h=i._nextItemIndex(i.selectedIndex))==i.selectedIndex||-1==h)return!0;n(),i.selectIndex(h,!1,!1,!1,"keyboard",e)}return 35!=t&&36!=t&&38!=t&&40!=t&&34!=t&&33!=t?!0:(i.isIndexInView(i.selectedIndex)?i._renderItems():i.ensureVisible(i.selectedIndex),!1)}},_updateItemCheck:function(e,t){if(!this.disabled)switch(1==e.checked?e.checked=!(!e.hasThreeStates||!this.hasThreeStates)&&null:e.checked=null!=e.checked,e.checked){case!0:this.checkIndex(t);break;case!1:this.uncheckIndex(t);break;default:this.indeterminateIndex(t)}},wheel:function(e,t){if(t.autoHeight||!t.enableMouseWheel)return e.returnValue=!0;if(t.disabled)return!0;var i=0;if((e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var s=t._handleDelta(i);return s&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!s&&(s=!1,e.returnValue=s)}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){var t=this.vScrollInstance.value;return e<0?this.scrollDown():this.scrollUp(),t!=this.vScrollInstance.value},focus:function(){try{this.focused=!0,this.host.focus();var e=this;setTimeout(function(){e.host.focus()},25)}catch(e){}},_removeHandlers:function(){this.removeHandler(A(document),"keydown.listbox"+this.element.id),this.removeHandler(A(document),"keyup.listbox"+this.element.id),this.removeHandler(this.vScrollBar,"valueChanged"),this.removeHandler(this.hScrollBar,"valueChanged"),this._mousewheelfunc?this.removeHandler(this.host,"mousewheel",this._mousewheelfunc):this.removeHandler(this.host,"mousewheel"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.content,"mouseleave"),this.removeHandler(this.content,"focus"),this.removeHandler(this.content,"blur"),this.removeHandler(this.host,"focus"),this.removeHandler(this.host,"blur"),this.removeHandler(this.content,"mouseenter"),this.removeHandler(this.content,"mouseup"),this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"touchend"),this._mousemovefunc?this.removeHandler(this.content,"mousemove",this._mousemovefunc):this.removeHandler(this.content,"mousemove"),this.removeHandler(this.content,"selectstart"),this.overlayContent&&this.removeHandler(this.overlayContent,A.jqx.mobile.getTouchEventName("touchend"))},_updateSize:function(){this.virtualSize||(this._oldheight=null,this.virtualSize=this._calculateVirtualSize());var e,t=this;t._arrange(),t.host.height()==t._oldheight&&t.host.width()==t._oldwidth||(t.host.width(),t._oldwidth,t.autoItemsHeight?t._render(!1):t.items&&(0<t.items.length&&t.virtualItemsCount*t.items[0].height<t._oldheight-2?t._render(!1):(e=t.vScrollInstance.value,t._updatescrollbars(),t._renderItems(),e<t.vScrollInstance.max?t.vScrollInstance.setPosition(e):t.vScrollInstance.setPosition(t.vScrollInstance.max))),t._oldwidth=t.host.width(),t._oldheight=t.host.height())},_addHandlers:function(){var c=this,u=(this.focused=!1,new Date,this.isTouchDevice());this.addHandler(this.vScrollBar,"valueChanged",function(e){A.jqx.browser.msie&&9<A.jqx.browser.version?setTimeout(function(){c._renderItems()},1):c._renderItems()}),this.addHandler(this.hScrollBar,"valueChanged",function(){c._renderItems()}),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this._mousewheelfunc=function(e){c.wheel(e,c)},this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(A(document),"keydown.listbox"+this.element.id,function(e){c._ctrlKey=e.ctrlKey||e.metaKey,c._shiftKey=e.shiftKey}),this.addHandler(A(document),"keyup.listbox"+this.element.id,function(e){c._ctrlKey=e.ctrlKey||e.metaKey,c._shiftKey=e.shiftKey}),this.addHandler(this.host,"keydown",function(e){return c._handleKeyDown(e)}),this.addHandler(this.content,"mouseleave",function(e){c.focused=!1;var t=A.data(c.element,"hoveredItem");null!=t&&(A(t).removeClass(c.toThemeProperty("jqx-listitem-state-hover")),A(t).removeClass(c.toThemeProperty("jqx-fill-state-hover")),A.data(c.element,"hoveredItem",null))}),this.addHandler(this.content,"focus",function(e){c.disabled||(c.host.addClass(c.toThemeProperty("jqx-fill-state-focus")),c.focused=!0)}),this.addHandler(this.content,"blur",function(e){c.focused=!1,c.host.removeClass(c.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.host,"focus",function(e){c.disabled||(c.host.addClass(c.toThemeProperty("jqx-fill-state-focus")),c.focused=!0)}),this.addHandler(this.host,"blur",function(e){A.jqx.browser.msie&&A.jqx.browser.version<9&&c.focused||(c.host.removeClass(c.toThemeProperty("jqx-fill-state-focus")),c.focused=!1)}),this.addHandler(this.content,"mouseenter",function(e){c.focused=!0});var m,v=A.jqx.utilities.hasTransform(this.host),p=c.isTouchDevice()&&!0!==this.touchMode,g=p?"touchend":"mousedown";this.overlayContent?this.addHandler(this.overlayContent,A.jqx.mobile.getTouchEventName("touchend"),function(e){if(!c.enableSelection)return!0;if(p&&(c._newScroll=new Date,c._newScroll-c._lastScroll<500))return!0;var t=A.jqx.mobile.getTouches(e)[0];if(null!=t){var i=c.host.offset(),s=parseInt(t.pageX),l=parseInt(t.pageY);1==c.touchMode&&null!=t._pageX&&(s=parseInt(t._pageX),l=parseInt(t._pageY)),s-=i.left,l-=i.top;var n=c._hitTest(s,l);if(null!=n&&!n.isGroup){if(c._newScroll=new Date,c._newScroll-c._lastScroll<500)return!1;if(c.checkboxes)return void c._updateItemCheck(n,n.visibleIndex);if(-1==n.html.indexOf("href"))return c.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",e),e.preventDefault&&e.preventDefault(),c.content.trigger("click"),!1;setTimeout(function(){return c.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",e),c.content.trigger("click"),!1},100)}}}):(m=!1,this.addHandler(this.content,g,function(e){if(!c.enableSelection)return!0;if(m=!0,p&&(c._newScroll=new Date,c._newScroll-c._lastScroll<500))return!1;if(c.focused=!0,!c.isTouchDevice()&&c.focusable&&c.host.focus(),e.target.id!="listBoxContent"+c.element.id&&c.itemswrapper[0]!=e.target){var t,i,s=e.target,l=A(s).offset(),n=c.host.offset();v&&(t=A.jqx.mobile.getLeftPos(s),i=A.jqx.mobile.getTopPos(s),l.left=t,l.top=i,t=A.jqx.mobile.getLeftPos(c.element),i=A.jqx.mobile.getTopPos(c.element),n.left=t,n.top=i);var r,a=parseInt(l.top)-parseInt(n.top),h=parseInt(l.left)-parseInt(n.left),o=c._hitTest(h,a);if(null==o||o.isGroup||(r=function(e,t){c._shiftKey||(c._clickedIndex=e.visibleIndex),c.checkboxes?(h=20+t.pageX-l.left,c.rtl?("hidden"!=c.hScrollBar.css("visibility")?c.hScrollInstance.max:c.host.width(),h<=c.host.width()-20&&(c.allowDrag?setTimeout(function(){c._dragItem||m||(c._updateItemCheck(e,e.visibleIndex),c.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t))},200):(c._updateItemCheck(e,e.visibleIndex),c.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)))):20<=h+c.hScrollInstance.value&&(c.allowDrag?setTimeout(function(){c._dragItem||m||(c._updateItemCheck(e,e.visibleIndex),c.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t))},200):(c._updateItemCheck(e,e.visibleIndex),c.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)))):c.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)},o.disabled||(-1!=o.html.indexOf("href")?setTimeout(function(){r(o,e)},100):r(o,e))),"mousedown"==g){var d=!1;if(e.which?d=3==e.which:e.button&&(d=2==e.button),d)return!0}}return!0})),this.addHandler(this.content,"mouseup",function(e){c.vScrollInstance.handlemouseup(c,e),m=!1}),A.jqx.browser.msie&&this.addHandler(this.content,"selectstart",function(e){return!1});u=this.isTouchDevice();this.enableHover&&!u&&(this._mousemovefunc=function(e){if(u)return!0;if(!c.enableHover)return!0;var t,i,s,l,n,r,a,h,o,d;1==A.jqx.browser.msie&&A.jqx.browser.version;return null==e.target||(!!c.disabled||(c.focused=!0,void(c.vScrollInstance.isScrolling()||e.target.id=="listBoxContent"+c.element.id||c.itemswrapper[0]!=e.target&&(t=e.target,i=A(t).offset(),s=c.host.offset(),v&&(l=A.jqx.mobile.getLeftPos(t),n=A.jqx.mobile.getTopPos(t),i.left=l,i.top=n,l=A.jqx.mobile.getLeftPos(c.element),n=A.jqx.mobile.getTopPos(c.element),s.left=l,s.top=n),r=parseInt(i.top)-parseInt(s.top),a=parseInt(i.left)-parseInt(s.left),null==(h=c._hitTest(a,r))||h.isGroup||h.disabled||(null!=(o=A.data(c.element,"hoveredItem"))&&(A(o).removeClass(c.toThemeProperty("jqx-listitem-state-hover")),A(o).removeClass(c.toThemeProperty("jqx-fill-state-hover"))),A.data(c.element,"hoveredItem",h.element),(d=A(h.element)).addClass(c.toThemeProperty("jqx-listitem-state-hover")),d.addClass(c.toThemeProperty("jqx-fill-state-hover")))))))},this.addHandler(this.content,"mousemove",this._mousemovefunc))},_arrange:function(e){null==e&&(e=!0);var t=this,i=null,s=null,l=t.filterable?t.filterHeight:0,n=window.getComputedStyle(this.element),r=2*parseInt(n.borderLeftWidth),a=n.boxSizing;0===this.element.offsetWidth&&(r=2),"border-box"!==a&&!isNaN(r)||(r=0);function h(e){return 0==(e=t.host.height()-r)&&(e=200,t.host.height(e)),e}(null!=t.width&&-1!=t.width.toString().indexOf("px")||null!=t.width&&!isNaN(t.width))&&(i=t.width),(null!=t.height&&-1!=t.height.toString().indexOf("px")||null!=t.height&&!isNaN(t.height))&&(s=t.height),null!=t.width&&-1!=t.width.toString().indexOf("%")&&(t.host.css("width",t.width),i=t.host.width()),null!=t.height&&-1!=t.height.toString().indexOf("%")&&(t.host.css("height",t.height),s=h(s)),null!=i&&(i=parseInt(i)-r,parseInt(t.element.style.width)!=parseInt(t.width)&&(t.element.style.width=parseInt(i)+"px")),t.autoHeight?t.virtualSize&&(s="hidden"!=t.hScrollBar.css("visibility")?(t.host.height(t.virtualSize.height+parseInt(t.scrollBarSize)+3),t.height=t.virtualSize.height+parseInt(t.scrollBarSize)+3,t.height):(t.host.height(t.virtualSize.height),t.height=t.virtualSize.height,t.virtualSize.height)):null!=s&&(s=parseInt(s),parseInt(t.element.style.height)!=parseInt(t.height)&&(t.host.height(t.height),h(s)));var o=t.scrollBarSize;isNaN(o)&&(o=parseInt(o),isNaN(o)?o="17px":o+="px"),o=parseInt(o);var d,c,u,m,v,p,g,b,x,f=2,I=1;t.vScrollBar&&("hidden"!=t.vScrollBar[0].style.visibility?I=o+4:(I=0,t.vScrollInstance.setPosition(0)),0==o&&(f=I=0),t.hScrollBar&&(f="hidden"!=t.hScrollBar[0].style.visibility?o+4:(t.hScrollInstance.setPosition(0),0),t.autoItemsHeight&&(t.hScrollBar[0].style.visibility="hidden",f=0),null==s&&(s=0),(d=parseInt(s)-4-o)<0&&(d=0),parseInt(t.hScrollBar[0].style.height)!=o&&(parseInt(o)<0&&(o=0),t.hScrollBar[0].style.height=parseInt(o)+"px"),t.hScrollBar[0].style.top!=d+"px"&&(t.hScrollBar[0].style.top=d+"px",t.hScrollBar[0].style.left="0px"),(c=i-o-4)<0&&(c=0),u=c+"px",t.hScrollBar[0].style.width!=u&&(t.hScrollBar[0].style.width=u),I<=1&&2<=i&&(t.hScrollBar[0].style.width=parseInt(i-2)+"px"),o!=parseInt(t.vScrollBar[0].style.width)&&(t.vScrollBar[0].style.width=parseInt(o)+"px"),parseInt(s)-f!=parseInt(t.vScrollBar[0].style.height)&&((m=parseInt(s)-f)<0&&(m=0),t.vScrollBar[0].style.height=m+"px"),null==i&&(i=0),v=parseInt(i)-parseInt(o)-4+"px","border-box"===this.host.css("box-sizing")&&(v=parseInt(v)-2+"px"),v!=t.vScrollBar[0].style.left&&(0<=parseInt(v)&&(t.vScrollBar[0].style.left=v),t.vScrollBar[0].style.top="0px"),(p=t.vScrollInstance).disabled=t.disabled,e&&p._arrange(),(g=t.hScrollInstance).disabled=t.disabled,e&&g._arrange(),"hidden"!=t.vScrollBar[0].style.visibility&&"hidden"!=t.hScrollBar[0].style.visibility?(t.bottomRight[0].style.visibility="inherit",t.bottomRight[0].style.left=1+parseInt(t.vScrollBar[0].style.left)+"px",t.bottomRight[0].style.top=1+parseInt(t.hScrollBar[0].style.top)+"px",t.rtl&&t.bottomRight.css({left:0}),t.bottomRight[0].style.width=parseInt(o)+3+"px",t.bottomRight[0].style.height=parseInt(o)+3+"px"):t.bottomRight[0].style.visibility="hidden",parseInt(t.content[0].style.width)!=parseInt(i)-I&&((b=parseInt(i)-I)<0&&(b=0),t.content[0].style.width=b+"px"),t.rtl&&(t.vScrollBar.css({left:"0px",top:"0px"}),t.hScrollBar.css({left:t.vScrollBar.width()+2+"px"}),"hidden"!=t.vScrollBar[0].style.visibility?t.content.css("margin-left",4+t.vScrollBar.width()):(t.content.css("margin-left",0),t.hScrollBar.css({left:"0px"})),t.filterable&&t.filterInput&&t.filterInput.css({left:t.vScrollBar.width()+6+"px"})),parseInt(t.content[0].style.height)!=parseInt(s)-f&&((x=parseInt(s)-f)<0&&(x=0),t.content[0].style.height=x+"px",t.content[0].style.top="0px"),0<l&&(t.content[0].style.top=l+"px",t.content[0].style.height=parseInt(t.content[0].style.height)-l+"px"),t.filterable?(t.filterInput[0].style.height=l-6+"px",t.filterInput[0].style.top="3px",t.rtl||(t.filterInput[0].style.left=parseInt(t.content.css("left"))+3+"px"),t.filterInput[0].style.width=parseInt(t.content.css("width"))-7+"px",t.filter[0].style.display="block"):t.filter[0].style.display="none",t.overlayContent&&(t.overlayContent.width(parseInt(i)-I),t.overlayContent.height(parseInt(s)-f))))},ensureVisible:function(e,t){if(isNaN(e)&&(i=this.getItemByValue(e))&&(e=i.index),this.isIndexInView(e)){if(t)for(s=0;s<this.visibleItems.length;s++){(i=this.visibleItems[s]).visibleIndex!=e||i.isGroup||(a=this.vScrollInstance.value,r=i.initialTop,this.filterable&&(r=this.filterHeight+2+i.initialTop),a+this.host.height()<this.vScrollInstance.max&&this.vScrollInstance.setPosition(r))}}else{if(e<0)return;if(this.autoHeight)(l=A.data(this.vScrollBar[0],"jqxScrollBar").instance).setPosition(0);else for(var i,s=0;s<this.visibleItems.length;s++){if((i=this.visibleItems[s]).visibleIndex==e&&!i.isGroup){var l,n,r,a=(l=A.data(this.vScrollBar[0],"jqxScrollBar").instance).value,h=this.filterable?this.filterHeight+2:0,o="hidden"===this.hScrollBar.css("visibility")?0:this.scrollBarSize+4;i.initialTop<a?(l.setPosition(i.initialTop),0==s&&l.setPosition(0)):i.initialTop+i.height>a+this.host.height()-h&&(n=this.host.height(),this.filterable?l.setPosition(this.filterHeight+2+i.initialTop+i.height+2-n+o):(l.setPosition(i.initialTop+i.height+2-n+o),s===this.visibleItems.length-1&&l.setPosition(l.max)),t&&(a=l.value,r=i.initialTop,this.filterable&&(r=this.filterHeight+2+i.initialTop),a+n<l.max&&l.setPosition(r)));break}}}this._renderItems()},scrollTo:function(e,t){"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollInstance.setPosition(t),"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollInstance.setPosition(e)},scrollDown:function(){if("hidden"==this.vScrollBar.css("visibility"))return!1;var e=this.vScrollInstance;return e.value+e.largestep<=e.max?e.setPosition(e.value+e.largestep):e.setPosition(e.max),!0},scrollUp:function(){if("hidden"==this.vScrollBar.css("visibility"))return!1;var e=this.vScrollInstance;return e.value-e.largestep>=e.min?(e.setPosition(e.value-e.largestep),!0):e.value!=e.min&&(e.setPosition(e.min),!0)},databind:function(e,t){this.records=new Array;var i=!!e._source,a=new A.jqx.dataAdapter(e,{autoBind:!1});i&&(e=(a=e)._source);function s(c,s){function l(e){var t=null;"string"==typeof e?(s=i=e,l=""):null!=c.displayMember&&""!=c.displayMember&&(s=e[c.valueMember],i=e[c.displayMember]);var i,s,l="";c.groupMember?l=e[c.groupMember]:e&&null!=e.group&&(l=e.group),c.searchMember?t=e[c.searchMember]:e&&null!=e.searchLabel&&(t=e.searchLabel),c.valueMember||c.displayMember||"string"==A.type(e)&&(i=s=e.toString()),e&&null!=e.label&&(i=e.label),e&&null!=e.value&&(s=e.value);var n=!1;e&&null!=e.checked&&(n=e.checked);var r="";e&&null!=e.html&&(r=e.html);var a=!0;e&&null!=e.visible&&(a=e.visible);var h=!1;e&&null!=e.disabled&&(h=e.disabled);var o=!1;e&&null!=e.hasThreeStates&&(o=e.hasThreeStates);var d={};return d.label=i,d.value=s,d.searchLabel=t,d.html=r,d.visible=a,d.originalItem=e,d.group=l,d.groupHtml="",d.disabled=h,d.checked=n,d.hasThreeStates=o,d}if(null!=s&&a._changedrecords[0])A.each(a._changedrecords,function(){var e,t=this.index,i=this.record;switch("remove"!=s&&(e=l(i)),s){case"update":c.updateAt(e,t);break;case"add":c.insertAt(e,t);break;case"remove":c.removeAt(t)}});else{c.records=a.records;for(var e=c.records.length,t=new Array,i=0;i<e;i++){var n=c.records[i],r=l(n);t[r.index=i]=r}c.items=c.loadItems(t,!0),c._render(),c._raiseEvent("6")}}null!=e.type&&(a._options.type=e.type),null!=e.formatdata&&(a._options.formatData=e.formatdata),null!=e.contenttype&&(a._options.contentType=e.contenttype),null!=e.async&&(a._options.async=e.async);var l=this;switch(e.datatype){case"local":case"array":default:null==e.localdata&&!A.isArray(e)||(a.unbindBindingUpdate(this.element.id),!this.autoBind&&(this.autoBind||t)||a.dataBind(),s(this),a.bindBindingUpdate(this.element.id,function(e){s(l,e)}));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=e.localdata)return a.unbindBindingUpdate(this.element.id),!this.autoBind&&(this.autoBind||t)||a.dataBind(),s(this),void a.bindBindingUpdate(this.element.id,function(){s(l)});var n={};a._options.data?A.extend(a._options.data,n):(e.data&&A.extend(n,e.data),a._options.data=n);a.unbindDownloadComplete(l.element.id),a.bindDownloadComplete(l.element.id,function(){s(l)}),!this.autoBind&&(this.autoBind||t)||a.dataBind()}},loadItems:function(e,h){if(null==e)return this.groups=new Array,this.items=new Array,void(this.visualItems=new Array);var o=this,d=0,c=0,u=0;this.groups=new Array,this.items=new Array,this.visualItems=new Array;var m=new Array;this.itemsByValue=new Array,A.map(e,function(e){if(null==e)return null;var t,i=new A.jqx._jqxListBox.item,s=e.group,l=e.groupHtml,n=e.title,r=null;o.searchMember?r=e[o.searchMember]:e&&null!=e.searchLabel&&(r=e.searchLabel),null!=n&&null!=n||(n=""),null!=s&&null!=s||(s=""),o.groupMember&&(s=e[o.groupMember]),null!=l&&null!=l||(l=""),o.groups[s]||(o.groups[s]={items:new Array,index:-1,caption:s,captionHtml:l},t=++d+"jqxGroup",o.groups[t]=o.groups[s],c++,o.groups.length=c);var a=o.groups[s];return a.index++,a.items[a.index]=i,"string"==typeof e?(i.label=e,i.value=e,1<arguments.length&&arguments[1]&&"string"==A.type(arguments[1])&&(i.label=e,i.value=arguments[1])):null==e.label&&null==e.value&&null==e.html&&null==e.group&&null==e.groupHtml?(i.label=e.toString(),i.value=e.toString()):(i.label=e.label,i.value=e.value,void 0===i.label&&(i.label=e.value),void 0===i.value&&(i.value=e.label)),"string"!=typeof e&&(void 0===e.label&&""!=o.displayMember&&(null!=e[o.displayMember]?i.label=e[o.displayMember]:i.label=""),void 0===e.value&&""!=o.valueMember&&(i.value=e[o.valueMember])),i.hasThreeStates=null==e.hasThreeStates||e.hasThreeStates,i.originalItem=e,h&&(i.originalItem=e.originalItem),(i.title=n)&&void 0===i.value&&void 0===i.label&&(i.value=i.label=n),i.html=e.html||"",e.html&&e.html,i.label,i.group=s,i.checked=e.checked||!1,i.groupHtml=e.groupHtml||"",i.disabled=e.disabled||!1,i.visible=null==e.visible||e.visible,i.searchLabel=r,i.index=u,m[u]=i,u++,i});var i=new Array,s=0;if(null==this.fromSelect||0==this.fromSelect)for(var t=0;t<c;t++){var l=(d=t+1)+"jqxGroup",n=this.groups[l];if(null==n||null==n)break;if(0==t&&""==n.caption&&""==n.captionHtml&&c<=1){for(var r=0;r<n.items.length;r++){var a=n.items[r].value;null!=n.items[r].value&&null!=n.items[r].value||(a=r),this.itemsByValue[A.trim(a).split(" ").join("?")]=n.items[r]}return n.items}var v=new A.jqx._jqxListBox.item;v.isGroup=!0,v.label=n.caption,""==n.caption&&""==n.captionHtml&&(n.caption=this.emptyGroupText,v.label=n.caption),v.html=n.captionHtml,i[s]=v,s++;for(var p=0;p<n.items.length;p++){i[s]=n.items[p];a=n.items[p].value;""!=n.items[p].value&&null!=n.items[p].value||(a=s),o.itemsByValue[A.trim(a).split(" ").join("?")]=n.items[p],s++}}else{var s=0,g=new Array;A.each(m,function(){var e;g[this.group]||""!=this.group&&((e=new A.jqx._jqxListBox.item).isGroup=!0,e.label=this.group,i[s]=e,s++,g[this.group]=!0);var t=(i[s]=this).value;""!=this.value&&null!=this.value||(t=s-1),o.itemsByValue[A.trim(t).split(" ").join("?")]=this,s++})}return i},_mapItem:function(e){var t=new A.jqx._jqxListBox.item;return this.displayMember&&(null==e.label&&(e.label=e[this.displayMember]),null==e.value&&(e.value=e[this.valueMember])),"string"==typeof e?(t.label=e,t.value=e):"number"==typeof e?(t.label=e.toString(),t.value=e.toString()):(t.label=void 0!==e.label?e.label:e.value,t.value=void 0!==e.value?e.value:e.label),null==t.label&&null==t.value&&null==t.html&&(t.label=t.value=e),t.html=e.html||"",t.group=e.group||"",t.checked=e.checked||!1,t.title=e.title||"",t.groupHtml=e.groupHtml||"",t.disabled=e.disabled||!1,t.visible=e.visible||!0,t},addItem:function(e){return this.insertAt(e,this.items?this.items.length:0)},_getItemByParam:function(e){var t;return null!=e&&(null!=e.index||(t=this.getItemByValue(e))&&(e=t)),e},insertItem:function(e,t){var i=this._getItemByParam(e);return this.insertAt(i,t)},updateItem:function(e,t){var i=this._getItemByParam(t);return!(!i||null==i.index)&&this.updateAt(e,i.index)},updateAt:function(e,t){var i;null!=e&&(i=this._mapItem(e),this.itemsByValue[A.trim(i.value).split(" ").join("?")]=this.items[t],this.items[t].value=i.value,this.items[t].label=i.label,this.items[t].html=i.html,this.items[t].disabled=i.disabled,this._raiseEvent("9",{item:this.items[t]})),this._cachedItemHtml=[],this._renderItems(),this.rendered&&this.rendered()},insertAt:function(e,t){if(null==e)return!1;if(this._cachedItemHtml=[],null==this.items||0==this.items.length){this.source=new Array,this.refresh(),(s=this._mapItem(e)).index=0,this.items[this.items.length]=s,this._addItems(!0),this._renderItems(),this.rendered&&this.rendered(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop();var i=s.value;return""!=s.value&&null!=s.value||(i=t),this.itemsByValue[A.trim(i).split(" ").join("?")]=s,!1}var s=this._mapItem(e);if(-1==t||null==t||null==t||t>=this.items.length)s.index=this.items.length,this.items[this.items.length]=s;else{for(var l=new Array,n=0,r=!1,a=0,h=0;h<this.items.length;h++)0==this.items[h].isGroup&&t<=a&&!r&&((l[n++]=s).index=t,a++,r=!0),l[n]=this.items[h],this.items[h].isGroup||(l[n].index=a,a++),n++;this.items=l}i=s.value;""!=s.value&&null!=s.value||(i=t),this.itemsByValue[A.trim(i).split(" ").join("?")]=s,this.visibleItems=new Array,this.renderedVisibleItems=new Array;var o=A.data(this.vScrollBar[0],"jqxScrollBar").instance,d=o.value;return o.setPosition(0),this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this.groups.length,this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),o.setPosition(d),this._raiseEvent("7",{item:s}),this.rendered&&this.rendered(),!0},removeAt:function(e){if(e<0||e>this.items.length-1)return!1;if(null==e)return!1;var t=this.items[e].height;""!=(u=this.items[e].value)&&null!=u||(u=e),this.itemsByValue[A.trim(u).split(" ").join("?")]=null;var i=this.items[e];if(1<this.groups.length){for(var s=new Array,l=0;l<this.items.length;l++)this.items[l].isGroup||s.push({item:this.items[l],key:l});if(!s[e])return!1;this.items.splice(s[e].key,1)}else this.items.splice(e,1);for(var n=new Array,r=0,a=0,l=0;l<this.items.length;l++)n[r]=this.items[l],this.items[l].isGroup||(n[r].index=a,a++),r++;this.items=n;var h,o=A.data(this.vScrollBar[0],"jqxScrollBar").instance,d=(o=A.data(this.vScrollBar[0],"jqxScrollBar").instance).value;o.setPosition(0),this.visibleItems=new Array,this.renderedVisibleItems=new Array,0<this.items.length?(this.virtualSize&&(this.virtualSize.height-=t,h=2*this.virtualSize.itemsPerPage,this.autoHeight&&(h=this.items.length),this.virtualItemsCount=Math.min(h,this.items.length)),this._updatescrollbars()):this._addItems(),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),"hidden"!=this.vScrollBar.css("visibility")?o.setPosition(d):o.setPosition(0),this.itemsByValue=new Array;for(var c=0;c<this.items.length;c++){var u=this.items[c].value;""!=this.items[c].value&&null!=this.items[c].value||(u=c),this.itemsByValue[A.trim(u).split(" ").join("?")]=this.items[c]}return this._raiseEvent("8",{item:i}),0===this.items.length&&(this.selectedIndex=-1,this.selectedValue=null,this._updateInputSelection()),this.rendered&&this.rendered(),!0},removeItem:function(e,t){var i=this._getItemByParam(e),s=-1;if(i&&null!=i.index&&!0!==t){for(var l=0;l<this.items.length;l++)if(this.items[l].label==i.label&&this.items[l].value==i.value){s=l;break}if(-1!=s)return this.removeAt(s)}if(-1==s)return this.removeAt(i.index)},getItems:function(){return this.items},disableItem:function(e){var t=this._getItemByParam(e);this.disableAt(t.index)},enableItem:function(e){var t=this._getItemByParam(e);this.enableAt(t.index)},disableAt:function(e){return!!this.items&&(!(e<0||e>this.items.length-1)&&(this.items[e].disabled=!0,this._renderItems(),!0))},enableAt:function(e){return!!this.items&&(!(e<0||e>this.items.length-1)&&(this.items[e].disabled=!1,this._renderItems(),!0))},destroy:function(){this.source&&this.source.unbindBindingUpdate&&this.source.unbindBindingUpdate(this.element.id),this._removeHandlers(),this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar.remove(),this.hScrollBar.remove(),this.content.remove(),A.jqx.utilities.resize(this.host,null,!0);var e=A.data(this.element,"jqxListBox");delete this.hScrollInstance,delete this.vScrollInstance,delete this.vScrollBar,delete this.hScrollBar,delete this.content,delete this.bottomRight,delete this.itemswrapper,delete this.visualItems,delete this.visibleItems,delete this.items,delete this.groups,delete this.renderedVisibleItems,delete this._mousewheelfunc,delete this._mousemovefunc,delete this._cachedItemHtml,delete this.itemsByValue,delete this._activeElement,delete this.source,delete this.events,this.input&&(this.input.remove(),delete this.input),e&&delete e.instance,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.element=null,delete this.element,this.host=null,delete this.set,delete this.get,delete this.call,delete this.host},_raiseEvent:function(e,t){if(1==this._stopEvents)return!0;null==t&&(t={owner:null});var i=this.events[e],s=t;(s.owner=this)._updateInputSelection();var l,n=new A.Event(i);return n.owner=this,n.args=s,null!=this.host&&(l=this.host.trigger(n)),l}})}(jqxBaseFramework),function(w){w.jqx.parseSourceTag=function(e){var l=new Array,t=w(e).find("option"),n=w(e).find("optgroup"),r=!1;if(0===t.length&&0<(t=w(e).find("li")).length&&(r=!0),0===t.length){var i=[],s=w(e).find("tr"),a=w(e).find("th"),h=0;0===a.length&&0<s.length&&(a=w(s[0]).find("td"),h=1);for(var o=[],d=[],i=[],c=0;c<s.length;c++){var u=s[c],m={};c===h+1&&(d=[]);for(var v=0;v<a.length;v++){var p,g,b=w.trim(w(a[v]).text()),x=w(u).find("td:eq("+v+")");m[b]=w.trim(x.text()),c===h&&(o.push({text:b,dataField:b}),d.push({name:b})),c===h+1&&(g="","string"===(p=typeof m[b])&&("true"===m[b]||"false"===m[b]?p="bool":isNaN(parseFloat(m[b]))||-1!==m[b].indexOf("-")||-1!==m[b].indexOf("/")?0<=m[b].indexOf("$")||0<=m[b].indexOf("%")?(p="number",0<=m[b].indexOf("$")&&(g="c"),0<=m[b].indexOf("%")&&(g="p"),m[b]=m[b].replace("%","").replace("$","")):"Invalid Date"!==new Date(m[b]).toString()&&(p="date",g="d"):(p="number",g=0<=m[b].indexOf(".")?"f":"n")),o[v].cellsformat=g,"number"===p&&(o[v].cellsalign="right",o[v].align="right"),d.push({name:b,type:p}))}1<=c&&(i[i.length]=m)}var f={localdata:i,datatype:"array",datafields:d};return{source:new w.jqx.dataAdapter(f),columns:o}}var I=null,I=-1,y=new Array;if(w.each(t,function(e){var t=0<n.find(this).length,i=null;null==this.text||null!=this.label&&""!=this.label||(this.label=this.text),!0===r&&(this.label=w(this).text().trim(),this.selected=w(this).attr("data-selected"),this.checked=this.selected,this.value=w(this).attr("data-value")||e,this.disabled=w(this).attr("disabled"));var s={style:this.style.cssText,selected:this.selected,html:this.innerHTML.trim(),classes:this.className,disabled:this.disabled,value:this.value,label:this.label,title:this.title,originalItem:this};w.jqx.browser.msie&&w.jqx.browser.version<8&&!r&&""==s.value&&null!=this.text&&0<this.text.length&&(s.value=this.text),t&&(i=n.find(this).parent()[0].label,s.group=i,y[i]||(y[i]=new Array,y.length++),y[i].push(s)),this.selected&&(I=e),s.checked=this.selected,void 0!==s.label&&l.push(s)}),0<y.length){var S=new Array;for(var _ in y)if("indexOf"!==_){for(c=0;c<n.length;c++)if(_===n[c].label||n[c].text){n[c];break}w.each(y[_],function(e,t){void 0!==this.label&&S.push(this)})}}return S&&0<S.length?{items:S,index:I}:{items:l,index:I}},w.jqx._jqxListBox.item=function(){return{group:"",groupHtml:"",selected:!1,isGroup:!1,highlighted:!1,value:null,label:"",html:null,visible:!0,disabled:!1,element:null,width:null,height:null,initialTop:null,top:null,left:null,title:"",index:-1,checkBoxElement:null,originalItem:null,checked:!1,visibleIndex:-1}}}(jqxBaseFramework);