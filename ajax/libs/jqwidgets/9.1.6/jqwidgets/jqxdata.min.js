!function(P){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var a=arguments[1],n=0;n<r;){var i=t[n];if(e.call(a,i,n,t))return i;n++}},configurable:!0,writable:!0}),P.jqx.observableArray=function(e,t){var a;"string"==typeof e&&(e=P.parseJSON(e)),Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),1}catch(e){return}}()||(a=Object.defineProperty,Object.defineProperty=function(e,t,r){if(a)try{return a(e,t,r)}catch(e){}if(e!==Object(e))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in r&&Object.prototype.__defineGetter__.call(e,t,r.get),Object.prototype.__defineSetter__&&"set"in r&&Object.prototype.__defineSetter__.call(e,t,r.set),"value"in r?e[t]=r.value:e[t]||(e[t]=r),e}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(null==this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();for(var a=arguments[1],n=0;n<r;n++)n in t&&e.call(a,t[n],n,t)}),"function"!=typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(e){if(e!==Object(e))throw TypeError("Object.getOwnPropertyNames called on non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r});var d,u=this,c=[];u.notifier=null,u.name="observableArray",u.observing=!0,u.changes=new Array;t=t;return u.observe=function(){u.observing=!0,1==arguments.length&&(t=arguments[0])},u.unobserve=function(){u.observing=!1},u.toArray=function(){return c.slice(0)},u.toJSON=function(n,e){var t=c;e&&(t=e);var r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function i(e){return'"'+e.replace(r,function(e){var t=a[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'}function s(e){return e<10?"0"+e:e}function o(e){switch(Object.prototype.toString.call(e)){case"[object Date]":return t=e,isFinite(t.valueOf())?t.getUTCFullYear()+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+'Z"':"null";case"[object Array]":return function(e){for(var t=e.length,r=[],a=0;a<t;a++)r.push(l(a,e)||"null");return"["+r.join(",")+"]"}(e)}var t;return function(e){var t,r,a=[];for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(""!=t&&n&&-1===n.indexOf(t))continue;(r=l(t,e))&&a.push(i(t)+":"+r)}return"{"+a.join(",")+"}"}(e)}function l(e,t){var r=t[e],a=typeof r;return r&&"object"==typeof r&&"function"==typeof r.toJSON&&(a=typeof(r=r.toJSON(e))),/(number|float|int|integer|string|boolean)/.test(a)||!r&&"object"===a?function(e,t){switch(t){case"string":return i(e);case"number":case"float":case"integer":case"int":return isFinite(e)?e:"null";case"boolean":return e}return"null"}(r,a):o(r)}return!n&&window.JSON&&"function"==typeof window.JSON.stringify?window.JSON.stringify(t):l("",{"":t})},u.defineIndexProperty=function(r){var i,s;r in u||(i=function(e,s,t,a){function r(){return l}function n(e){var t,r,n,i;return l!==(o=e)&&(t=l,l=o,"function"==typeof d&&(r=c.indexOf(a),n="",(i=function(r,a){Object.getOwnPropertyNames(r).forEach(function(e){var t=P.type(r[e]);"array"==t||"object"==t?i(r[e],a+"."+e):s===e&&(n=a+"."+e)})})(a,r),d({object:u,type:"update",path:n,index:r,name:s,newValue:o,oldValue:t}))),l=o}var o=e[s],l=o;null!=e[s]&&"length"!=s&&(Object.defineProperty?Object.defineProperty(e,s,{get:r,set:n}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(e,s,r),Object.prototype.__defineSetter__.call(e,s,n)))},s=function(r,a,n){var e=P.type(r);/(number|float|int|integer|string|boolean)/.test(e)||void 0!==r&&Object.getOwnPropertyNames(r).forEach(function(e){var t=P.type(r[e]);"array"==t||"object"==t?(i(r,e,0,n),s(r[e],a+"."+e,n)):i(r,e,0,n)})},Object.defineProperty(u,r,{configurable:!0,enumerable:!0,get:function(){return c[r]},set:function(e){var t=c[r];u.toJSON(null,t)!=u.toJSON(null,e)&&(c[r]=e,"function"==typeof d&&d({object:u,type:"update",path:r.toString(),index:r,name:"index",newValue:e,oldValue:t}),s(e,r,e))}}),s(u[r],r,u[r]))},u.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=c.length,c.push(arguments[t]),u.defineIndexProperty(e),"function"==typeof d&&d({object:u,type:"add",name:"length",index:e,newValue:c.length,oldValue:e});return c.length},u.pop=function(){if(~c.length){var e=c.length-1,t=c.pop();return delete u[e],"function"==typeof d&&d({object:u,type:"delete",name:"length",index:e,newValue:c.length,oldValue:e}),t}},u.unshift=function(){for(var e=c.length,t=0,r=arguments.length;t<r;t++)c.splice(t,0,arguments[t]),u.defineIndexProperty(c.length-1);return"function"==typeof d&&d({object:u,type:"add",index:0,name:"length",newValue:c.length,oldValue:e}),c.length},u.shift=function(){var e=c.length;if(~c.length){var t=c.shift();return 0===c.length&&delete u[e],"function"==typeof d&&d({object:u,type:"delete",index:e,name:"length",newValue:c.length,oldValue:e}),t}},u.slice=function(e,t,r){var a=c.slice(e,t);return new P.jqx.observableArray(a,r)},u.splice=function(e,t,r){var a,n=[];for(e=~e?e:c.length-e,t=(null==t?c.length-e:t)||0;t--;)a=c.splice(e,1)[0],n.push(a),delete u[c.length],"function"==typeof d&&d({object:u,type:"delete",index:e,name:"length",newValue:-1,oldValue:e});for(var i=2,s=arguments.length;i<s;i++)c.splice(e,0,arguments[i]),this.defineIndexProperty(c.length-1),"function"==typeof d&&d({object:u,type:"add",index:e,name:"length",newValue:c.length-1,oldValue:e}),e++;return new P.jqx.observableArray(n,r)},Object.defineProperty(u,"length",{configurable:!1,enumerable:!0,get:function(){return c.length},set:function(e){var t=Number(e);if(!(t%1==0&&0<=t))throw new RangeError("Invalid array length");return t<c.length?u.splice(t):t>c.length&&u.push.apply(u,new Array(t-c.length)),e}}),P.jqx.observableArray.prototype.fromArray=function(e,t){return new P.jqx.observableArray(e,t)},P.jqx.observableArray.prototype.clone=function(){var e=new P.jqx.observableArray(c,t);return e.observing=u.observing,e.changes=u.changes,e.notifier=u.notifier,e},u.remove=function(e){if(e<0||e>=u.length)throw new Error("Invalid index : "+e);if(u.hasOwnProperty(e)){var t=u[e];return u[e]=void 0,c[e]=void 0,"function"==typeof d&&d({object:u,type:"delete",index:e,name:"index",newValue:void 0,oldValue:t}),!0}return!1},u.concat=function(e,t){var r=c.concat(e);return new P.jqx.observableArray(r,t)},Object.getOwnPropertyNames(Array.prototype).forEach(function(r){r in u||Object.defineProperty(u,r,{configurable:!1,enumerable:!0,writeable:!1,value:function(){var e=u.observing;u.observing=!1;var t=c[r].apply(c,arguments);return u.observing=e,t}})}),u.set=function(e,t){if("string"==P.type(e)&&1<e.split(".").length){for(var r=e.split("."),a=u,n=0;n<r.length;n++){if(0===n&&r[n]>=u.length)throw new Error("Invalid Index: "+e);n<r.length-1?a=a[r[n]]:a[r[n]]=t}return!0}return e>=u.length?u.push(t):u[e]=t,!0},u.get=function(e){return u[e]},e instanceof Array&&u.push.apply(u,e),d=function(){u.observing&&(arguments&&arguments[0]&&u.changes.push(arguments[0]),t&&t.apply(u,arguments),u.notifier&&u.notifier.apply(u,arguments))},u},P.jqx.formatDate=function(e,t,r){return P.jqx.dataFormat.formatdate(e,t,r)},P.jqx.formatNumber=function(e,t,r){return P.jqx.dataFormat.formatnumber(e,t,r)},P.jqx.dataAdapter=function(r,e){var t,a;null!=r&&(void 0!==r.dataFields&&(r.datafields=r.dataFields),void 0!==r.dataType&&(r.datatype=r.dataType),void 0!==r.localData&&(r.localdata=r.localData),void 0!==r.sortColumn&&(r.sortcolumn=r.sortColumn),void 0!==r.sortDirection&&(r.sortdirection=r.sortDirection),void 0!==r.sortColumns&&(r.sortcolumns=r.sortColumns),void 0!==r.sortDirections&&(r.sortdirections=r.sortDirections),void 0!==r.sortOrder&&(r.sortdirection=r.sortOrder),void 0!==r.formatData&&(r.formatdata=r.formatData),void 0!==r.processData&&(r.processdata=r.processData),void 0!==r.pageSize&&(r.pagesize=r.pageSize),void 0!==r.pageNum&&(r.pagenum=r.pageNum),void 0!==r.updateRow&&(r.updaterow=r.updateRow),void 0!==r.addRow&&(r.addrow=r.addRow),void 0!==r.deleteRow&&(r.deleterow=r.deleteRow),void 0!==r.contentType&&(r.contenttype=r.contentType),null!=r.totalRecords&&(r.totalrecords=r.totalRecords),null!=r.loadError&&(r.loadError=r.loadError),null!=r.sortComparer&&(r.sortcomparer=r.sortComparer)),this._source=r,this._options=e||{},null!=r.beforeLoadComplete&&(this._options.beforeLoadComplete=this._source.beforeLoadComplete),null!=r.downloadComplete&&(this._options.downloadComplete=this._source.downloadComplete),null!=r.loadComplete&&(this._options.loadComplete=this._source.loadComplete),null!=r.autoBind&&(this._options.downloadComplete=this._source.autoBind),null!=r.formatData&&(this._options.formatData=this._source.formatData),null!=r.loadError&&(this._options.loadError=this._source.loadError),null!=r.beforeSend&&(this._options.beforeSend=this._source.beforeSend),null!=r.contentType&&(this._options.contentType=this._source.contentType),null!=r.async&&(this._options.async=this._source.async),null!=r.loadServerData&&(this._options.loadServerData=this._source.loadServerData),null!=r.uniqueDataFields&&(this._options.uniqueDataFields=this._source.uniqueDataFields),this.records=new Array,this._downloadComplete=new Array,this._bindingUpdate=new Array,null==r||null==r.localdata||"function"!=typeof r.localdata||null!=(t=r.localdata())&&(r._localdata=r.localdata,a=this,r._localdata.subscribe&&(a._oldlocaldata=[],r._localdata.subscribe(function(e){var t=function(e){return P.isArray(e)?P.makeArray(t(P(e))):P.extend(!0,{},e)};0!=a.suspendKO&&null!=a.suspendKO&&0!=a._oldlocaldata.length||(a._oldlocaldata=t(e))},r._localdata,"beforeChange"),r._localdata.subscribe(function(e){var t;0!=a.suspendKO&&null!=a.suspendKO||(t="",a._oldrecords=a.records,0==a._oldlocaldata.length&&(r.localdata=r._localdata()),0==a._oldlocaldata.length?t="change":e&&(a._oldlocaldata.length==e.length&&(t="update"),a._oldlocaldata.length>e.length&&(t="remove"),a._oldlocaldata.length<e.length&&(t="add")),a.dataBind(null,t))},r._localdata,"change"),a._knockoutdatasource=!0),r.localdata=t),1==this._options.autoBind&&this.dataBind()},P.jqx.dataAdapter.prototype={getrecords:function(){return this.records},beginUpdate:function(){this.isUpdating=!0},endUpdate:function(e){this.isUpdating=!1,0!=e&&(this._changedrecords&&0<this._changedrecords.length?(this.callBindingUpdate("update"),this._changedrecords=[]):this.dataBind(null,""))},formatDate:function(e,t,r){return P.jqx.dataFormat.formatdate(e,t,r)},formatNumber:function(e,t,r){return P.jqx.dataFormat.formatnumber(e,t,r)},dataBind:function(e,n){if(1!=this.isUpdating){var v=this._source;if(v){v.generatedfields&&(v.datafields=null,v.generatedfields=null),P.jqx.dataFormat.datescache=new Array,null!=v.dataFields&&(v.datafields=v.dataFields),null==v.recordstartindex&&(v.recordstartindex=0),null==v.recordendindex&&(v.recordendindex=0),null==v.loadallrecords&&(v.loadallrecords=!0),null==v.root&&(v.root=""),null==v.record&&(v.record=""),null!=v.sort&&(this.sort=v.sort),null!=v.filter?this.filter=v.filter:this.filter=null,null!=v.sortcolumn&&(this.sortcolumn=v.sortcolumn),null!=v.sortdirection&&(this.sortdirection=v.sortdirection),null!=v.sortcolumns&&(this.sortcolumns=v.sortcolumns),null!=v.sortdirections&&(this.sortdirections=v.sortdirections),null!=v.sortcomparer&&(this.sortcomparer=v.sortcomparer),this.records=new Array;var o=this._options||{};if(this.virtualmode=null!=o.virtualmode&&o.virtualmode,this.totalrecords=null!=o.totalrecords?o.totalrecords:0,this.pageable=null!=o.pageable&&o.pageable,this.pagesize=null!=o.pagesize?o.pagesize:0,this.pagenum=null!=o.pagenum?o.pagenum:0,this.cachedrecords=null!=o.cachedrecords?o.cachedrecords:new Array,this.originaldata=new Array,this.recordids=new Array,this.updaterow=null!=o.updaterow?o.updaterow:null,this.addrow=null!=o.addrow?o.addrow:null,this.deleterow=null!=o.deleterow?o.deleterow:null,this.cache=null!=o.cache&&o.cache,this.unboundmode=!1,null!=v.formatdata&&(o.formatData=v.formatdata),null!=v.data&&(null==o.data&&(o.data={}),P.extend(o.data,v.data)),null!=v.mapChar&&(v.mapchar=v.mapChar),null!=v.mapchar?this.mapChar=v.mapchar?v.mapchar:">":this.mapChar=o.mapChar?o.mapChar:">",(o.unboundmode||v.unboundmode)&&(this.unboundmode=o.unboundmode||v.unboundmode),null!=v.cache&&(this.cache=v.cache),this.koSubscriptions)for(var t=0;t<this.koSubscriptions.length;t++)this.koSubscriptions[t].dispose();this.koSubscriptions=new Array,this.pagenum<0&&(this.pagenum=0);var x=this,l=v.datatype;"csv"!==v.datatype&&"tab"!==v.datatype&&"tsv"!==v.datatype&&"text"!=v.datatype||(l="text");var r=null==o.async||o.async;switch(null!=v.async&&(r=v.async),l){case"local":case"array":case"observablearray":case"observableArray":default:if(null==v.localdata&&v.length){v.localdata=new Array;for(var a=0;a<v.length;a++)v.localdata[v.localdata.length]=v[a],v[a].uid=a}v.beforeprocessing&&P.isFunction(v.beforeprocessing)&&v.beforeprocessing(v.localdata);var i=v.localdata.length;if(this.totalrecords=this.virtualmode&&v.totalrecords||i,this.unboundmode)if(this.totalrecords=this.unboundmode&&v.totalrecords||i,0<(b=v.datafields?v.datafields.length:0))for(a=0;a<this.totalrecords;a++){for(var s={},d=0;d<b;d++)s[v.datafields[d].name]="";s.uid=a,v.localdata[v.localdata.length]=s}null==this.totalrecords&&(this.totalrecords=0);function u(e,t){for(var r={},a=0;a<t;a++){var n=v.datafields?v.datafields[a]:{},i="";if(null!=n&&null!=n){if(n.map){if(P.isFunction(n.map))i=n.map(e);else{var s=n.map.split(x.mapChar);if(0<s.length){for(var o=e,l=0;l<s.length;l++)o=o&&o[s[l]];i=o}else i=e[n.map]}null!=i&&null!=i?i=i.toString():null==i&&null!=i&&(i="")}var d=!1;""==i&&(d=!0,null!=(i=e[n.name])&&null!=i&&(v._localdata&&i.subscribe?i=i():"array"!=n.type&&("date"===n.type?i&&i instanceof Date&&(i=i):i=i.toString()))),"[object Object]"==i&&n.map&&d&&(i=""),i=x.getvaluebytype(i,n),null!=n.displayname?r[n.displayname]=i:r[n.name]=i}}return r}var c,f,h,p,g,b=v.datafields?v.datafields.length:0;if(v._localdata){this._changedrecords=[],this.records=new Array;var m=v._localdata();if(P.each(m,function(p,e){var g,m,y,t,r,a;"string"==typeof e?x.records.push(e):(g={},m=0,y=this,P.each(this,function(a,e){var t=null,r="string",n=a;if(0<b){for(var i=!1,s=!1,o=0;o<b;o++){var l=v.datafields[o];if(null!=l&&l.name==a){i=!0,t=l.map,r=l.type,n=l.name;break}if(null!=l&&l.map&&0<=l.map.indexOf(a)){i=!0,t=l.map,r=l.type,n=l.name,s=!0;var d=y[a];if(null!=t)if(0<(h=t.split(x.mapChar)).length){for(var u=y,c=0;c<h.length;c++)u=u[h[c]];d=u}else d=y[t];"string"!=r&&(d=x.getvaluebytype(d,{type:r})),g[n]=d,null!=g[n]&&(m+=g[n].toString().length+g[n].toString().substr(0,1))}}if(!i)return!0;if(s)return!0}if(P.isFunction(y[a])){var f,d=y[a]();"string"!=r&&(d=x.getvaluebytype(d,{type:r})),g[a]=d,y[a].subscribe&&(f=p,x.koSubscriptions[x.koSubscriptions.length]=y[a].subscribe(function(e){var t=f;g[a]=e;var r={index:t,oldrecord:g,record:g};if(x._changedrecords.push(r),!x.isUpdating)return x.callBindingUpdate("update"),!(x._changedrecords=[])}))}else{var h,d=y[a];if(null!=t)if(0<(h=t.split(x.mapChar)).length){for(u=y,c=0;c<h.length;c++)u=u[h[c]];d=u}else d=y[t];"string"!=r&&(d=x.getvaluebytype(d,{type:r})),g[n]=d,null!=g[n]&&(m+=g[n].toString().length+g[n].toString().substr(0,1))}}),t=x.getid(v.id,y,p),g.uid=t,x.records.push(g),g._koindex=m,x._oldrecords&&(r=x.records.length-1,"update"==n&&x._oldrecords[r]._koindex!=m&&(a={index:r,oldrecord:x._oldrecords[r],record:g},x._changedrecords.push(a))))}),"add"==n)for(i=x.records.length,a=0;a<i;a++){for(var s=x.records[a],y=!1,S=0;S<x._oldrecords.length;S++)if(x._oldrecords[S]._koindex===s._koindex){y=!0;break}y||x._changedrecords.push({index:a,oldrecord:null,record:s,position:0!=a?"last":"first"})}else if("remove"==n)for(i=x._oldrecords.length,a=0;a<i;a++){var O=x._oldrecords[a];(!x.records[a]||x.records[a]._koindex!=O._koindex)&&x._changedrecords.push({index:a,oldrecord:O,record:null})}}else{P.isArray(v.localdata)?0==b?(c=0,f=new Array,P.each(v.localdata,function(e,t){var r=new Object(this);if("string"==typeof t)return x.records=v.localdata,!1;var a,n=x.getid(v.id,r,e);if("object"==typeof n&&(n=e),r.uid=n,0==e){for(var i in this){c++;var s=P.type(this[i]);f.push({name:i,type:s})}b=c,v.datafields=f,v.generatedfields=f}0<b?((a=u(r,b)).uid=n,x.records[x.records.length]=a):x.records[x.records.length]=r})):P.each(v.localdata,function(e){var t=this,r=u(t,b),a=x.getid(v.id,r,e);"object"==typeof a&&(a=e),(t=new Object(r)).uid=a,x.records[x.records.length]=t}):(this.records=new Array,c=0,f=new Array,P.each(v.localdata,function(e){var t,r=x.getid(v.id,this,e);if(0==b&&!("string"==typeof this||this instanceof String)){for(var a in this){c++;var n=P.type(this[a]);f.push({name:a,type:n})}b=c,v.datafields=f,v.generatedfields=f}0<b?((t=u(this,b)).uid=r,x.records[x.records.length]=t):(this.uid=r,x.records[x.records.length]=this)}))}this.originaldata=v.localdata,this.cachedrecords=this.records,this.addForeignValues(v),o.uniqueDataFields&&(h=this.getUniqueRecords(this.records,o.uniqueDataFields),this.records=h,this.cachedrecords=h),o.beforeLoadComplete&&null!=(p=o.beforeLoadComplete(x.records,this.originaldata))&&(x.records=p,x.cachedrecords=p),o.autoSort&&o.autoSortField&&(g=Object.prototype.toString,Object.prototype.toString="function"==typeof field?field:function(){return this[o.autoSortField]},x.records.sort(function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t)return 0;if(null===e&&null!==t)return 1;if(null!==e&&null===t)return-1;if(e=e.toString(),t=t.toString(),null===e&&null===t)return 0;if(null===e&&null!==t)return 1;if(null!==e&&null===t)return-1;if(P.jqx.dataFormat.isNumber(e)&&P.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(P.jqx.dataFormat.isDate(e)&&P.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;P.jqx.dataFormat.isNumber(e)||P.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase());try{if(e<t)return-1;if(t<e)return 1}catch(e){}return 0}),Object.prototype.toString=g),x.loadedData=v.localdata,x.buildHierarchy(),P.isFunction(o.loadComplete)&&o.loadComplete(v.localdata,x.records);break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"ics":if(null!=v.localdata&&!v.url)return P.isFunction(v.beforeprocessing)&&v.beforeprocessing(v.localdata),"xml"===v.datatype?x.loadxml(v.localdata,v.localdata,v):"text"===l?x.loadtext(v.localdata,v):"ics"===l?x.loadics(v.localdata,v):x.loadjson(v.localdata,v.localdata,v),x.addForeignValues(v),o.uniqueDataFields&&(h=x.getUniqueRecords(x.records,o.uniqueDataFields),x.records=h,x.cachedrecords=h),o.beforeLoadComplete&&null!=(p=o.beforeLoadComplete(x.records,this.originaldata))&&(x.records=p,x.cachedrecords=p),x.loadedData=v.localdata,x.buildHierarchy.call(x),P.isFunction(o.loadComplete)&&o.loadComplete(v.localdata,x.records),void x.callBindingUpdate(n);var w,A=null!=o.data?o.data:{};v.processdata&&v.processdata(A),P.isFunction(o.processData)&&o.processData(A),!P.isFunction(o.formatData)||null!=(w=o.formatData(A))&&(A=w);var _="application/x-www-form-urlencoded";o.contentType&&(_=o.contentType);var T="GET";v.type&&(T=v.type),o.type&&(T=o.type);var N,j="ics"==l?"text":l;v.url&&0<v.url.length?P.isFunction(o.loadServerData)?x._requestData(A,v,o):this.xhr=P.jqx.data.ajax({dataType:j,cache:this.cache,type:T,url:v.url,async:r,timeout:v.timeout,contentType:_,data:A,success:function(e,t,r){var a;if(P.isFunction(v.beforeprocessing)&&null!=(a=v.beforeprocessing(e,t,r))&&(e=a),P.isFunction(o.downloadComplete)&&null!=(a=o.downloadComplete(e,t,r))&&(e=a),null==e)return x.records=new Array,x.cachedrecords=new Array,x.originaldata=new Array,x.callDownloadComplete(),void(P.isFunction(o.loadComplete)&&o.loadComplete(new Array));var n,i,s=e;e.records&&(s=e.records),null!=e.totalrecords?v.totalrecords=e.totalrecords:null!=e.totalRecords&&(v.totalrecords=e.totalRecords),"xml"===v.datatype?x.loadxml(null,s,v):"text"===l?x.loadtext(s,v):"ics"===l?x.loadics(s,v):x.loadjson(null,s,v),x.addForeignValues(v),o.uniqueDataFields&&(n=x.getUniqueRecords(x.records,o.uniqueDataFields),x.records=n,x.cachedrecords=n),!o.beforeLoadComplete||null!=(i=o.beforeLoadComplete(x.records,e))&&(x.records=i,x.cachedrecords=i),x.loadedData=e,x.buildHierarchy.call(x),x.callDownloadComplete(),P.isFunction(o.loadComplete)&&o.loadComplete(e,t,r,x.records)},error:function(e,t,r){P.isFunction(v.loaderror)&&v.loaderror(e,t,r),P.isFunction(o.loadError)&&o.loadError(e,t,r),e=null,x.callDownloadComplete()},beforeSend:function(e,t){P.isFunction(o.beforeSend)&&o.beforeSend(e,t),P.isFunction(v.beforesend)&&v.beforesend(e,t)}}):(x.buildHierarchy(new Array),x.callDownloadComplete(),P.isFunction(o.loadComplete)&&(N=N||{},o.loadComplete(N)))}this.callBindingUpdate(n)}}},buildHierarchy:function(e){var i=this._source,t=new Array;if(i.datafields&&(i.hierarchy&&!i.hierarchy.reservedNames?i.hierarchy.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"}:i.hierarchy&&((o=i.hierarchy.reservedNames).leaf||(o.leaf="leaf"),o.parent||(o.parent="parent"),o.expanded||(o.expanded="expanded"),o.checked||(o.checked="checked"),o.selected||(o.selected="selected"),o.level||(o.level="level"),o.data||(o.data="data")),i.hierarchy)){var s=this,o=i.hierarchy.reservedNames;if(i.hierarchy.root){if("xml"==i.dataType){t=this.getRecordsHierarchy("uid","parentuid","records",null,e);return this.hierarchy=t}this.hierarchy=this.records;for(var l=i.hierarchy.root,r=0;r<this.records.length;r++){var d,a,u,n=this.records[r];n&&((d=function(e){if(i.hierarchy.record)e.records=e[l][i.hierarchy.record];else{var t=l.split(s.mapChar),r=null;if(1<t.length){for(var a=e,n=0;n<t.length;n++)null!=a&&(a=a[t[n]]);r=a}else r=e[l];e.records=r}(null==e.records||e.records&&0==e.records.length)&&(e[o.leaf]=!0)})(n),n[o.level]=0,a=this.getid(i.id,n,r),n.uid=a,n[o.parent]=null,void 0===(n[o.data]=n)[o.expanded]&&(n[o.expanded]=!1),(u=function(e,t){if(t)for(var r=0;r<t.length;r++){var a,n=t[r];n&&(d(n),n[o.level]=e[o.level]+1,n[o.parent]=e,n[o.data]=n,(a=s.getid(i.id,n,r))==r&&null==i.id?n.uid=e.uid+"_"+a:n.uid=a,void 0===n[o.expanded]&&(n[o.expanded]=!1),u(n,n.records))}else e.records=new Array})(n,n.records))}return this.hierarchy}if(i.hierarchy.keyDataField&&i.hierarchy.parentDataField){t=this.getRecordsHierarchy(i.hierarchy.keyDataField.name,i.hierarchy.parentDataField.name,"records",null,e);return this.hierarchy=t}if(i.hierarchy.groupingDataFields){for(var c=new Array,r=0;r<i.hierarchy.groupingDataFields.length;r++)c.push(i.hierarchy.groupingDataFields[r].name);t=this.getGroupedRecords(c,"records","label",null,"data",null,"parent",e);return this.hierarchy=t}}},addRecord:function(n,i,s,e){function o(){return{leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"}}var t,l,d=this;if(null!=n){if(null==s)return this.hierarchy&&0<=this.hierarchy.length&&(this._source.hierarchy||e)?(null==(t=d._source&&d._source.hierarchy?d._source.hierarchy.reservedNames:null)&&(t=o()),n[t.level]=0,"last"==i?this.hierarchy.push(n):"number"==typeof i&&isFinite(i)?this.hierarchy.splice(i,0,n):this.hierarchy.splice(0,0,n)):"last"==i?this.records.push(n):"number"==typeof i&&isFinite(i)?this.records.splice(i,0,n):this.records.splice(0,0,n),!0;0<this.hierarchy.length&&(l=function(e){if(e)for(var t=0;t<e.length;t++){var r=e[t];if(r.uid==s){var a=d._source&&d._source.hierarchy?d._source.hierarchy.reservedNames:null;return null==a&&(a=o()),n[a.parent]=r,n[a.level]=r[a.level]+1,r.records||(r.records=new Array),r[a.leaf]=!1,"last"==i?r.records.push(n):"number"==typeof i&&isFinite(i)?r.records.splice(i,0,n):r.records.splice(0,0,n),!0}r.records&&l(r.records)}})(this.hierarchy)}return!1},deleteRecord:function(i){var s=this;if(0<this.hierarchy.length){var o=function(e){if(e)for(var t=0;t<e.length;t++){if((r=e[t]).uid==i){e.splice(t,1),s.recordids[i]&&delete s.recordids[i];var n=function(e){for(var t=0;t<e.length;t++){for(var r=e[t].uid,a=0;a<s.records.length;a++){if(s.records[a].uid==r){s.records.splice(a,1);break}}e[t].records&&n(e[t].records)}};r.records&&n(r.records);for(var r,a=0;a<s.records.length;a++){if((r=s.records[a]).uid==i){s.records.splice(a,1);break}}return!0}r.records&&o(r.records)}};o(this.hierarchy)}else for(var e=0;e<this.records.length;e++){if(this.records[e].uid==i)return this.records.splice(e,1),!0}return!1},addForeignValues:function(e){for(var t=this,r=e.datafields?e.datafields.length:0,a=0;a<r;a++){var n=e.datafields[a];if(null!=n)if(null!=n.values){null==n.value&&(n.value=n.name),null==n.values.value&&(n.values.value=n.value);var i,s,o=new Array;t.pageable&&t.virtualmode?(s=(i=t.pagenum*t.pagesize)+t.pagesize)>t.totalrecords&&(s=t.totalrecords):t.virtualmode?(i=e.recordstartindex,(s=e.recordendindex)>t.totalrecords&&(s=t.totalrecords)):(i=0,s=t.records.length);for(var l=i;l<s;l++){var d=t.records[l],u=n.name,c=d[n.value];if(null!=o[c])d[u]=o[c];else for(var f=0;f<n.values.source.length;f++){var h=n.values.source[f],p=h[n.values.value];if(null==p&&(p=h.uid),p==c){var g=h[n.values.name];d[u]=g,o[c]=g;break}}}}else if(null!=n.value)for(l=0;l<t.records.length;l++){(d=t.records[l])[n.name]=d[n.value]}}},abort:function(){this.xhr&&4!=this.xhr.readyState&&(this.xhr.abort(),this.callDownloadComplete())},_requestData:function(e,i,s){var o=this;s.loadServerData(e,i,function(e){var t,r;e.totalrecords&&(i.totalrecords=e.totalrecords,o.totalrecords=e.totalrecords),e.records&&(o.records=e.records,o.cachedrecords=e.records),o.addForeignValues(i),s.uniqueDataFields&&(t=o.getUniqueRecords(o.records,s.uniqueDataFields),o.records=t,o.cachedrecords=t),!s.beforeLoadComplete||null!=(r=s.beforeLoadComplete(o.records,e))&&(o.records=r,o.cachedrecords=r);for(var a=0;a<o.records.length;a++){var n=o.records[a];null!=n&&null==n.uid&&(n.uid=o.getid(i.id,n,a))}o.buildHierarchy.call(o),P.isFunction(s.loadComplete)&&s.loadComplete(e),o.callDownloadComplete()})},getUniqueRecords:function(e,t){if(e&&t)for(var r=e.length,a=t.length,n=new Array,i=new Array,s=0;s<r;s++){var o=e[s],l="";if(null!=o){for(var d=0;d<a;d++){l+=o[t[d]]+"_"}i[l]||(n[n.length]=o),i[l]=!0}}return n},getAggregatedData:function(e,n,t,a){var l=(l=t)||this.records,d={},r=new Array,u=l.length;if(0!=u&&null!=u){for(var i=0;i<u;i++)for(var s=l[i],o=0;o<e.length;o++){var c,f,h=e[o],p=s[h.name];h.aggregates&&(d[h.name]=d[h.name]||{},r[h.name]=r[h.name]||0,r[h.name]++,c=function(e){for(var t in e){var r=d[h.name][t];null==r&&(r=d[h.name][t]=0),P.isFunction(e[t])&&(r=e[t](r,p,h.name,s,a)),d[h.name][t]=r}},f=parseFloat(p),(f=!isNaN(f))&&(p=parseFloat(p)),"number"==typeof p&&isFinite(p)?P.each(h.aggregates,function(){var e=d[h.name][this];if(null==e&&(e="max"==this?-9999999999999:"min"==this?9999999999999:0),"sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this)e+=parseFloat(p);else if("product"==this)0==i?e=parseFloat(p):e*=parseFloat(p);else if("min"==this)e=Math.min(e,parseFloat(p));else if("max"==this)e=Math.max(e,parseFloat(p));else if("count"==this)e++;else if("object"==typeof this)return void c(this);d[h.name][this]=e}):P.each(h.aggregates,function(){if("min"==this||"max"==this||"count"==this||"product"==this||"sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this){if(null===p)return!0;var e=d[h.name][this];return null==e&&(e=0),d[h.name][this]=e,!0}"object"==typeof this&&c(this)}))}for(o=0;o<e.length;o++){var g,h=e[o];d[h.name]||(d[h.name]={},P.each(h.aggregates,function(e){d[h.name][this]=0})),null!=d[h.name].avg?(p=d[h.name].avg,g=r[h.name],d[h.name].avg=0===g||null==g?0:p/g):null!=d[h.name].count&&(d[h.name].count=u),(d[h.name].stdev||d[h.name].stdevp||d[h.name].var||d[h.name].varp)&&P.each(h.aggregates,function(e){if("stdev"==this||"var"==this||"varp"==this||"stdevp"==this){for(var t=d[h.name][this],r=u,a=t/u,n=0,i=0;i<u;i++){var s=l[i][h.name];n+=(s-a)*(s-a)}var o="stdevp"==this||"varp"==this?r:r-1;0==o&&(o=1),"var"==this||"varp"==this?d[h.name][this]=n/o:"stdevp"!=this&&"stdev"!=this||(d[h.name][this]=Math.sqrt(n/o))}}),h.formatStrings&&P.each(h.aggregates,function(e){var t=h.formatStrings[e];if(t)if("min"==this||"max"==this||"count"==this||"product"==this||"sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this){var r=d[h.name][this];d[h.name][this]=P.jqx.dataFormat.formatnumber(r,t,n)}else if("object"==typeof this)for(var a in this){r=d[h.name][a];d[h.name][a]=P.jqx.dataFormat.formatnumber(r,t,n)}})}return d}},bindDownloadComplete:function(e,t){this._downloadComplete[this._downloadComplete.length]={id:e,func:t}},unbindDownloadComplete:function(e){for(var t=0;t<this._downloadComplete.length;t++)if(this._downloadComplete[t].id==e){this._downloadComplete[t].func=null,this._downloadComplete.splice(t,1);break}},callDownloadComplete:function(){for(var e=0;e<this._downloadComplete.length;e++){var t=this._downloadComplete[e];null!=t.func&&t.func()}},setSource:function(e){this._source=e},generatekey:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getGroupedRecords:function(e,t,r,a,n,i,s,o,l){l=l||0;for(var d=new Array,u=0;u<e.length;u++)d[u]=this.generatekey();t=t||"items",r=r||"group",n=n||"record",s=s||"parentItem",void 0===i&&(i="value");function c(e){var t=e;return a&&P.each(a,function(){this.name&&this.map&&(t[this.map]=t[this.name])}),t}for(var f=new Array,h=0,p=new Array,g=e.length,m=(new Array,(o=o||this.records).length),y=0;y<m;y++){for(var v=c(o[y]),x=(v[this.uniqueId],new Array),b=0,u=0;u<g;u++){var S=v[e[u]];null!=S&&(x[b++]={value:S,hash:d[u]})}if(x.length!=g)break;for(var O=null,w="",A=0;A<x.length;A++){0;var _,T,N=x[A].value;null==p[w=w+"_"+x[A].hash+"_"+N]||null==p[w]?(null==O?((O={level:0})[s]=null,O[r]=N,void 0!==(O[n]=v).expanded?O.expanded=v.expanded:O.expanded=!1,i&&(O[i]=v[i]),O[t]=new Array,_=f.length+l,this._source.id&&"number"!=typeof v.uid&&!isFinite(v.uid)||(_="Row"+_),O.uid=_,f[h++]=O):((T={level:O.level+1})[s]=O,T[r]=N,T[t]=new Array,void 0!==(T[n]=v).expanded?T.expanded=v.expanded:T.expanded=!1,i&&(T[i]=v[i]),T.uid=O.uid+"_"+O[t].length,O[t][O[t].length]=T,O=T),p[w]=O):O=p[w]}v&&(v.leaf=!0),null!=O?(null==this._source.id&&(null==v.uid?v.uid=O.uid+"_"+O[t].length:-1==v.uid.toString().indexOf(O.uid)&&(v.uid=O.uid+"_"+v.uid)),v[s]=O,v.level=O.level+1,O[t][O[t].length]=v):null==v.uid&&(v.uid=this.generatekey())}return f},getRecordsHierarchy:function(e,t,r,a,n){var i=new Array,s=this.records;if(n&&(s=n),0==this.records.length)return null;function o(e){var t=e;return a&&P.each(a,function(){this.name&&this.map&&(t[this.map]=t[this.name])}),t}for(var l=null!=r?r:"items",d=[],u=s,c=u.length,f=this._source&&this._source.hierarchy?this._source.hierarchy.reservedNames:null,h=0;h<c;h++){var p=(m=P.extend({},u[h]))[t];d[S=m[e]]={parentid:p,item:m}}for(var g,h=0;h<c;h++){var m,y,v,x,b,p=(m=P.extend({},u[h]))[t],S=m[e];null!=d[p]?(m={parentid:p,item:d[S].item},(y=d[p].item)[l]||(y[l]=[]),v=y[l].length,x=m.item,f?null==x[f.parent]&&(x[f.parent]=y):null==x.parent&&(x.parent=y),b=o(x),y[l][v]=b,d[p].item=y,d[S]=m):(x=d[S].item,f?null==x[f.parent]&&(x[f.parent]=null):null==x.parent&&(x.parent=null),b=o(x),f?b[f.level]=0:b.level=0,i[i.length]=b)}return 0!=i.length&&(g=function(e,t){for(var r=0;r<t.length;r++){f?t[r][f.level]=e:t[r].level=e;var a=t[r][l];a&&0<a.length?g(e+1,a):f?t[r][f.leaf]=!0:t[r].leaf=!0}})(0,i),i},bindBindingUpdate:function(e,t){this._bindingUpdate[this._bindingUpdate.length]={id:e,func:t}},unbindBindingUpdate:function(e){for(var t=0;t<this._bindingUpdate.length;t++)if(this._bindingUpdate[t].id==e){this._bindingUpdate[t].func=null,this._bindingUpdate.splice(t,1);break}},callBindingUpdate:function(e){for(var t=0;t<this._bindingUpdate.length;t++){var r=this._bindingUpdate[t];null!=r.func&&r.func(e)}},getid:function(e,t,r){if(null==e||null==e.name||!e.name){if(0<P(e,t).length)return P(e,t).text();if(e&&0<e.toString().length){if(null!=(s=P(t).attr(e))&&0<s.toString().length)return P.trim(s).split(" ").join("").replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/\\@])/g,"");var a=e.split(this.mapChar);if(1<a.length){for(var n=t,i=0;i<a.length;i++)null!=n&&(n=n[a[i]]);if(null!=n)return n}else if(null!=t[e])return t[e]}return r}var s;if(null!=(s=P(t).attr(e.name))&&0<s.toString().length)return s;if(e.map)try{if(null!=(s=P(t).attr(e.map))&&0<s.toString().length)return s;if(0<P(e.map,t).length)return P(e.map,t).text();if(0<P(e.name,t).length)return P(e.name,t).text()}catch(e){return r}},loadjson:function(t,e,u){"string"==typeof t&&(t=P.parseJSON(t)),null==u.root&&(u.root=""),null==u.record&&(u.record=""),t=(t=t||e)||[];var c=this;if(""!=u.root)if(1<(b=u.root.split(c.mapChar)).length){for(var r=t,a=0;a<b.length;a++)null!=r&&(r=r[b[a]]);t=r}else{if(void 0!==t[u.root]?t=t[u.root]:t[0]&&void 0!==t[0][u.root]?t=t[0][u.root]:P.each(t,function(e){if(this==u.root)return t=this,!1;null!=this[u.root]&&(t=this[u.root])}),!t)if(0<(b=u.root.split(c.mapChar)).length){for(r=t,a=0;a<b.length;a++)null!=r&&(r=r[b[a]]);t=r}}else if(!t.length)for(var n in t)if(P.isArray(t[n])){t=t[n];break}if(null!=t&&null==t.length&&(t=P.makeArray(t)),null==t||null==t||"undefined"==t||null==t.length)throw new Error("jqxDataAdapter: JSON Parse error! Invalid JSON. Please, check your JSON or your jqxDataAdapter initialization!");if(0!=t.length){var i=t.length;this.totalrecords=this.virtualmode&&u.totalrecords||i,this.records=new Array,this.originaldata=new Array;var s=this.records,o=this.pageable?this.pagesize*this.pagenum:u.recordstartindex;this.recordids=new Array,u.loadallrecords&&(o=0,i=this.totalrecords);var l=0;this.virtualmode&&(l=o=this.pageable?this.pagesize*this.pagenum:u.recordstartindex,o=0,i=this.totalrecords);var f=u.datafields?u.datafields.length:0;if(0==f){var d=t[0],h=new Array;for(var n in d){h[h.length]={name:n}}u.datafields=h,u.generatedfields=u.datafields,f=h.length}for(var p=o,g=o;g<i;g++){var m=t[g];if(null==m)break;if(!u.record||""==u.record||null!=(m=m[u.record])){var y=this.getid(u.id,m,g);if("object"==typeof y&&(y=g),!this.recordids[y]){this.recordids[y]=m;for(var v={},x=0;x<f;x++){var b,S,O,w=u.datafields[x],A="";if(null!=w&&null!=w){if(w.map){if(P.isFunction(w.map))A=w.map(m);else if(0<(b=w.map.split(c.mapChar)).length){for(var _=m,a=0;a<b.length;a++)null!=_&&(_=_[b[a]]);A=_}else A=m[w.map];null!=A&&null!=A?A=this.getvaluebytype(A,w):null==A&&null!=A&&(A="")}""!=A||w.map||(null==(A=m[w.name])&&null!=A&&(A=""),null!=w.value&&(null==A||null!=(S=A[w.value])&&(A=S))),A=this.getvaluebytype(A,w),null!=w.displayname?v[w.displayname]=A:v[w.name]=A,"array"===w.type&&(O=function(e){if(e)for(var t=0;t<e.length;t++){var r=e[t];if(r)for(var a=0;a<f;a++){var n,i=u.datafields[a],s="";if(null!=i&&null!=i){if(i.map){if(P.isFunction(i.map))s=i.map(r);else{var o=i.map.split(c.mapChar);if(0<o.length){for(var l=r,d=0;d<o.length;d++)null!=l&&(l=l[o[d]]);s=l}else s=r[i.map]}null!=s&&null!=s?s=this.getvaluebytype(s,i):null==s&&null!=s&&(s="")}""!=s||i.map||(null==(s=r[i.name])&&null!=s&&(s=""),null!=i.value&&(null==s||null!=(n=s[i.value])&&(s=n))),s=this.getvaluebytype(s,i),null!=i.displayname?r[i.displayname]=s:r[i.name]=s,"array"===i.type&&O.call(this,s)}}}}).call(this,A)}}(u.recordendindex<=0||o<u.recordendindex)&&(s[l+p]=new Object(v),s[l+p].uid=y,this.originaldata[l+p]=new Object(s[g]),p++)}}}this.records=s,this.cachedrecords=this.records}else this.totalrecords=0},loadxml:function(e,t,r){"string"==typeof e&&(e=t=P(P.parseXML(e)),e=null),null==r.root&&(r.root=""),null==r.record&&(r.record="");var a=(e=(e=P.jqx.browser.msie&&t&&null!=t.xml?P(r.root+" "+r.record,P.parseXML(t.xml)):e||P(r.root+" "+r.record,t))||[]).length;if(0!=e.length){this.totalrecords=this.virtualmode&&r.totalrecords||a,this.records=new Array,this.originaldata=new Array;var n=this.records,i=this.pageable?this.pagesize*this.pagenum:r.recordstartindex;this.recordids=new Array,r.loadallrecords&&(i=0,a=this.totalrecords);var s=0;this.virtualmode&&(s=i=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,i=0,a=this.totalrecords);var o=r.datafields?r.datafields.length:0;if(0==o){var l=e[0],d=new Array;for(var u in l){d[d.length]={name:u}}r.datafields=d,r.generatedfields=r.datafields,o=d.length}for(var c=i,f=i;f<a;f++){if(null==(_=e[f]))break;var h=this.getid(r.id,_,f);if(!this.recordids[h]){this.recordids[h]=_;var p={},g=!1;r.hierarchy&&r.hierarchy.root&&(g=!0);for(var m=0;m<o;m++){var y=r.datafields[m],v="";if(null!=y&&null!=y){if(y.map)if(P.isFunction(y.map))v=y.map(_);else{var x=y.map.indexOf("[");if(x<0)if(1==(v=P(y.map,_)).length)v=v.text();else{0;for(var b=new Array,S=0;S<v.length;S++)b.push(P(v[S]).text());v=b,g&&0<b.length&&(v=b[0])}else{var O=y.map.substring(0,x-1),w=y.map.indexOf("]"),A=y.map.substring(x+1,w);null==(v=P(O,_).attr(A))&&(v=P(_).attr(A)),null==v&&(v="")}""==v&&null==(v=P(_).attr(y.map))&&(v="")}if(""==v){if(1==(v=P(y.name,_)).length)v=v.text();else{for(b=new Array,S=0;S<v.length;S++)b.push(P(v[S]).text());v=b,g&&0<b.length&&(v=b[0])}""==v&&null==(v=P(_).attr(y.name))&&(v=""),""==v&&_.nodeName&&_.nodeName==y.name&&_.firstChild&&(v=P(_.firstChild).text())}v=this.getvaluebytype(v,y),null!=y.displayname?p[y.displayname]=v:p[y.name]=v}}(r.recordendindex<=0||i<r.recordendindex)&&(n[s+c]=P.extend({},p),n[s+c].uid=h,this.originaldata[s+c]=P.extend({},n[f]),c++)}}if(r.hierarchy&&r.hierarchy.root)for(f=i;f<a;f++){var _=e[f],T=n[f];0<P(_).parent().length?(h=this.getid(r.id,P(_).parents(r.hierarchy.record+":first")),T.parentuid=h):T.parentuid=null}this.records=n,this.cachedrecords=this.records}},loadics:function(e,t){if(null!=e){var r=t.rowDelimiter||this.rowDelimiter||"\n",a=e.split(r),n=a.length,i=e.split("\r");1==n&&1<i.length&&(n=(a=i).length),this.records=new Array,this.originaldata=new Array;var s=this.records;this.recordids=new Array;function o(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(e);if(!t)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(t[1],t[2]-1,t[3],t[5]||0,t[6]||0,t[7]||0))}for(var l=0;l<n;l++){var d,u,c=a[l];"BEGIN:VEVENT"!=c?0<=c.indexOf("SUMMARY")?u.SUMMARY=c.substring(c.indexOf("SUMMARY")+8):0<=c.indexOf("LOCATION")?u.LOCATION=c.substring(c.indexOf("LOCATION")+9):0<=c.indexOf("DESCRIPTION")?u.DESCRIPTION=c.substring(c.indexOf("DESCRIPTION")+12):0<=c.indexOf("RRULE")?u.RRULE=c.substring(c.indexOf("RRULE")+6):0<=c.indexOf("EXDATE")?(d=c.substring(c.indexOf("EXDATE")+7),u.EXDATE=d):0<=c.indexOf("DTEND")?u.DTEND=o(c.substring(c.indexOf("DTEND")+6)):0<=c.indexOf("DTSTART")?u.DTSTART=o(c.substring(c.indexOf("DTSTART")+8)):0<=c.indexOf("UID")?u.uid=u.UID=c.substring(c.indexOf("UID")+4):0<=c.indexOf("STATUS")?u.STATUS=c.substring(c.indexOf("STATUS")+7):"END:VEVENT"!=c||s.push(u):u={}}this.records=s,this.cachedrecords=this.records}},loadtext:function(e,t){if(null!=e){var r=t.rowDelimiter||this.rowDelimiter||"\n",a=e.split(r),n=a.length,i=e.split("\r");1==n&&1<i.length&&(n=(a=i).length),this.totalrecords=this.virtualmode&&t.totalrecords||n,this.records=new Array,this.originaldata=new Array;var s=this.records,o=this.pageable?this.pagesize*this.pagenum:t.recordstartindex;this.recordids=new Array,t.loadallrecords&&(o=0,n=this.totalrecords);var l=0;this.virtualmode&&(l=o=this.pageable?this.pagesize*this.pagenum:t.recordstartindex,o=0,n=this.totalrecords);for(var d=t.datafields.length,u=(u=t.columnDelimiter||this.columnDelimiter)||("tab"===t.datatype||"tsv"===t.datatype?"\t":","),c=o;c<n;c++){var f=a[c],h=null;if(!this.recordids[h]){null==t.id&&(h=c,this.recordids[h]=f);for(var p,g,m={},y=a[c].split(u),v=0;v<d;v++){v>=y.length||(p=t.datafields[v],g=y[v],p.map&&P.isFunction(p.map)&&(g=p.map(f)),p.type&&(g=this.getvaluebytype(g,p)),m[p.map||p.name||v.toString()]=g,null!=t.id&&t.id===p.name&&(h=g,this.recordids[h]=f))}null==h&&(h=c),s[l+c]=P.extend({},m),s[l+c].uid=h,this.originaldata[l+c]=P.extend({},s[c])}}this.records=s,this.cachedrecords=this.records}},getvaluebytype:function(e,t){var r=e;if(null==e)return e;if(P.isArray(e)&&"array"!=t.type){for(var a=0;a<e.length;a++)e[a]=this.getvaluebytype(e[a],t);return e}if("date"==t.type)if("NaN"==e)e="";else{if(e&&e instanceof Date)return e;var n,i=new Date(e);"string"==typeof e&&(!t.format||null!=(n=P.jqx.dataFormat.parsedate(e,t.format))&&(i=n)),null==(e=("NaN"==i.toString()||"Invalid Date"==i.toString())&&P.jqx.dataFormat?P.jqx.dataFormat.tryparsedate(e):i)&&(e=r)}else"float"==t.type||"number"==t.type||"decimal"==t.type?"NaN"==e?e="":(e=parseFloat(e),isNaN(e)&&(e=r)):"int"==t.type||"integer"==t.type?(e=parseInt(e),isNaN(e)&&(e=r)):"bool"!=t.type&&"boolean"!=t.type||(null!=e&&null!=e.toLowerCase&&("false"==e.toLowerCase()?e=!1:"true"==e.toLowerCase()&&(e=!0)),e=1==e||(0!=e||""===e)&&"");return e}},P.jqx.dataFormat={},P.extend(P.jqx.dataFormat,{regexTrim:/^\s+|\s+$/g,regexInfinity:/^[+-]?infinity$/i,regexHex:/^0x[a-f0-9]+$/i,regexParseFloat:/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString:Object.prototype.toString,isBoolean:function(e){return"boolean"==typeof e},isObject:function(e){return e&&("object"==typeof e||P.isFunction(e))||!1},isDate:function(e){return e instanceof Date},arrayIndexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,a=e.length;r<a;r++)if(e[r]===t)return r;return-1},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isEmpty:function(e){return!(!this.isString(e)&&this.isValue(e))&&(!this.isValue(e)||""===(e=P.trim(e).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"")))},startsWith:function(e,t){return 0===e.indexOf(t)},endsWith:function(e,t){return e.substr(e.length-t.length)===t},trim:function(e){return(e+"").replace(this.regexTrim,"")},isArray:function(e){return"[object Array]"===this.toString.call(e)},defaultcalendar:function(){return{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","}},expandFormat:function(e,t){t=t||"F";var r,a=e.patterns,n=t.length;if(1===n){if(!(r=a[t]))throw"Invalid date format string '"+t+"'.";t=r}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},getEra:function(e,t){if(!t)return 0;if("string"==typeof e)return 0;for(var r,a=e.getTime(),n=0,i=t.length;n<i;n++)if(null===(r=t[n].start)||r<=a)return n;return 0},toUpper:function(e){return e?e.toUpperCase():""},toUpperArray:function(e){for(var t=[],r=0,a=e.length;r<a;r++)t[r]=this.toUpper(e[r]);return t},getEraYear:function(e,t,r,a){var n=e.getFullYear();return!a&&t.eras&&(n-=t.eras[r].offset),n},getDayIndex:function(e,t,r){var a,n=e.days,i=e._upperDays;return i||(e._upperDays=i=[this.toUpperArray(n.names),this.toUpperArray(n.namesAbbr),this.toUpperArray(n.namesShort)]),t=t.toUpperCase(),r?-1===(a=this.arrayIndexOf(i[1],t))&&(a=this.arrayIndexOf(i[2],t)):a=this.arrayIndexOf(i[0],t),a},getMonthIndex:function(e,t,r){var a=e.months,n=e.monthsGenitive||e.months,i=e._upperMonths,s=e._upperMonthsGen;i||(e._upperMonths=i=[this.toUpperArray(a.names),this.toUpperArray(a.namesAbbr)],e._upperMonthsGen=s=[this.toUpperArray(n.names),this.toUpperArray(n.namesAbbr)]),t=this.toUpper(t);var o=this.arrayIndexOf(r?i[1]:i[0],t);return o<0&&(o=this.arrayIndexOf(r?s[1]:s[0],t)),o},appendPreOrPostMatch:function(e,t){for(var r=0,a=!1,n=0,i=e.length;n<i;n++){var s=e.charAt(n);switch(s){case"'":a?t.push("'"):r++,a=!1;break;case"\\":a&&t.push("\\"),a=!a;break;default:t.push(s),a=!1}}return r},getTokenRegExp:function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},formatlink:function(e,t){var r="";return t&&t.target&&(r="target="+t.target),""!=r?"<a "+r+' href="'+e+'">'+e+"</a>":'<a href="'+e+'">'+e+"</a>"},formatemail:function(e){return'<a href="mailto:'+e+'">'+e+"</a>"},formatNumber:function(e,t,r){return this.formatnumber(e,t,r)},formatnumber:function(e,t,r){if(null!=r&&null!=r&&""!=r||(r=this.defaultcalendar()),""===t||null===t)return e;var a;this.isNumber(e)||(e*=1),1<t.length&&(a=parseInt(t.slice(1),10));var n={},i=t.charAt(0).toUpperCase();switch(n.thousandsSeparator=r.thousandsseparator,n.decimalSeparator=r.decimalseparator,i){case"D":case"d":case"F":case"f":n.decimalPlaces=a;break;case"N":case"n":n.decimalPlaces=0;break;case"C":case"c":n.decimalPlaces=a,"before"==r.currencysymbolposition?n.prefix=r.currencysymbol:n.suffix=r.currencysymbol;break;case"P":case"p":n.suffix=r.percentsymbol,n.decimalPlaces=a;break;default:throw"Bad number format specifier: "+i}if(this.isNumber(e)){var s=e<0,o=e+"",l=n.decimalSeparator?n.decimalSeparator:".";if(this.isNumber(n.decimalPlaces)){var d=n.decimalPlaces,u=Math.pow(10,d),c=(o=(e*u).toFixed(0)/u+"").lastIndexOf(".");if(0<d)for(c<0?c=(o+=l).length-1:"."!==l&&(o=o.replace(".",l));o.length-1-c<d;)o+="0"}else{0<(c=(o=e+"").lastIndexOf("."))&&null==d&&"."!==l&&(o=o.replace(".",l))}if(n.thousandsSeparator){var f=n.thousandsSeparator;c=-1<(c=o.lastIndexOf(l))?c:o.length;for(var h=o.substring(c),p=-1,g=c;0<g;g--)++p%3==0&&g!==c&&(!s||1<g)&&(h=f+h),h=o.charAt(g-1)+h;o=h}return o=n.prefix?n.prefix+o:o,o=n.suffix?o+n.suffix:o}return e},tryparsedate:function(e,t){null!=t&&null!=t||(t=this.defaultcalendar());if(""==e)return null;if(null==e||e.substring||(e=e.toString()),null!=e&&"/Date("==e.substring(0,6)){var r=new Date(+e.replace(/\/Date\((\d+)\)\//,"$1"));if("Invalid Date"==r&&(r=null,(k=e.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/))&&(r=new Date(+k[1]+36e5*k[2]+6e4*k[3]))),null==r||"Invalid Date"==r||isNaN(r)){var a=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/.exec(e);if(a){var n,i,s=new Date(parseInt(a[1]));if(a[2]&&(n=parseInt(a[3]),"-"===a[2]&&(n=-n),i=s.getUTCMinutes(),s.setUTCMinutes(i-n)),!isNaN(s.valueOf()))return s}}return r}var o,l,d=t.patterns;for(var u in d)if(r=this.parsedate(e,d[u],t)){if("ISO"==u)if(c=this.parsedate(e,d.ISO2,t))return c;return r}if(null!=e){for(var c=null,f=[":","/","-"],h=!0,p=0;p<f.length;p++)-1!=e.indexOf(f[p])&&(h=!1);if(h){var g=new Number(e);if(!isNaN(g))return new Date(g)}}if("string"===P.type(e)){var m=this;e=m.trim(e);var y=[":","/","-"," ",","];o=", ",l=",";var v="",x=e=e.replace(new RegExp(o,"g"),l);0<=e.indexOf(":")?(v=e.substring(e.indexOf(":")-2),v=m.trim(v),x=e.substring(0,e.indexOf(":")-2)):0<=e.toUpperCase().indexOf("AM")?(v=e.substring(e.toUpperCase().indexOf("AM")-2),v=m.trim(v),x=e.substring(0,e.toUpperCase().indexOf("AM")-2)):0<=e.toUpperCase().indexOf("PM")&&(v=e.substring(e.toUpperCase().indexOf("PM")-2),v=m.trim(v),x=e.substring(0,e.toUpperCase().indexOf("PM")-2));var b,S,O,w,A,_,T=new Date,N=!1;if(x){for(var j=0;j<y.length;j++)if(0<=x.indexOf(y[j])){f=x.split(y[j]);break}for(var E=new Array,M=new Array,C=new Array,D=null,I=null,j=0;j<f.length;j++){var p=f[j],F=m.parsedate(p,"d",t)||m.parsedate(p,"dd",t)||m.parsedate(p,"ddd",t)||m.parsedate(p,"dddd",t);if(F&&p.length<=2){D=j,E.push(F.getDate());break}}for(j=0;j<f.length;j++){var p=f[j],U=m.parsedate(p,"M",t)||m.parsedate(p,"MM",t)||m.parsedate(p,"MMM",t)||m.parsedate(p,"MMMM",t);if(U){if(null!=D&&D==j)continue;if(M.push(U.getMonth()),2<p.length){I=j;break}}}for(j=0;j<f.length;j++){var p=f[j],L=m.parsedate(p,"yyyy",t);if(L){if(null!=D&&D==j)continue;if(null!=I&&I==j)continue;C.push(L.getFullYear())}}for(var q=new Array,R=0;R<E.length;R++)for(var k=0;k<M.length;k++)for(var H=0;H<C.length;H++){s=new Date(C[H],M[k],E[R]);C[H]<1970&&s.setFullYear(C[H]),NaN!=s.getTime()&&q.push(s)}0<q.length&&(T=q[0],N=!0)}if(v&&(b=0<=v.indexOf(":")?v.split(":"):v,_=A=w=O=0,(S=m.parsedate(v,"h:mm tt",t)||m.parsedate(v,"h:mm:ss tt",t)||m.parsedate(v,"HH:mm:ss.fff",t)||m.parsedate(v,"HH:mm:ss.ff",t)||m.parsedate(v,"HH:mm:ss.tttt",t)||m.parsedate(v,"HH:mm:ss",t)||m.parsedate(v,"HH:mm",t)||m.parsedate(v,"HH",t))&&NaN!=S.getTime()?(O=S.getHours(),w=S.getMinutes(),A=S.getSeconds(),_=S.getMilliseconds()):(1==b.length&&(O=parseInt(b[0])),2==b.length&&(O=parseInt(b[0]),w=parseInt(b[1])),3==b.length&&(O=parseInt(b[0]),w=parseInt(b[1]),0<=b[2].indexOf(".")?(A=parseInt(b[2].toString().split(".")[0]),_=parseInt(b[2].toString().split(".")[1])):A=parseInt(b[2])),4==b.length&&(O=parseInt(b[0]),w=parseInt(b[1]),A=parseInt(b[2]),_=parseInt(b[3]))),!T||isNaN(O)||isNaN(w)||isNaN(A)||isNaN(_)||(T.setHours(O,w,A,_),N=!0)),N)return T}return null},getparseregexp:function(e,t){var r=e._parseRegExp;if(r){var a=r[t];if(a)return a}else e._parseRegExp=r={};for(var n,i=this.expandFormat(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),s=["^"],o=[],l=0,d=0,u=this.getTokenRegExp();null!==(n=u.exec(i));){var c=i.slice(l,n.index),l=u.lastIndex;if((d+=this.appendPreOrPostMatch(c,s))%2)s.push(n[0]);else{var f,h=n[0],p=h.length;switch(h){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":f="(\\D+)";break;case"tt":case"t":f="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":f="(\\d{"+p+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":f="(\\d\\d?)";break;case"zzz":f="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":f="([+-]?\\d\\d?)";break;case"/":f="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+h+"'."}f&&s.push(f),o.push(n[0])}}this.appendPreOrPostMatch(i.slice(l),s),s.push("$");var g={regExp:s.join("").replace(/\s+/g,"\\s+"),groups:o};return r[t]=g},outOfRange:function(e,t,r){return e<t||r<e},expandYear:function(e,t){var r,a,n=new Date,i=this.getEra(n);return t<100&&((r="string"==typeof(r=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(r,10):r)<(t+=(a=this.getEraYear(n,e,i))-a%100)&&(t-=100)),t},parsedate:function(e,t,r){null!=r&&null!=r||(r=this.defaultcalendar()),e=this.trim(e);var a=r,n=this.getparseregexp(a,t),i=new RegExp(n.regExp).exec(e);if(null===i)return null;for(var s,o=n.groups,l=null,d=null,u=null,c=null,f=null,h=0,p=0,g=0,m=0,y=null,v=!1,x=0,b=o.length;x<b;x++){var S=i[x+1];if(S){var O=o[x],w=O.length,A=parseInt(S,10);switch(O){case"dd":case"d":if(c=A,this.outOfRange(c,1,31))return null;break;case"MMM":case"MMMM":if(u=this.getMonthIndex(a,S,3===w),this.outOfRange(u,0,11))return null;break;case"M":case"MM":if(u=A-1,this.outOfRange(u,0,11))return null;break;case"y":case"yy":case"yyyy":if(d=w<4?this.expandYear(a,A):A,this.outOfRange(d,0,9999))return null;break;case"h":case"hh":if(12===(h=A)&&(h=0),this.outOfRange(h,0,11))return null;break;case"H":case"HH":if(h=A,this.outOfRange(h,0,23))return null;break;case"m":case"mm":if(p=A,this.outOfRange(p,0,59))return null;break;case"s":case"ss":if(g=A,this.outOfRange(g,0,59))return null;break;case"tt":case"t":if(!(v=a.PM&&(S===a.PM[0]||S===a.PM[1]||S===a.PM[2]))&&(!a.AM||S!==a.AM[0]&&S!==a.AM[1]&&S!==a.AM[2]))return null;break;case"f":case"ff":case"fff":if(m=A*Math.pow(10,3-w),this.outOfRange(m,0,999))return null;break;case"ddd":case"dddd":if(f=this.getDayIndex(a,S,3===w),this.outOfRange(f,0,6))return null;break;case"zzz":var _=S.split(/:/);if(2!==_.length)return null;if(s=parseInt(_[0],10),this.outOfRange(s,-12,13))return null;var T=parseInt(_[1],10);if(this.outOfRange(T,0,59))return null;y=60*s+(this.startsWith(S,"-")?-T:T);break;case"z":case"zz":if(s=A,this.outOfRange(s,-12,13))return null;y=60*s;break;case"g":case"gg":var N=S;if(!N||!a.eras)return null;N=this.trim(N.toLowerCase());for(var j=0,E=a.eras.length;j<E;j++)if(N===a.eras[j].name.toLowerCase()){l=j;break}if(null===l)return null}}}var M,C=new Date,D=a.convert,I=C.getFullYear();if(null===d?d=I:a.eras&&(d+=a.eras[l||0].offset),null===u&&(u=0),null===c&&(c=1),D){if(null===(C=D.toGregorian(d,u,c)))return null}else{if(C.setFullYear(d,u,c),C.getDate()!==c)return null;if(null!==f&&C.getDay()!==f)return null}return v&&h<12&&(h+=12),C.setHours(h,p,g,m),null!==y&&(M=C.getMinutes()-(y+C.getTimezoneOffset()),C.setHours(C.getHours()+parseInt(M/60,10),M%60)),C},cleardatescache:function(){this.datescache=new Array},formatDate:function(e,t,r){return this.formatdate(e,t,r)},formatdate:function(e,t,r){if(null!=r&&null!=r||(r=this.defaultcalendar()),"string"==typeof e)return e;var a=e.toString()+"_"+t;if(this.datescache&&this.datescache[a]&&-1==t.indexOf("f"))return this.datescache[a];if(!t||!t.length||"i"===t){var n=this.formatDate(e,r.patterns.F,r);return n}var i=r.eras,s="s"===t;t=this.expandFormat(r,t),n=[];var o,l,d=["0","00","000"],u=0,c=this.getTokenRegExp();function f(e,t){var r,a=e+"";return 1<t&&a.length<t?(r=d[t-2]+a).substr(r.length-t,t):r=a}function h(e,t){if(l)return l[t];if(null!=e.getMonth)switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate()}}for(;;){var p=c.lastIndex,g=c.exec(t),m=t.slice(p,g?g.index:t.length);if(u+=this.appendPreOrPostMatch(m,n),!g)break;if(u%2)n.push(g[0]);else{var y=g[0],v=y.length;switch(y){case"ddd":case"dddd":var x=3===v?r.days.namesAbbr:r.days.names;n.push(x[e.getDay()]);break;case"d":case"dd":n.push(f(h(e,2),v));break;case"MMM":case"MMMM":var b=h(e,1);n.push(r.months[3===v?"namesAbbr":"names"][b]);break;case"M":case"MM":n.push(f(h(e,1)+1,v));break;case"y":case"yy":case"yyyy":b=this.getEraYear(e,r,this.getEra(e,i),s),v<4&&(b%=100),n.push(f(b,v));break;case"h":case"hh":0===(o=e.getHours()%12)&&(o=12),n.push(f(o,v));break;case"H":case"HH":n.push(f(e.getHours(),v));break;case"m":case"mm":n.push(f(e.getMinutes(),v));break;case"s":case"ss":n.push(f(e.getSeconds(),v));break;case"t":case"tt":b=e.getHours()<12?r.AM?r.AM[0]:" ":r.PM?r.PM[0]:" ",n.push(1===v?b.charAt(0):b);break;case"f":case"ff":case"fff":n.push(f(e.getMilliseconds(),3).substr(0,v));break;case"z":case"zz":o=e.getTimezoneOffset()/60,n.push((o<=0?"+":"-")+f(Math.floor(Math.abs(o)),v));break;case"zzz":o=e.getTimezoneOffset()/60,n.push((o<=0?"+":"-")+f(Math.floor(Math.abs(o)),2)+":"+f(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":r.eras&&n.push(r.eras[this.getEra(e,i)].name);break;case"/":n.push(r["/"]);break;default:throw"Invalid date format pattern '"+y+"'."}}}var S=n.join("");return this.datescache||(this.datescache=new Array),this.datescache[a]=S}}),P.jqx.data={};var A,t,_=/#.*$/,T=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,N=/^(?:GET|HEAD)$/,j=/^\/\//,E=/\?/,M=/([?&])_=[^&]*/,C=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,D=/\s+/,I=(P.fn.load,{}),F={},U=["*/"]+["*"];try{t=location.href}catch(e){(t=document.createElement("a")).href="",t=t.href}function e(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var r,a,n=e.toLowerCase().split(D),i=0,s=n.length;if(P.isFunction(t))for(;i<s;i++)r=n[i],(a=/^\+/.test(r))&&(r=r.substr(1)||"*"),(o[r]=o[r]||[])[a?"unshift":"push"](t)}}function L(e,t,r,a,n,i){(i=i||{})[n=n||t.dataTypes[0]]=!0;for(var s,o=e[n],l=0,d=o?o.length:0,u=e===I;l<d&&(u||!s);l++)"string"==typeof(s=o[l](t,r,a))&&(s=!u||i[s]?void 0:(t.dataTypes.unshift(s),L(e,t,r,a,s,i)));return!u&&s||i["*"]||(s=L(e,t,r,a,"*",i)),s}function r(e,t){var r,a,n=P.jqx.data.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:a=a||{})[r]=t[r]);a&&P.extend(!0,e,a)}A=C.exec(t.toLowerCase())||[],P.extend(P.jqx.data,{ajaxSetup:function(e,t){return t?r(e,P.jqx.data.ajaxSettings):(t=e,e=P.jqx.data.ajaxSettings),r(e,t),e},ajaxSettings:{url:t,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(A[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":U},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":P.parseJSON,"text xml":P.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:e(I),ajaxTransport:e(F),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var u,c,r,f,h,a,p,n,i,s,g=P.jqx.data.ajaxSetup({},t),m=g.context||g,y=m!==g&&(m.nodeType||m instanceof P)?P(m):P.event,v=P.Deferred(),x=P.Callbacks("once memory"),b=g.statusCode||{},o={},l={},S=0,d="canceled",O={readyState:0,setRequestHeader:function(e,t){var r;return S||(r=e.toLowerCase(),e=l[r]=l[r]||e,o[e]=t),this},getAllResponseHeaders:function(){return 2===S?c:null},getResponseHeader:function(e){var t;if(2===S){if(!r)for(r={};t=T.exec(c);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return void 0===t?null:t},overrideMimeType:function(e){return S||(g.mimeType=e),this},abort:function(e){return e=e||d,f&&f.abort(e),w(0,e),this}};function w(e,t,r,a){var n,i,s,o,l,d=t;2!==S&&(S=2,h&&clearTimeout(h),f=void 0,c=a||"",O.readyState=0<e?4:0,r&&(o=function(e,t,r){var a,n,i,s,o=e.contents,l=e.dataTypes,d=e.responseFields;for(n in d)n in r&&(t[d[n]]=r[n]);for(;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("content-type"));if(a)for(n in o)if(o[n]&&o[n].test(a)){l.unshift(n);break}if(l[0]in r)i=l[0];else{for(n in r){if(!l[0]||e.converters[n+" "+l[0]]){i=n;break}s=s||n}i=i||s}if(i)return i!==l[0]&&l.unshift(i),r[i]}(g,O,r)),200<=e&&e<300||304===e?(g.ifModified&&((l=O.getResponseHeader("Last-Modified"))&&(P.lastModified[u]=l),(l=O.getResponseHeader("Etag"))&&(P.etag[u]=l)),n=304===e?(d="notmodified",!0):(d=(n=function(e,t){var r,a,n,i,s=e.dataTypes.slice(),o=s[0],l={},d=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(s[1])for(r in e.converters)l[r.toLowerCase()]=e.converters[r];for(;n=s[++d];)if("*"!==n){if("*"!==o&&o!==n){if(!(r=l[o+" "+n]||l["* "+n]))for(a in l)if((i=a.split(" "))[1]===n&&(r=l[o+" "+i[0]]||l["* "+i[0]])){!0===r?r=l[a]:!0!==l[a]&&(n=i[0],s.splice(d--,0,n));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+o+" to "+n}}}o=n}return{state:"success",data:t}}(g,o)).state,i=n.data,!(s=n.error))):(s=d)&&!e||(d="error",e<0&&(e=0)),O.status=e,O.statusText=(t||d)+"",n?v.resolveWith(m,[i,d,O]):v.rejectWith(m,[O,d,s]),O.statusCode(b),b=void 0,p&&y.trigger("ajax"+(n?"Success":"Error"),[O,g,n?i:s]),x.fireWith(m,[O,d]),p&&(y.trigger("ajaxComplete",[O,g]),--P.active||P.event.trigger("ajaxStop")))}if(v.promise(O),O.success=O.done,O.error=O.fail,O.complete=x.add,O.statusCode=function(e){var t;if(e)if(S<2)for(t in e)b[t]=[b[t],e[t]];else t=e[O.status],O.always(t);return this},g.url=((e||g.url)+"").replace(_,"").replace(j,A[1]+"//"),g.dataTypes=P.trim(g.dataType||"*").toLowerCase().split(D),null==g.crossDomain&&(a=C.exec(g.url.toLowerCase()),g.crossDomain=!(!a||a[1]===A[1]&&a[2]===A[2]&&(a[3]||("http:"===a[1]?80:443))==(A[3]||("http:"===A[1]?80:443)))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=P.param(g.data,g.traditional)),L(I,g,t,O),2===S)return O;for(n in p=g.global,g.type=g.type.toUpperCase(),g.hasContent=!N.test(g.type),p&&0==P.active++&&P.event.trigger("ajaxStart"),g.hasContent||(g.data&&(g.url+=(E.test(g.url)?"&":"?")+g.data,delete g.data),u=g.url,!1===g.cache&&(i=(new Date).getTime(),s=g.url.replace(M,"$1_="+i),g.url=s+(s===g.url?(E.test(g.url)?"&":"?")+"_="+i:""))),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&O.setRequestHeader("Content-Type",g.contentType),g.ifModified&&(u=u||g.url,P.lastModified[u]&&O.setRequestHeader("If-Modified-Since",P.lastModified[u]),P.etag[u]&&O.setRequestHeader("If-None-Match",P.etag[u])),O.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+U+"; q=0.01":""):g.accepts["*"]),g.headers)O.setRequestHeader(n,g.headers[n]);if(g.beforeSend&&(!1===g.beforeSend.call(m,O,g)||2===S))return O.abort();for(n in d="abort",{success:1,error:1,complete:1})O[n](g[n]);if(f=L(F,g,t,O)){O.readyState=1,p&&y.trigger("ajaxSend",[O,g]),g.async&&0<g.timeout&&(h=setTimeout(function(){O.abort("timeout")},g.timeout));try{S=1,f.send(o,w)}catch(e){if(!(S<2))throw e;w(-1,e)}}else w(-1,"No Transport");return O},active:0,lastModified:{},etag:{}});var c=[],f=/\?/,h=/(=)\?(?=&|$)|\?\?/,a=(new Date).getTime();P.jqx.data.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=c.pop()||P.expando+"_"+a++;return this[e]=!0,e}}),P.jqx.data.ajaxPrefilter("json jsonp",function(e,t,r){var a,n,i,s=e.data,o=e.url,l=!1!==e.jsonp,d=l&&h.test(o),u=l&&!d&&"string"==typeof s&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&h.test(s);if("jsonp"===e.dataTypes[0]||d||u)return a=e.jsonpCallback=P.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,n=window[a],d?e.url=o.replace(h,"$1"+a):u?e.data=s.replace(h,"$1"+a):l&&(e.url+=(f.test(o)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return i||P.error(a+" was not called"),i[0]},e.dataTypes[0]="json",window[a]=function(){i=arguments},r.always(function(){window[a]=n,e[a]&&(e.jsonpCallback=t.jsonpCallback,c.push(a)),i&&P.isFunction(n)&&n(i[0]),i=n=void 0}),"script"}),P.jqx.data.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return P.globalEval(e),e}}}),P.jqx.data.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),P.jqx.data.ajaxTransport("script",function(t){if(t.crossDomain){var a,n=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(e,r){(a=document.createElement("script")).async="async",t.scriptCharset&&(a.charset=t.scriptCharset),a.src=t.url,a.onload=a.onreadystatechange=function(e,t){!t&&a.readyState&&!/loaded|complete/.test(a.readyState)||(a.onload=a.onreadystatechange=null,n&&a.parentNode&&n.removeChild(a),a=void 0,t||r(200,"success"))},n.insertBefore(a,n.firstChild)},abort:function(){a&&a.onload(0,1)}}}});var p,n,g=!!window.ActiveXObject&&function(){for(var e in p)p[e](0,1)},i=0;function s(){try{return new window.XMLHttpRequest}catch(e){}}P.jqx.data.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&s()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:s,n=P.jqx.data.ajaxSettings.xhr(),P.extend(P.support,{ajax:!!n,cors:!!n&&"withCredentials"in n}),P.support||(P.support={ajax:!0}),P.support.ajax&&P.jqx.data.ajaxTransport(function(u){var c;if(!u.crossDomain||P.support.cors)return{send:function(e,o){var l,t,d=u.xhr();if(u.username?d.open(u.type,u.url,u.async,u.username,u.password):d.open(u.type,u.url,u.async),u.xhrFields)for(t in u.xhrFields)d[t]=u.xhrFields[t];u.mimeType&&d.overrideMimeType&&d.overrideMimeType(u.mimeType),u.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(t in e)d.setRequestHeader(t,e[t])}catch(e){}d.send(u.hasContent&&u.data||null),c=function(e,t){var r,a,n,i,s;try{if(c&&(t||4===d.readyState))if(c=void 0,l&&(d.onreadystatechange=function(){},g&&delete p[l]),t)4!==d.readyState&&d.abort();else{r=d.status,n=d.getAllResponseHeaders(),i={},(s=d.responseXML)&&s.documentElement&&(i.xml=s);try{i.text=d.responseText}catch(e){}try{a=d.statusText}catch(e){a=""}r||!u.isLocal||u.crossDomain?1223===r&&(r=204):r=i.text?200:404}}catch(e){t||o(-1,e)}i&&o(r,a,i,n)},u.async?4===d.readyState?setTimeout(c,0):(l=++i,g&&(p||(p={},P(window).unload(g)),p[l]=c),d.onreadystatechange=c):c()},abort:function(){c&&c(0,1)}}}),P.jqx.filter=function(){this.operator="and";var r=["EMPTY","NOT_EMPTY","CONTAINS","CONTAINS_CASE_SENSITIVE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_CASE_SENSITIVE","STARTS_WITH","STARTS_WITH_CASE_SENSITIVE","ENDS_WITH","ENDS_WITH_CASE_SENSITIVE","EQUAL","EQUAL_CASE_SENSITIVE","NULL","NOT_NULL"],a=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],n=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],i=["EQUAL","NOT_EQUAL"],s=new Array,o=new Array;this.evaluate=function(e){for(var t=!0,r=0;r<s.length;r++)var a=s[r].evaluate(e),t=0==r?a:1==o[r]||"or"==o[r]?t||a:t&&a;return t},this.getfilterscount=function(){return s.length},this.setoperatorsbyfiltertype=function(e,t){switch(e){case"numericfilter":a=t;break;case"stringfilter":r=t;break;case"datefilter":n=t;break;case"booleanfilter":i=t}},this.getoperatorsbyfiltertype=function(e){var t=new Array;switch(e){case"numericfilter":t=a.slice(0);break;case"stringfilter":t=r.slice(0);break;case"datefilter":t=n.slice(0);break;case"booleanfilter":t=i.slice(0)}return t};function l(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+"-"+e()+"-"+e()}this.createfilter=function(e,t,r,a,n,i){if(null==e||null==e)return null;switch(e){case"numericfilter":return new c(t,r.toUpperCase());case"stringfilter":return new d(t,r.toUpperCase());case"datefilter":return new f(t,r.toUpperCase(),n,i);case"booleanfilter":return new u(t,r.toUpperCase());case"custom":return new h(t,r.toUpperCase(),a)}throw new Error("jqxGrid: There is no such filter type. The available filter types are: 'numericfilter', 'stringfilter', 'datefilter' and 'booleanfilter'")},this.getfilters=function(){for(var e=new Array,t=0;t<s.length;t++){var r={value:s[t].filtervalue,condition:s[t].comparisonoperator,operator:o[t],type:s[t].type};s[t].data&&(r.id=s[t].data),e[t]=r}return e},this.addfilter=function(e,t){(s[s.length]=t).key=l(),o[o.length]=e},this.removefilter=function(e){for(var t=0;t<s.length;t++)if(s[t].key==e.key){s.splice(t,1),o.splice(t,1);break}},this.getoperatorat=function(e){return null==e||null==e||e<0||e>s.length?null:o[e]},this.setoperatorat=function(e,t){return null==e||null==e||e<0||e>s.length?null:void(o[t]=t)},this.getfilterat=function(e){return null==e||null==e||e<0||e>s.length?null:s[e]},this.setfilterat=function(e,t){return null==e||null==e||e<0||e>s.length?null:(t.key=l(),void(s[e]=t))},this.clear=function(){s=new Array,o=new Array};var d=function(e,t){this.filtervalue=e,this.comparisonoperator=t,this.type="stringfilter",this.evaluate=function(e){var t=this.filtervalue,r=this.comparisonoperator;if(null==e||null==e||""==e){if("NULL"==r)return!0;if("NOT_NULL"==r)return!1;if("EQUAL"==r&&e==t)return!0;if("NOT_EQUAL"==r&&e!=t)return!0;if("EMPTY"!=r)return!1;if(""==e)return!0}var a="";try{a=e.toString()}catch(e){return!0}function n(e,t){switch(r){case"EQUAL":return P.jqx.string.equalsIgnoreCase(e,t);case"EQUAL_CASE_SENSITIVE":return P.jqx.string.equals(e,t);case"NOT_EQUAL":return!P.jqx.string.equalsIgnoreCase(e,t);case"NOT_EQUAL_CASE_SENSITIVE":return!P.jqx.string.equals(e,t);case"CONTAINS":return P.jqx.string.containsIgnoreCase(e,t);case"CONTAINS_CASE_SENSITIVE":return P.jqx.string.contains(e,t);case"DOES_NOT_CONTAIN":return!P.jqx.string.containsIgnoreCase(e,t);case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!P.jqx.string.contains(e,t);case"EMPTY":return""==e;case"NOT_EMPTY":return""!=e;case"NOT_NULL":return null!=e;case"STARTS_WITH":return P.jqx.string.startsWithIgnoreCase(e,t);case"ENDS_WITH":return P.jqx.string.endsWithIgnoreCase(e,t);case"ENDS_WITH_CASE_SENSITIVE":return P.jqx.string.endsWith(e,t);case"STARTS_WITH_CASE_SENSITIVE":return P.jqx.string.startsWith(e,t);default:return!1}}var i=new Array;if(t&&t.indexO&&"NOT_EQUAL"!==r&&(0<=t.indexOf("|")||0<=t.indexOf(" AND ")||0<=t.indexOf(" OR ")||0<=t.indexOf(" and ")||0<=t.indexOf(" or "))){if(g=n(a,t))return g;var s=0<=t.indexOf(" AND ")?t.split(" AND "):new Array,o=0<=t.indexOf(" OR ")?t.split(" OR "):new Array,l=0<=t.indexOf(" and ")?t.split(" and "):new Array,d=0<=t.indexOf(" or ")?t.split(" or "):new Array,u=0<=t.indexOf("|")?t.split("|"):new Array;if(0<u.length)for(var c=0;c<u.length;c++)u[c]=P.trim(u[c]);var f=0<=t.indexOf(" ")?t.split(" "):new Array;if(0<f.length)for(c=0;c<f.length;c++)f[c]=P.trim(f[c]);if(s=(s=s.concat(f)).concat(l),o=(o=o.concat(u)).concat(d),0<s.length)for(c=0;c<s.length;c++)0<=!s[c].indexOf(" OR ")&&i.push(s[c]);if(0<o.length)for(c=0;c<o.length;c++)0<=!o[c].indexOf(" AND ")&&i.push(o[c]);for(var h=void 0,p=0;p<i.length;p++)var g=n(a,e=i[p]),m=p<s.length?"and":"or",h=null==h?g:"or"==m?h||g:h&&g;return h}return n(a,t)}},u=function(e,t){this.filtervalue=e,this.comparisonoperator=t,this.type="booleanfilter",this.evaluate=function(e){var t=this.filtervalue,r=this.comparisonoperator;if(null==e||null==e)return"NULL"==r;var a=e;switch(r){case"EQUAL":return a==t||a.toString()==t.toString();case"NOT_EQUAL":return a!=t&&a.toString()!=t.toString();default:return!1}}},c=function(e,t){this.filtervalue=e,this.comparisonoperator=t,this.type="numericfilter",this.evaluate=function(t){var e=this.filtervalue,r=this.comparisonoperator;if(null==t||""===t){if("NOT_NULL"==r)return!1;if("NULL"==r)return!0;switch(r){case"EQUAL":return t==e;case"NOT_EQUAL":return t!=e}return!1}if("NULL"==r)return!1;if("NOT_NULL"==r)return!0;var a=t;try{a=parseFloat(a)}catch(e){if(""!=t.toString())return!1}function n(e,t){switch(r){case"EQUAL":return e==t;case"NOT_EQUAL":return e!=t;case"GREATER_THAN":return t<e;case"GREATER_THAN_OR_EQUAL":return t<=e;case"LESS_THAN":return e<t;case"LESS_THAN_OR_EQUAL":return e<=t;case"STARTS_WITH":return P.jqx.string.startsWithIgnoreCase(e.toString(),t.toString());case"ENDS_WITH":return P.jqx.string.endsWithIgnoreCase(e.toString(),t.toString());case"ENDS_WITH_CASE_SENSITIVE":return P.jqx.string.endsWith(e.toString(),t.toString());case"STARTS_WITH_CASE_SENSITIVE":return P.jqx.string.startsWith(e.toString(),t.toString());case"CONTAINS":return P.jqx.string.containsIgnoreCase(e.toString(),t.toString());case"CONTAINS_CASE_SENSITIVE":return P.jqx.string.contains(e.toString(),t.toString());case"DOES_NOT_CONTAIN":return!P.jqx.string.containsIgnoreCase(e.toString(),t.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!P.jqx.string.contains(e.toString(),t.toString());default:return!0}}var i=new Array;if(e&&e.indexOf&&(e=e.replace("$","")),e.indexOf&&(0<=e.indexOf("|")||0<=e.indexOf(" AND ")||0<=e.indexOf(" OR ")||0<=e.indexOf(" and ")||0<=e.indexOf(" or "))){var s=n(a,e);if(s)return s;var o=0<=(e=e.toString()).indexOf(" AND ")?e.split(" AND "):new Array,l=0<=e.indexOf(" OR ")?e.split(" OR "):new Array,d=0<=e.indexOf(" and ")?e.split(" and "):new Array,u=0<=e.indexOf(" or ")?e.split(" or "):new Array,o=o.concat(d),l=l.concat(u),c=0<=e.indexOf("|")?e.split("|"):new Array;if(0<c.length)for(var f=0;f<c.length;f++)c[f]=P.trim(c[f]);if(l=l.concat(c),0<o.length)for(f=0;f<o.length;f++)0<=!o[f].indexOf(" OR ")&&i.push(o[f]);if(0<l.length)for(f=0;f<l.length;f++)0<=!l[f].indexOf(" AND ")&&i.push(l[f]);for(var h,p=void 0,g=0;g<i.length;g++){(t=i[g])&&t.indexOf&&0<=t.indexOf("..")?2==(h=t.toString().split("..")).length&&(s=a>=h[0]&&a<=h[1]):s=n(a,t);var m=g<o.length?"and":"or",p=null==p?s:"or"==m?p||s:p&&s}return p}return e&&e.indexOf&&0<=e.indexOf("..")&&2==(i=e.toString().split("..")).length?a>=i[0]&&a<=i[1]:n(a,e)}},f=function(e,t,S,O){this.filtervalue=e,this.type="datefilter";var r,a,n,w=this;null!=S&&null!=O?null!=(r=P.jqx.dataFormat.parsedate(e,S,O))?this.filterdate=r:null!=(a=P.jqx.dataFormat.tryparsedate(e,O))&&(this.filterdate=a):"NaN"==(n=new Date(e)).toString()||"Invalid Date"==n.toString()?this.filterdate=P.jqx.dataFormat.tryparsedate(e):this.filterdate=n,this.filterdate||("NaN"==(n=new Date(e)).toString()||"Invalid Date"==n.toString()?this.filterdate=P.jqx.dataFormat.tryparsedate(e):this.filterdate=n),this.comparisonoperator=t,this.evaluate=function(t){var e=this.filtervalue,r=this.comparisonoperator;if(null==t||null==t||""==t){if("NOT_NULL"==r)return!1;if("NULL"==r)return!0;switch(r){case"EQUAL":return t==e;case"NOT_EQUAL":return t!=e}return!1}if("NULL"==r)return!1;if("NOT_NULL"==r)return!0;(n=new Date).setFullYear(1900,0,1),n.setHours(12,0,0,0);try{var a=new Date(t),n=t="NaN"==a.toString()||"Invalid Date"==a.toString()?P.jqx.dataFormat.tryparsedate(t):a,i=!1;null!=S&&null!=O&&(0<=S.indexOf("t")||0<=S.indexOf("T")||0<=S.indexOf(":")||0<=S.indexOf("f"))&&(i=!0,e&&-1==e.toString().indexOf(":")&&null!=(y=P.jqx.dataFormat.tryparsedate(e.toString()+":00",O))&&(w.filterdate=y)),null!=S&&(0<=S.indexOf("hh")||0<=S.indexOf("t"))&&(i=!0),i||(n.setHours(0),n.setMinutes(0),n.setSeconds(0))}catch(e){if(""!=t.toString())return!1}if(null!=w.filterdate)e=w.filterdate;else if(e&&e.indexOf&&(-1!=e.indexOf(":")||!isNaN(parseInt(e)))){var s=new Date(n);s.setHours(12,0,0,0);for(var o=e.split(":"),l=0;l<o.length;l++)0==l&&s.setHours(o[l]),1==l&&s.setMinutes(o[l]),2==l&&s.setSeconds(o[l]);e=s}i&&e&&e.setFullYear&&n&&n.getFullYear&&-1==S.indexOf("d")&&-1==S.indexOf("M")&&-1==S.indexOf("y")&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate());function d(e,t){switch(null==e&&(e=""),r){case"EQUAL":return e.toString()==t.toString();case"NOT_EQUAL":return e.toString()!=t.toString();case"GREATER_THAN":return t<e;case"GREATER_THAN_OR_EQUAL":return t<=e;case"LESS_THAN":return e<t;case"LESS_THAN_OR_EQUAL":return e<=t;case"STARTS_WITH":return P.jqx.string.startsWithIgnoreCase(e.toString(),t.toString());case"ENDS_WITH":return P.jqx.string.endsWithIgnoreCase(e.toString(),t.toString());case"ENDS_WITH_CASE_SENSITIVE":return P.jqx.string.endsWith(e.toString(),t.toString());case"STARTS_WITH_CASE_SENSITIVE":return P.jqx.string.startsWith(e.toString(),t.toString());case"CONTAINS":return P.jqx.string.containsIgnoreCase(e.toString(),t.toString());case"CONTAINS_CASE_SENSITIVE":return P.jqx.string.contains(e.toString(),t.toString());case"DOES_NOT_CONTAIN":return!P.jqx.string.containsIgnoreCase(e.toString(),t.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!P.jqx.string.contains(e.toString(),t.toString());default:return!0}}var u=new Array;if(e&&e.indexOf&&(0<=e.indexOf("|")||0<=e.indexOf(" AND ")||0<=e.indexOf(" OR ")||0<=e.indexOf(" and ")||0<=e.indexOf(" or "))){if(y=d(n,e))return y;var c=0<=e.indexOf(" AND ")?e.split(" AND "):new Array,f=0<=e.indexOf(" OR ")?e.split(" OR "):new Array,h=0<=e.indexOf(" and ")?e.split(" and "):new Array,p=0<=e.indexOf(" or ")?e.split(" or "):new Array,c=c.concat(h),f=f.concat(p),g=0<=e.indexOf("|")?e.split("|"):new Array;if(0<g.length)for(l=0;l<g.length;l++)g[l]=P.trim(g[l]);if(f=f.concat(g),0<c.length)for(l=0;l<c.length;l++)0<=!c[l].indexOf(" OR ")&&u.push(c[l]);if(0<f.length)for(l=0;l<f.length;l++)0<=!f[l].indexOf(" AND ")&&u.push(f[l]);for(var m,y,v=void 0,x=0;x<u.length;x++){(t=u[x])&&t.indexOf&&0<=t.indexOf("..")?2==(m=t.toString().split("..")).length&&(y=n>=m[0]&&n<=m[1]):y=d(n,t);var b=x<c.length?"and":"or",v=null==v?y:"or"==b?v||y:v&&y}return v}return e&&e.indexOf&&0<=e.indexOf("..")&&2==(u=e.toString().split("..")).length?n>=u[0]&&n<=u[1]:d(n,e)}},h=function(e,t,r){this.filtervalue=e,this.comparisonoperator=t,this.evaluate=function(e,t){return r(this.filtervalue,e,this.comparisonoperator)}}}}(jqxBaseFramework);