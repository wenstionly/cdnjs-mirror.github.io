var __extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();import{Color}from"./Drawing/Color";import{Actor}from"./Actor";import{Configurable}from"./Configurable";import{Vector}from"./Algebra";import{CollisionType}from"./Collision/CollisionType";export var FontUnit;!function(t){t[t.Em=0]="Em",t[t.Rem=1]="Rem",t[t.Px=2]="Px",t[t.Pt=3]="Pt",t[t.Percent=4]="Percent"}(FontUnit||(FontUnit={}));export var TextAlign;!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Start=3]="Start",t[t.End=4]="End"}(TextAlign||(TextAlign={}));export var BaseAlign;!function(t){t[t.Top=0]="Top",t[t.Hanging=1]="Hanging",t[t.Middle=2]="Middle",t[t.Alphabetic=3]="Alphabetic",t[t.Ideographic=4]="Ideographic",t[t.Bottom=5]="Bottom"}(BaseAlign||(BaseAlign={}));export var FontStyle;!function(t){t[t.Normal=0]="Normal",t[t.Italic=1]="Italic",t[t.Oblique=2]="Oblique"}(FontStyle||(FontStyle={}));var LabelImpl=function(t){function e(e,o,n,i,r){var a=t.call(this,e&&"object"==typeof e?e:{pos:new Vector(o,n)})||this;a.bold=!1,a.fontSize=10,a.fontStyle=FontStyle.Normal,a.fontUnit=FontUnit.Px,a.textAlign=TextAlign.Left,a.baseAlign=BaseAlign.Bottom,a.letterSpacing=0,a.caseInsensitive=!0;var l="";return e&&"object"==typeof e?(i=e.fontFamily,r=e.spriteFont,l=e.text):l=e,a.text=l||"",a.color=Color.Black,a.spriteFont=r,a.body.collider.type=CollisionType.PreventCollision,a.fontFamily=i||"sans-serif",a._textShadowOn=!1,a._shadowOffsetX=0,a._shadowOffsetY=0,a}return __extends(e,t),e.prototype.getTextWidth=function(t){var e=t.font;t.font=this._fontString;var o=t.measureText(this.text).width;return t.font=e,o},e.prototype._lookupFontUnit=function(t){switch(t){case FontUnit.Em:return"em";case FontUnit.Rem:return"rem";case FontUnit.Pt:return"pt";case FontUnit.Px:return"px";case FontUnit.Percent:return"%";default:return"px"}},e.prototype._lookupTextAlign=function(t){switch(t){case TextAlign.Left:return"left";case TextAlign.Right:return"right";case TextAlign.Center:return"center";case TextAlign.End:return"end";case TextAlign.Start:default:return"start"}},e.prototype._lookupBaseAlign=function(t){switch(t){case BaseAlign.Alphabetic:return"alphabetic";case BaseAlign.Bottom:return"bottom";case BaseAlign.Hanging:return"hanging";case BaseAlign.Ideographic:return"ideographic";case BaseAlign.Middle:return"middle";case BaseAlign.Top:return"top";default:return"alphabetic"}},e.prototype._lookupFontStyle=function(t){var e=this.bold?" bold":"";switch(t){case FontStyle.Italic:return"italic"+e;case FontStyle.Normal:return"normal"+e;case FontStyle.Oblique:return"oblique"+e;default:return"normal"+e}},e.prototype.setTextShadow=function(t,e,o){this.spriteFont.setTextShadow(t,e,o)},e.prototype.useTextShadow=function(t){this.spriteFont.useTextShadow(t)},e.prototype.clearTextShadow=function(){this._textShadowOn=!1,this._shadowOffsetX=0,this._shadowOffsetY=0},e.prototype.update=function(e,o){t.prototype.update.call(this,e,o)},e.prototype.draw=function(e,o){e.save(),e.translate(this.pos.x,this.pos.y),e.scale(this.scale.x,this.scale.y),e.rotate(this.rotation),this._textShadowOn&&(e.save(),e.translate(this._shadowOffsetX,this._shadowOffsetY),this._fontDraw(e),e.restore()),this._fontDraw(e),t.prototype.draw.call(this,e,o),e.restore()},e.prototype._fontDraw=function(t){if(this.spriteFont)this.spriteFont.draw(t,this.text,0,0,{color:this.color.clone(),baseAlign:this.baseAlign,textAlign:this.textAlign,fontSize:this.fontSize,letterSpacing:this.letterSpacing,opacity:this.opacity});else{var e=t.textAlign,o=t.textBaseline;t.textAlign=this._lookupTextAlign(this.textAlign),t.textBaseline=this._lookupBaseAlign(this.baseAlign),this.color&&(this.color.a=this.opacity),t.fillStyle=this.color.toString(),t.font=this._fontString,this.maxWidth?t.fillText(this.text,0,0,this.maxWidth):t.fillText(this.text,0,0),t.textAlign=e,t.textBaseline=o}},Object.defineProperty(e.prototype,"_fontString",{get:function(){return this._lookupFontStyle(this.fontStyle)+" "+this.fontSize+this._lookupFontUnit(this.fontUnit)+" "+this.fontFamily},enumerable:!1,configurable:!0}),e.prototype.debugDraw=function(e){t.prototype.debugDraw.call(this,e)},e}(Actor);export{LabelImpl};var Label=function(t){function e(e,o,n,i,r){return t.call(this,e,o,n,i,r)||this}return __extends(e,t),e}(Configurable(LabelImpl));export{Label};