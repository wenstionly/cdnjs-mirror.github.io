import Vue from"vue";function isExist(t){return null!=t}function isFunction(t){return"function"==typeof t}function isNumber(t){return"number"==typeof t}function isString(t){return"string"==typeof t}function isBoolean(t){return"boolean"==typeof t}var EVENTS={MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",FOCUS:"focus",BLUR:"blur",CLICK:"click",INPUT:"input",KEY_DOWN:"keydown",KEY_UP:"keyup",KEY_PRESS:"keypress",RESIZE:"resize",SCROLL:"scroll",TOUCH_START:"touchstart",TOUCH_END:"touchend"};function on(t,e,r){t.addEventListener(e,r)}function off(t,e,r){t.removeEventListener(e,r)}function isElement(t){return t&&t.nodeType===Node.ELEMENT_NODE}function setDropdownPosition(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=document.documentElement,o=(window.pageXOffset||n.scrollLeft)-(n.clientLeft||0),s=(window.pageYOffset||n.scrollTop)-(n.clientTop||0),i=e.getBoundingClientRect(),a=t.getBoundingClientRect();t.style.right="auto",t.style.bottom="auto",r.menuRight?t.style.left=o+i.left+i.width-a.width+"px":t.style.left=o+i.left+"px",r.dropup?t.style.top=s+i.top-a.height-4+"px":t.style.top=s+i.top+i.height+"px"}function focus(t){isElement(t)&&(!t.getAttribute("tabindex")&&t.setAttribute("tabindex","-1"),t.focus())}var DEFAULT_TAG="div",Dropdown={render:function(t){return t(this.tag,{class:{"btn-group":this.tag===DEFAULT_TAG,dropdown:!this.dropup,dropup:this.dropup,open:this.show}},[this.$slots.default,t("ul",{class:{"dropdown-menu":!0,"dropdown-menu-right":this.menuRight},ref:"dropdown"},[this.$slots.dropdown])])},props:{tag:{type:String,default:DEFAULT_TAG},appendToBody:{type:Boolean,default:!1},value:Boolean,dropup:{type:Boolean,default:!1},menuRight:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},notCloseElements:Array,positionElement:null},data:function(){return{show:!1,triggerEl:void 0}},watch:{value:function(t){this.toggle(t)}},mounted:function(){this.initTrigger(),this.triggerEl&&(on(this.triggerEl,EVENTS.CLICK,this.toggle),on(this.triggerEl,EVENTS.KEY_DOWN,this.onKeyPress)),on(this.$refs.dropdown,EVENTS.KEY_DOWN,this.onKeyPress),on(window,EVENTS.CLICK,this.windowClicked),on(window,EVENTS.TOUCH_END,this.windowClicked),this.value&&this.toggle(!0)},beforeDestroy:function(){this.removeDropdownFromBody(),this.triggerEl&&(off(this.triggerEl,EVENTS.CLICK,this.toggle),off(this.triggerEl,EVENTS.KEY_DOWN,this.onKeyPress)),off(this.$refs.dropdown,EVENTS.KEY_DOWN,this.onKeyPress),off(window,EVENTS.CLICK,this.windowClicked),off(window,EVENTS.TOUCH_END,this.windowClicked)},methods:{onKeyPress:function(t){if(this.show){var e=this.$refs.dropdown,r=t.keyCode||t.which;if(27===r)this.toggle(!1),this.triggerEl&&this.triggerEl.focus();else if(13===r){var n=e.querySelector("li > a:focus");n&&n.click()}else if(38===r||40===r){t.preventDefault(),t.stopPropagation();var o=e.querySelector("li > a:focus"),s=e.querySelectorAll("li:not(.disabled) > a");if(o){for(var i=0;i<s.length;i++)if(o===s[i]){38===r&&i<s.length>0?focus(s[i-1]):40===r&&i<s.length-1&&focus(s[i+1]);break}}else focus(s[0])}}},initTrigger:function(){var t=this.$el.querySelector('[data-role="trigger"]')||this.$el.querySelector(".dropdown-toggle")||this.$el.firstChild;this.triggerEl=t&&t!==this.$refs.dropdown?t:null},toggle:function(t){this.disabled||(isBoolean(t)?this.show=t:this.show=!this.show,this.appendToBody&&(this.show?this.appendDropdownToBody():this.removeDropdownFromBody()),this.$emit("input",this.show))},windowClicked:function(t){var e=t.target;if(this.show&&e){var r=!1;if(this.notCloseElements)for(var n=0,o=this.notCloseElements.length;n<o;n++){var s=this.notCloseElements[n].contains(e),i=s;if(this.appendToBody){var a=this.$refs.dropdown.contains(e),l=this.notCloseElements.indexOf(this.$el)>=0;i=s||a&&l}if(i){r=!0;break}}var u=this.$refs.dropdown.contains(e),c=this.$el.contains(e)&&!u,d=u&&"touchend"===t.type;c||r||d||this.toggle(!1)}},appendDropdownToBody:function(){try{var t=this.$refs.dropdown;t.style.display="block",document.body.appendChild(t),setDropdownPosition(t,this.positionElement||this.$el,this)}catch(t){}},removeDropdownFromBody:function(){try{var t=this.$refs.dropdown;t.removeAttribute("style"),this.$el.appendChild(t)}catch(t){}}}},_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},defineProperty=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof$1(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof$1(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof$1(t)})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var inBrowser="undefined"!=typeof window;function freeze(t){return Array.isArray(t)||"object"===_typeof(t)?Object.freeze(t):t}function combinePassengers(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.reduce(function(t,r){var n=r.passengers[0],o="function"==typeof n?n(e):r.passengers;return t.concat(o)},[])}function stableSort(t,e){return t.map(function(t,e){return[e,t]}).sort(function(t,r){return e(t[1],r[1])||t[0]-r[0]}).map(function(t){return t[1]})}function pick(t,e){return e.reduce(function(e,r){return t.hasOwnProperty(r)&&(e[r]=t[r]),e},{})}var transports={},targets={},sources={},Wormhole=Vue.extend({data:function(){return{transports:transports,targets:targets,sources:sources,trackInstances:inBrowser}},methods:{open:function(t){if(inBrowser){var e=t.to,r=t.from,n=t.passengers,o=t.order,s=void 0===o?1/0:o;if(e&&r&&n){var i={to:e,from:r,passengers:freeze(n),order:s};-1===Object.keys(this.transports).indexOf(e)&&Vue.set(this.transports,e,[]);var a=this.$_getTransportIndex(i),l=this.transports[e].slice(0);-1===a?l.push(i):l[a]=i,this.transports[e]=stableSort(l,function(t,e){return t.order-e.order})}}},close:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.to,n=t.from;if(r&&(n||!1!==e)&&this.transports[r])if(e)this.transports[r]=[];else{var o=this.$_getTransportIndex(t);if(o>=0){var s=this.transports[r].slice(0);s.splice(o,1),this.transports[r]=s}}},registerTarget:function(t,e,r){inBrowser&&(this.trackInstances&&!r&&this.targets[t]&&console.warn("[portal-vue]: Target ".concat(t," already exists")),this.$set(this.targets,t,Object.freeze([e])))},unregisterTarget:function(t){this.$delete(this.targets,t)},registerSource:function(t,e,r){inBrowser&&(this.trackInstances&&!r&&this.sources[t]&&console.warn("[portal-vue]: source ".concat(t," already exists")),this.$set(this.sources,t,Object.freeze([e])))},unregisterSource:function(t){this.$delete(this.sources,t)},hasTarget:function(t){return!(!this.targets[t]||!this.targets[t][0])},hasSource:function(t){return!(!this.sources[t]||!this.sources[t][0])},hasContentFor:function(t){return!!this.transports[t]&&!!this.transports[t].length},$_getTransportIndex:function(t){var e=t.to,r=t.from;for(var n in this.transports[e])if(this.transports[e][n].from===r)return+n;return-1}}}),wormhole=new Wormhole(transports),_id=1,Portal=Vue.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(_id++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var t=this;this.$nextTick(function(){wormhole.registerSource(t.name,t)})},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){wormhole.unregisterSource(this.name),this.clear()},watch:{to:function(t,e){e&&e!==t&&this.clear(e),this.sendUpdate()}},methods:{clear:function(t){var e={from:this.name,to:t||this.to};wormhole.close(e)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(t){return"function"==typeof t?t(this.slotProps):t},sendUpdate:function(){var t=this.normalizeSlots();if(t){var e={from:this.name,to:this.to,passengers:_toConsumableArray(t),order:this.order};wormhole.open(e)}else this.clear()}},render:function(t){var e=this.$slots.default||this.$scopedSlots.default||[],r=this.tag;return e&&this.disabled?e.length<=1&&this.slim?this.normalizeOwnChildren(e)[0]:t(r,[this.normalizeOwnChildren(e)]):this.slim?t():t(r,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),PortalTarget=Vue.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:wormhole.transports,firstRender:!0}},created:function(){var t=this;this.$nextTick(function(){wormhole.registerTarget(t.name,t)})},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(t,e){wormhole.unregisterTarget(e),wormhole.registerTarget(t,this)}},mounted:function(){var t=this;this.transition&&this.$nextTick(function(){t.firstRender=!1})},beforeDestroy:function(){wormhole.unregisterTarget(this.name)},computed:{ownTransports:function(){var t=this.transports[this.name]||[];return this.multiple?t:0===t.length?[]:[t[t.length-1]]},passengers:function(){return combinePassengers(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var t=this.slim&&!this.transition;return t&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),t}},render:function(t){var e=this.noWrapper(),r=this.children(),n=this.transition||this.tag;return e?r[0]:this.slim&&!n?t():t(n,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},r)}}),_id$1=0,portalProps=["disabled","name","order","slim","slotProps","tag","to"],targetProps=["multiple","transition"],MountingPortal=Vue.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(_id$1++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!=typeof document){var t=document.querySelector(this.mountTo);if(t){var e=this.$props;if(wormhole.targets[e.name])e.bail?console.warn("[portal-vue]: Target ".concat(e.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=wormhole.targets[e.name];else{var r=e.append;if(r){var n="string"==typeof r?r:"DIV",o=document.createElement(n);t.appendChild(o),t=o}var s=pick(this.$props,targetProps);s.slim=this.targetSlim,s.tag=this.targetTag,s.slotProps=this.targetSlotProps,s.name=this.to,this.portalTarget=new PortalTarget({el:t,parent:this.$parent||this,propsData:s})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var t=this.portalTarget;if(this.append){var e=t.$el;e.parentNode.removeChild(e)}t.$destroy()},render:function(t){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),t();if(!this.$scopedSlots.manual){var e=pick(this.$props,portalProps);return t(Portal,{props:e,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var r=this.$scopedSlots.manual({to:this.to});return Array.isArray(r)&&(r=r[0]),r||t()}}),BEFORE_CHANGE_EVENT="before-change",Tabs={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("ul",{class:t.navClasses,attrs:{role:"tablist"}},[t._l(t.groupedTabs,function(e,n){return[e.tabs?r("dropdown",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!tab.hidden"}],class:t.getTabClasses(e),attrs:{role:"presentation",tag:"li"}},[r("a",{staticClass:"dropdown-toggle",attrs:{role:"tab",href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(e.group)+" "),r("span",{staticClass:"caret"})]),t._v(" "),r("template",{slot:"dropdown"},t._l(e.tabs,function(e){return r("li",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!subTab.hidden"}],class:t.getTabClasses(e,!0)},[r("a",{attrs:{href:"#"},on:{click:function(r){r.preventDefault(),t.select(t.tabs.indexOf(e))}}},[t._v(t._s(e.title))])])}),0)],2):r("li",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!tab.hidden"}],class:t.getTabClasses(e),attrs:{role:"presentation"}},[e.$slots.title?r("a",{attrs:{role:"tab",href:"#"},on:{click:function(r){r.preventDefault(),t.select(t.tabs.indexOf(e))}}},[r("portal-target",{attrs:{name:e._uid.toString()}})],1):e.htmlTitle?r("a",{attrs:{role:"tab",href:"#"},domProps:{innerHTML:t._s(e.title)},on:{click:function(r){r.preventDefault(),t.select(t.tabs.indexOf(e))}}}):e.title?r("a",{attrs:{role:"tab",href:"#"},domProps:{textContent:t._s(e.title)},on:{click:function(r){r.preventDefault(),t.select(t.tabs.indexOf(e))}}}):t._e()])]}),t._v(" "),!t.justified&&t.$slots["nav-right"]?r("li",{staticClass:"pull-right"},[t._t("nav-right")],2):t._e()],2),t._v(" "),r("div",{class:t.contentClasses},[t._t("default")],2)])},staticRenderFns:[],components:{Dropdown:Dropdown,PortalTarget:PortalTarget},props:{value:{type:Number,validator:function(t){return t>=0}},transitionDuration:{type:Number,default:150},justified:Boolean,pills:Boolean,stacked:Boolean,customNavClass:null,customContentClass:null},data:function(){return{tabs:[],activeIndex:0}},watch:{value:{immediate:!0,handler:function(t){isNumber(t)&&(this.activeIndex=t,this.selectCurrent())}},tabs:function(t){var e=this;t.forEach(function(t,r){t.transition=e.transitionDuration,r===e.activeIndex&&t.show()}),this.selectCurrent()}},computed:{navClasses:function(){var t={nav:!0,"nav-justified":this.justified,"nav-tabs":!this.pills,"nav-pills":this.pills,"nav-stacked":this.stacked&&this.pills},e=this.customNavClass;return isExist(e)?isString(e)?_extends({},t,defineProperty({},e,!0)):_extends({},t,e):t},contentClasses:function(){var t={"tab-content":!0},e=this.customContentClass;return isExist(e)?isString(e)?_extends({},t,defineProperty({},e,!0)):_extends({},t,e):t},groupedTabs:function(){var t=[],e={};return this.tabs.forEach(function(r){r.group?(e.hasOwnProperty(r.group)?t[e[r.group]].tabs.push(r):(t.push({tabs:[r],group:r.group}),e[r.group]=t.length-1),r.active&&(t[e[r.group]].active=!0),r.pullRight&&(t[e[r.group]].pullRight=!0)):t.push(r)}),t=t.map(function(t){return Array.isArray(t.tabs)&&(t.hidden=t.tabs.filter(function(t){return t.hidden}).length===t.tabs.length),t})}},methods:{getTabClasses:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={active:t.active,disabled:t.disabled,"pull-right":t.pullRight&&!e};return _extends(r,t.tabClasses)},selectCurrent:function(){var t=this,e=!1;this.tabs.forEach(function(r,n){n===t.activeIndex?(e=!r.active,r.active=!0):r.active=!1}),e&&this.$emit("change",this.activeIndex)},selectValidate:function(t){var e=this;isFunction(this.$listeners[BEFORE_CHANGE_EVENT])?this.$emit(BEFORE_CHANGE_EVENT,this.activeIndex,t,function(r){isExist(r)||e.$select(t)}):this.$select(t)},select:function(t){this.tabs[t].disabled||t===this.activeIndex||this.selectValidate(t)},$select:function(t){isNumber(this.value)?this.$emit("input",t):(this.activeIndex=t,this.selectCurrent())}}};export default Tabs;