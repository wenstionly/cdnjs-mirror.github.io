{"version":3,"file":"MultiSelect.js","sources":["../src/utils/objectUtils.js","../src/locale/lang/en-US.js","../src/locale/index.js","../src/mixins/localeMixin.js","../src/utils/domUtils.js","../src/components/dropdown/Dropdown.vue","../src/utils/arrayUtils.js","../src/components/select/MultiSelect.vue"],"sourcesContent":["export function isExist (obj) {\n  return typeof obj !== 'undefined' && obj !== null\n}\n\nexport function isFunction (obj) {\n  return typeof obj === 'function'\n}\n\nexport function isNumber (obj) {\n  return typeof obj === 'number'\n}\n\nexport function isString (obj) {\n  return typeof obj === 'string'\n}\n\nexport function isBoolean (obj) {\n  return typeof obj === 'boolean'\n}\n\nexport function isPromiseSupported () {\n  return typeof window !== 'undefined' && isExist(window.Promise)\n}\n","export default {\n  uiv: {\n    datePicker: {\n      clear: 'Clear',\n      today: 'Today',\n      month: 'Month',\n      month1: 'January',\n      month2: 'February',\n      month3: 'March',\n      month4: 'April',\n      month5: 'May',\n      month6: 'June',\n      month7: 'July',\n      month8: 'August',\n      month9: 'September',\n      month10: 'October',\n      month11: 'November',\n      month12: 'December',\n      year: 'Year',\n      week1: 'Mon',\n      week2: 'Tue',\n      week3: 'Wed',\n      week4: 'Thu',\n      week5: 'Fri',\n      week6: 'Sat',\n      week7: 'Sun'\n    },\n    timePicker: {\n      am: 'AM',\n      pm: 'PM'\n    },\n    modal: {\n      cancel: 'Cancel',\n      ok: 'OK'\n    },\n    multiSelect: {\n      placeholder: 'Select...',\n      filterPlaceholder: 'Search...'\n    }\n  }\n}\n","// https://github.com/ElemeFE/element/blob/dev/src/locale/index.js\nimport {isFunction, isExist} from '../utils/objectUtils'\nimport defaultLang from './lang/en-US'\n\nlet lang = defaultLang\n\nlet i18nHandler = function () {\n  const vuei18n = Object.getPrototypeOf(this).$t\n  if (isFunction(vuei18n)) {\n    try {\n      return vuei18n.apply(this, arguments)\n    } catch (err) {\n      //  vuei18n.apply doesn't work with 7.3.3 of vue-i18n\n      return this.$t(...arguments)\n    }\n  }\n}\n\nexport const t = function (path, options) {\n  options = options || {}\n\n  let value = i18nHandler.apply(this, arguments)\n  if (isExist(value) && !options.$$locale) {\n    return value\n  }\n  const array = path.split('.')\n  let current = options.$$locale || lang\n\n  for (let i = 0, j = array.length; i < j; i++) {\n    const property = array[i]\n    value = current[property]\n    if (i === j - 1) return value\n    if (!value) return ''\n    current = value\n  }\n  return ''\n}\n\nexport const use = function (l) {\n  lang = l || lang\n}\n\nexport const i18n = function (fn) {\n  i18nHandler = fn || i18nHandler\n}\n\nexport default {use, t, i18n}\n","import {t} from '../locale'\n\nexport default {\n  methods: {\n    t (...args) {\n      args[1] = Object.assign({ $$locale: this.locale }, args[1])\n      return t.apply(this, args)\n    }\n  },\n  props: {\n    locale: Object\n  }\n}\n","import {isExist, isString, isFunction} from './objectUtils'\n\nexport const EVENTS = {\n  MOUSE_ENTER: 'mouseenter',\n  MOUSE_LEAVE: 'mouseleave',\n  FOCUS: 'focus',\n  BLUR: 'blur',\n  CLICK: 'click',\n  INPUT: 'input',\n  KEY_DOWN: 'keydown',\n  KEY_UP: 'keyup',\n  KEY_PRESS: 'keypress',\n  RESIZE: 'resize',\n  SCROLL: 'scroll',\n  TOUCH_START: 'touchstart',\n  TOUCH_END: 'touchend'\n}\n\nexport const TRIGGERS = {\n  CLICK: 'click',\n  HOVER: 'hover',\n  FOCUS: 'focus',\n  HOVER_FOCUS: 'hover-focus',\n  OUTSIDE_CLICK: 'outside-click',\n  MANUAL: 'manual'\n}\n\nexport const PLACEMENTS = {\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left'\n}\n\nexport function isIE11 () {\n  return !!window.MSInputMethodContext && !!document.documentMode\n}\n\nexport function isIE10 () {\n  return window.navigator.appVersion.indexOf('MSIE 10') !== -1\n}\n\nexport function getComputedStyle (el) {\n  return window.getComputedStyle(el)\n}\n\nexport function getViewportSize () {\n  let width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)\n  let height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0)\n  return {width, height}\n}\n\nlet scrollbarWidth = null\nlet savedScreenSize = null\n\nexport function getScrollbarWidth (recalculate = false) {\n  let screenSize = getViewportSize()\n  // return directly when already calculated & not force recalculate & screen size not changed\n  if (scrollbarWidth !== null && !recalculate &&\n    screenSize.height === savedScreenSize.height && screenSize.width === savedScreenSize.width) {\n    return scrollbarWidth\n  }\n  if (document.readyState === 'loading') {\n    return null\n  }\n  const div1 = document.createElement('div')\n  const div2 = document.createElement('div')\n  div1.style.width = div2.style.width = div1.style.height = div2.style.height = '100px'\n  div1.style.overflow = 'scroll'\n  div2.style.overflow = 'hidden'\n  document.body.appendChild(div1)\n  document.body.appendChild(div2)\n  scrollbarWidth = Math.abs(div1.scrollHeight - div2.scrollHeight)\n  document.body.removeChild(div1)\n  document.body.removeChild(div2)\n  // save new screen size\n  savedScreenSize = screenSize\n  return scrollbarWidth\n}\n\nexport function on (element, event, handler) {\n  element.addEventListener(event, handler)\n}\n\nexport function off (element, event, handler) {\n  element.removeEventListener(event, handler)\n}\n\nexport function isElement (el) {\n  return el && el.nodeType === Node.ELEMENT_NODE\n}\n\nexport function removeFromDom (el) {\n  isElement(el) && isElement(el.parentNode) && el.parentNode.removeChild(el)\n}\n\nexport function ensureElementMatchesFunction () {\n  if (!Element.prototype.matches) {\n    Element.prototype.matches =\n      Element.prototype.matchesSelector ||\n      Element.prototype.mozMatchesSelector ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.oMatchesSelector ||\n      Element.prototype.webkitMatchesSelector ||\n      function (s) {\n        let matches = (this.document || this.ownerDocument).querySelectorAll(s)\n        let i = matches.length\n        while (--i >= 0 && matches.item(i) !== this) {\n        }\n        return i > -1\n      }\n  }\n}\n\nexport function addClass (el, className) {\n  if (!isElement(el)) {\n    return\n  }\n  if (el.className) {\n    let classes = el.className.split(' ')\n    if (classes.indexOf(className) < 0) {\n      classes.push(className)\n      el.className = classes.join(' ')\n    }\n  } else {\n    el.className = className\n  }\n}\n\nexport function removeClass (el, className) {\n  if (!isElement(el)) {\n    return\n  }\n  if (el.className) {\n    let classes = el.className.split(' ')\n    let newClasses = []\n    for (let i = 0, l = classes.length; i < l; i++) {\n      if (classes[i] !== className) {\n        newClasses.push(classes[i])\n      }\n    }\n    el.className = newClasses.join(' ')\n  }\n}\n\nexport function hasClass (el, className) {\n  if (!isElement(el)) {\n    return false\n  }\n  let classes = el.className.split(' ')\n  for (let i = 0, l = classes.length; i < l; i++) {\n    if (classes[i] === className) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function setDropdownPosition (dropdown, trigger, options = {}) {\n  let doc = document.documentElement\n  let containerScrollLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n  let containerScrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n  let rect = trigger.getBoundingClientRect()\n  let dropdownRect = dropdown.getBoundingClientRect()\n  dropdown.style.right = 'auto'\n  dropdown.style.bottom = 'auto'\n  if (options.menuRight) {\n    dropdown.style.left = containerScrollLeft + rect.left + rect.width - dropdownRect.width + 'px'\n  } else {\n    dropdown.style.left = containerScrollLeft + rect.left + 'px'\n  }\n  if (options.dropup) {\n    dropdown.style.top = containerScrollTop + rect.top - dropdownRect.height - 4 + 'px'\n  } else {\n    dropdown.style.top = containerScrollTop + rect.top + rect.height + 'px'\n  }\n}\n\nexport function isAvailableAtPosition (trigger, popup, placement) {\n  let triggerRect = trigger.getBoundingClientRect()\n  let popupRect = popup.getBoundingClientRect()\n  let viewPortSize = getViewportSize()\n  let top = true\n  let right = true\n  let bottom = true\n  let left = true\n  switch (placement) {\n    case PLACEMENTS.TOP:\n      top = triggerRect.top >= popupRect.height\n      left = triggerRect.left + triggerRect.width / 2 >= popupRect.width / 2\n      right = triggerRect.right - triggerRect.width / 2 + popupRect.width / 2 <= viewPortSize.width\n      break\n    case PLACEMENTS.BOTTOM:\n      bottom = triggerRect.bottom + popupRect.height <= viewPortSize.height\n      left = triggerRect.left + triggerRect.width / 2 >= popupRect.width / 2\n      right = triggerRect.right - triggerRect.width / 2 + popupRect.width / 2 <= viewPortSize.width\n      break\n    case PLACEMENTS.RIGHT:\n      right = triggerRect.right + popupRect.width <= viewPortSize.width\n      top = triggerRect.top + triggerRect.height / 2 >= popupRect.height / 2\n      bottom = triggerRect.bottom - triggerRect.height / 2 + popupRect.height / 2 <= viewPortSize.height\n      break\n    case PLACEMENTS.LEFT:\n      left = triggerRect.left >= popupRect.width\n      top = triggerRect.top + triggerRect.height / 2 >= popupRect.height / 2\n      bottom = triggerRect.bottom - triggerRect.height / 2 + popupRect.height / 2 <= viewPortSize.height\n      break\n  }\n  return top && right && bottom && left\n}\n\nexport function setTooltipPosition (tooltip, trigger, placement, auto, appendToSelector, viewport) {\n  if (!isElement(tooltip) || !isElement(trigger)) {\n    return\n  }\n  const isPopover = tooltip && tooltip.className && tooltip.className.indexOf('popover') >= 0\n  let containerScrollTop\n  let containerScrollLeft\n  if (!isExist(appendToSelector) || appendToSelector === 'body') {\n    const doc = document.documentElement\n    containerScrollLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n    containerScrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n  } else {\n    const container = document.querySelector(appendToSelector)\n    containerScrollLeft = container.scrollLeft\n    containerScrollTop = container.scrollTop\n  }\n  // auto adjust placement\n  if (auto) {\n    // Try: right -> bottom -> left -> top\n    // Cause the default placement is top\n    let placements = [PLACEMENTS.RIGHT, PLACEMENTS.BOTTOM, PLACEMENTS.LEFT, PLACEMENTS.TOP]\n    // The class switch helper function\n    const changePlacementClass = (placement) => {\n      // console.log(placement)\n      placements.forEach(placement => {\n        removeClass(tooltip, placement)\n      })\n      addClass(tooltip, placement)\n    }\n    // No need to adjust if the default placement fits\n    if (!isAvailableAtPosition(trigger, tooltip, placement)) {\n      for (let i = 0, l = placements.length; i < l; i++) {\n        // Re-assign placement class\n        changePlacementClass(placements[i])\n        // Break if new placement fits\n        if (isAvailableAtPosition(trigger, tooltip, placements[i])) {\n          placement = placements[i]\n          break\n        }\n      }\n      changePlacementClass(placement)\n    }\n  }\n  // fix left and top for tooltip\n  let rect = trigger.getBoundingClientRect()\n  let tooltipRect = tooltip.getBoundingClientRect()\n  let top\n  let left\n  if (placement === PLACEMENTS.BOTTOM) {\n    top = containerScrollTop + rect.top + rect.height\n    left = containerScrollLeft + rect.left + rect.width / 2 - tooltipRect.width / 2\n  } else if (placement === PLACEMENTS.LEFT) {\n    top = containerScrollTop + rect.top + rect.height / 2 - tooltipRect.height / 2\n    left = containerScrollLeft + rect.left - tooltipRect.width\n  } else if (placement === PLACEMENTS.RIGHT) {\n    top = containerScrollTop + rect.top + rect.height / 2 - tooltipRect.height / 2\n    // https://github.com/wxsms/uiv/issues/272\n    // add 1px to fix above issue\n    left = containerScrollLeft + rect.left + rect.width + 1\n  } else {\n    top = containerScrollTop + rect.top - tooltipRect.height\n    left = containerScrollLeft + rect.left + rect.width / 2 - tooltipRect.width / 2\n  }\n  let viewportEl\n  // viewport option\n  if (isString(viewport)) {\n    viewportEl = document.querySelector(viewport)\n  } else if (isFunction(viewport)) {\n    viewportEl = viewport(trigger)\n  }\n  if (isElement(viewportEl)) {\n    const popoverFix = isPopover ? 11 : 0\n    const viewportReact = viewportEl.getBoundingClientRect()\n    const viewportTop = containerScrollTop + viewportReact.top\n    const viewportLeft = containerScrollLeft + viewportReact.left\n    const viewportBottom = viewportTop + viewportReact.height\n    const viewportRight = viewportLeft + viewportReact.width\n    // fix top\n    if (top < viewportTop) {\n      top = viewportTop\n    } else if (top + tooltipRect.height > viewportBottom) {\n      top = viewportBottom - tooltipRect.height\n    }\n    // fix left\n    if (left < viewportLeft) {\n      left = viewportLeft\n    } else if (left + tooltipRect.width > viewportRight) {\n      left = viewportRight - tooltipRect.width\n    }\n    // fix for popover pointer\n    if (placement === PLACEMENTS.BOTTOM) {\n      top -= popoverFix\n    } else if (placement === PLACEMENTS.LEFT) {\n      left += popoverFix\n    } else if (placement === PLACEMENTS.RIGHT) {\n      left -= popoverFix\n    } else {\n      top += popoverFix\n    }\n  }\n  // set position finally\n  tooltip.style.top = `${top}px`\n  tooltip.style.left = `${left}px`\n}\n\nexport function hasScrollbar (el) {\n  const SCROLL = 'scroll'\n  const hasVScroll = el.scrollHeight > el.clientHeight\n  const style = getComputedStyle(el)\n  return hasVScroll || style.overflow === SCROLL || style.overflowY === SCROLL\n}\n\nexport function toggleBodyOverflow (enable) {\n  const MODAL_OPEN = 'modal-open'\n  const body = document.body\n  if (enable) {\n    removeClass(body, MODAL_OPEN)\n    body.style.paddingRight = null\n  } else {\n    const browsersWithFloatingScrollbar = isIE10() || isIE11()\n    const documentHasScrollbar = hasScrollbar(document.documentElement) || hasScrollbar(document.body)\n    if (documentHasScrollbar && !browsersWithFloatingScrollbar) {\n      body.style.paddingRight = `${getScrollbarWidth()}px`\n    }\n    addClass(body, MODAL_OPEN)\n  }\n}\n\nexport function getClosest (el, selector) {\n  ensureElementMatchesFunction()\n  let parent\n  let _el = el\n  while (_el) {\n    parent = _el.parentElement\n    if (parent && parent.matches(selector)) {\n      return parent\n    }\n    _el = parent\n  }\n  return null\n}\n\nexport function getParents (el, selector, until = null) {\n  ensureElementMatchesFunction()\n  let parents = []\n  let parent = el.parentElement\n  while (parent) {\n    if (parent.matches(selector)) {\n      parents.push(parent)\n    } else if (until && (until === parent || parent.matches(until))) {\n      break\n    }\n    parent = parent.parentElement\n  }\n  return parents\n}\n\nexport function focus (el) {\n  if (!isElement(el)) {\n    return\n  }\n  el.getAttribute('tabindex') ? null : el.setAttribute('tabindex', '-1')\n  el.focus()\n}\n","<script>\n  import {setDropdownPosition, on, off, EVENTS, focus} from '../../utils/domUtils'\n  import {isBoolean} from '../../utils/objectUtils'\n\n  const DEFAULT_TAG = 'div'\n\n  export default {\n    render (h) {\n      return h(\n        this.tag,\n        {\n          class: {\n            'btn-group': this.tag === DEFAULT_TAG,\n            dropdown: !this.dropup,\n            dropup: this.dropup,\n            open: this.show\n          }\n        },\n        [\n          this.$slots.default,\n          h(\n            'ul',\n            {\n              class: {\n                'dropdown-menu': true,\n                'dropdown-menu-right': this.menuRight\n              },\n              ref: 'dropdown'\n            },\n            [this.$slots.dropdown]\n          )\n        ]\n      )\n    },\n    props: {\n      tag: {\n        type: String,\n        default: DEFAULT_TAG\n      },\n      appendToBody: {\n        type: Boolean,\n        default: false\n      },\n      value: Boolean,\n      dropup: {\n        type: Boolean,\n        default: false\n      },\n      menuRight: {\n        type: Boolean,\n        default: false\n      },\n      disabled: {\n        type: Boolean,\n        default: false\n      },\n      notCloseElements: Array,\n      positionElement: null\n    },\n    data () {\n      return {\n        show: false,\n        triggerEl: undefined\n      }\n    },\n    watch: {\n      value (v) {\n        this.toggle(v)\n      }\n    },\n    mounted () {\n      this.initTrigger()\n      if (this.triggerEl) {\n        on(this.triggerEl, EVENTS.CLICK, this.toggle)\n        on(this.triggerEl, EVENTS.KEY_DOWN, this.onKeyPress)\n      }\n      on(this.$refs.dropdown, EVENTS.KEY_DOWN, this.onKeyPress)\n      on(window, EVENTS.CLICK, this.windowClicked)\n      on(window, EVENTS.TOUCH_END, this.windowClicked)\n      if (this.value) {\n        this.toggle(true)\n      }\n    },\n    beforeDestroy () {\n      this.removeDropdownFromBody()\n      if (this.triggerEl) {\n        off(this.triggerEl, EVENTS.CLICK, this.toggle)\n        off(this.triggerEl, EVENTS.KEY_DOWN, this.onKeyPress)\n      }\n      off(this.$refs.dropdown, EVENTS.KEY_DOWN, this.onKeyPress)\n      off(window, EVENTS.CLICK, this.windowClicked)\n      off(window, EVENTS.TOUCH_END, this.windowClicked)\n    },\n    methods: {\n      onKeyPress (event) {\n        if (this.show) {\n          const dropdownEl = this.$refs.dropdown\n          const keyCode = event.keyCode || event.which\n          if (keyCode === 27) {\n            this.toggle(false)\n            this.triggerEl && this.triggerEl.focus()\n          } else if (keyCode === 13) {\n            const currentFocus = dropdownEl.querySelector('li > a:focus')\n            currentFocus && currentFocus.click()\n          } else if (keyCode === 38 || keyCode === 40) {\n            event.preventDefault()\n            event.stopPropagation()\n            const currentFocus = dropdownEl.querySelector('li > a:focus')\n            const items = dropdownEl.querySelectorAll('li:not(.disabled) > a')\n            if (!currentFocus) {\n              focus(items[0])\n            } else {\n              for (let i = 0; i < items.length; i++) {\n                if (currentFocus === items[i]) {\n                  if (keyCode === 38 && i < items.length > 0) {\n                    focus(items[i - 1])\n                  } else if (keyCode === 40 && i < items.length - 1) {\n                    focus(items[i + 1])\n                  }\n                  break\n                }\n              }\n            }\n          }\n        }\n      },\n      initTrigger () {\n        const trigger = this.$el.querySelector('[data-role=\"trigger\"]') || this.$el.querySelector('.dropdown-toggle') || this.$el.firstChild\n        this.triggerEl = trigger && trigger !== this.$refs.dropdown ? trigger : null\n      },\n      toggle (show) {\n        if (this.disabled) {\n          return\n        }\n        if (isBoolean(show)) {\n          this.show = show\n        } else {\n          this.show = !this.show\n        }\n        if (this.appendToBody) {\n          this.show ? this.appendDropdownToBody() : this.removeDropdownFromBody()\n        }\n        this.$emit('input', this.show)\n      },\n      windowClicked (event) {\n        let target = event.target\n        if (this.show && target) {\n          let targetInNotCloseElements = false\n          if (this.notCloseElements) {\n            for (let i = 0, l = this.notCloseElements.length; i < l; i++) {\n              const isTargetInElement = this.notCloseElements[i].contains(target)\n              let shouldBreak = isTargetInElement\n              if (this.appendToBody) {\n                const isTargetInDropdown = this.$refs.dropdown.contains(target)\n                const isElInElements = this.notCloseElements.indexOf(this.$el) >= 0\n                shouldBreak = isTargetInElement || (isTargetInDropdown && isElInElements)\n              }\n              if (shouldBreak) {\n                targetInNotCloseElements = true\n                break\n              }\n            }\n          }\n          const targetInDropdownBody = this.$refs.dropdown.contains(target)\n          const targetInTrigger = this.$el.contains(target) && !targetInDropdownBody\n          // normally, a dropdown select event is handled by @click that trigger after @touchend\n          // then @touchend event have to be ignore in this case\n          const targetInDropdownAndIsTouchEvent = targetInDropdownBody && event.type === 'touchend'\n          if (!targetInTrigger && !targetInNotCloseElements && !targetInDropdownAndIsTouchEvent) {\n            this.toggle(false)\n          }\n        }\n      },\n      appendDropdownToBody () {\n        try {\n          let el = this.$refs.dropdown\n          el.style.display = 'block'\n          document.body.appendChild(el)\n          let positionElement = this.positionElement || this.$el\n          setDropdownPosition(el, positionElement, this)\n        } catch (e) {\n          // Silent\n        }\n      },\n      removeDropdownFromBody () {\n        try {\n          let el = this.$refs.dropdown\n          el.removeAttribute('style')\n          this.$el.appendChild(el)\n        } catch (e) {\n          // Silent\n        }\n      }\n    }\n  }\n</script>\n","export function spliceIfExist (arr, item) {\n  if (Array.isArray(arr)) {\n    const index = arr.indexOf(item)\n    if (index >= 0) {\n      arr.splice(index, 1)\n    }\n  }\n}\n\nexport function range (end, start = 0, step = 1) {\n  let arr = []\n  for (let i = start; i < end; i += step) {\n    arr.push(i)\n  }\n  return arr\n}\n\nexport function nodeListToArray (nodeList) {\n  return Array.prototype.slice.call(nodeList || [])\n}\n\nexport function onlyUnique (value, index, self) {\n  return self.indexOf(value) === index\n}\n","<template>\n  <dropdown\n    v-model=\"showDropdown\"\n    ref=\"dropdown\"\n    :not-close-elements=\"els\"\n    :append-to-body=\"appendToBody\"\n    :disabled=\"disabled\"\n    :style=\"containerStyles\"\n    @keydown.native.esc=\"showDropdown=false\">\n    <div\n      class=\"form-control dropdown-toggle clearfix\"\n      :class=\"selectClasses\"\n      :disabled=\"disabled\"\n      tabindex=\"0\"\n      data-role=\"trigger\"\n      @focus=\"$emit('focus', $event)\"\n      @blur=\"$emit('blur', $event)\"\n      @keydown.prevent.stop.down=\"goNextOption\"\n      @keydown.prevent.stop.up=\"goPrevOption\"\n      @keydown.prevent.stop.enter=\"selectOption\">\n      <div class=\"pull-right\" style=\"display: inline-block;vertical-align: middle\">\n        <span>&nbsp;</span>\n        <span class=\"caret\"></span>\n      </div>\n      <div\n        :class=\"selectTextClasses\"\n        style=\"overflow-x: hidden; text-overflow: ellipsis; white-space: nowrap;\"\n        v-text=\"selectedText\"\n      ></div>\n    </div>\n    <template slot=\"dropdown\">\n      <li v-if=\"filterable\" style=\"padding: 4px 8px\">\n        <input\n          aria-label=\"Filter...\"\n          ref=\"filterInput\"\n          class=\"form-control input-sm\"\n          type=\"text\"\n          :placeholder=\"filterPlaceholder || t('uiv.multiSelect.filterPlaceholder')\"\n          v-model=\"filterInput\"\n          @keydown.prevent.stop.down=\"goNextOption\"\n          @keydown.prevent.stop.up=\"goPrevOption\"\n          @keydown.prevent.stop.enter=\"selectOption\"\n        />\n      </li>\n      <template v-for=\"item in groupedOptions\">\n        <li v-if=\"item.$group\" class=\"dropdown-header\" v-text=\"item.$group\"></li>\n        <template v-for=\"_item in item.options\">\n          <li\n            @keydown.prevent.stop.down=\"goNextOption\"\n            @keydown.prevent.stop.up=\"goPrevOption\"\n            @keydown.prevent.stop.enter=\"selectOption\"\n            :class=\"itemClasses(_item)\"\n            @click.stop=\"toggle(_item)\"\n            @mouseenter=\"currentActive=-1\"\n            style=\"outline: 0\">\n            <a role=\"button\" v-if=\"isItemSelected(_item)\" style=\"outline: 0\">\n              <b>{{_item[labelKey]}}</b>\n              <span v-if=\"selectedIcon\" :class=\"selectedIconClasses\"></span>\n            </a>\n            <a role=\"button\" v-else style=\"outline: 0\">\n              <span>{{_item[labelKey]}}</span>\n            </a>\n          </li>\n        </template>\n      </template>\n    </template>\n  </dropdown>\n</template>\n\n<script>\n  import Local from '../../mixins/localeMixin'\n  import Dropdown from '../dropdown/Dropdown.vue'\n  import {onlyUnique} from '../../utils/arrayUtils'\n\n  export default {\n    mixins: [Local],\n    components: {Dropdown},\n    props: {\n      value: {\n        type: Array,\n        required: true\n      },\n      options: {\n        type: Array,\n        required: true\n      },\n      labelKey: {\n        type: String,\n        default: 'label'\n      },\n      valueKey: {\n        type: String,\n        default: 'value'\n      },\n      limit: {\n        type: Number,\n        default: 0\n      },\n      size: String,\n      placeholder: String,\n      split: {\n        type: String,\n        default: ', '\n      },\n      disabled: {\n        type: Boolean,\n        default: false\n      },\n      appendToBody: {\n        type: Boolean,\n        default: false\n      },\n      block: {\n        type: Boolean,\n        default: false\n      },\n      collapseSelected: {\n        type: Boolean,\n        default: false\n      },\n      filterable: {\n        type: Boolean,\n        default: false\n      },\n      filterAutoFocus: {\n        type: Boolean,\n        default: true\n      },\n      filterFunction: Function,\n      filterPlaceholder: String,\n      selectedIcon: {\n        type: String,\n        default: 'glyphicon glyphicon-ok'\n      },\n      itemSelectedClass: String\n    },\n    data () {\n      return {\n        showDropdown: false,\n        els: [],\n        filterInput: '',\n        currentActive: -1\n      }\n    },\n    computed: {\n      containerStyles () {\n        return {\n          width: this.block ? '100%' : ''\n        }\n      },\n      filteredOptions () {\n        if (this.filterable && this.filterInput) {\n          if (this.filterFunction) {\n            return this.filterFunction(this.filterInput)\n          } else {\n            const filterInput = this.filterInput.toLowerCase()\n            return this.options.filter(v => (\n              v[this.valueKey].toString().toLowerCase().indexOf(filterInput) >= 0 ||\n              v[this.labelKey].toString().toLowerCase().indexOf(filterInput) >= 0\n            ))\n          }\n        } else {\n          return this.options\n        }\n      },\n      groupedOptions () {\n        return this.filteredOptions\n          .map(v => v.group)\n          .filter(onlyUnique)\n          .map(v => ({\n            options: this.filteredOptions.filter(option => option.group === v),\n            $group: v\n          }))\n      },\n      flatternGroupedOptions () {\n        if (this.groupedOptions && this.groupedOptions.length) {\n          let result = []\n          this.groupedOptions.forEach(v => {\n            result = result.concat(v.options)\n          })\n          return result\n        } else {\n          return []\n        }\n      },\n      selectClasses () {\n        return {\n          [`input-${this.size}`]: this.size\n        }\n      },\n      selectedIconClasses () {\n        return {\n          [this.selectedIcon]: true,\n          'pull-right': true\n        }\n      },\n      selectTextClasses () {\n        return {\n          'text-muted': this.value.length === 0\n        }\n      },\n      labelValue () {\n        const optionsByValue = this.options.map(v => v[this.valueKey])\n        return this.value.map(v => {\n          const index = optionsByValue.indexOf(v)\n          return index >= 0 ? this.options[index][this.labelKey] : v\n        })\n      },\n      selectedText () {\n        if (this.value.length) {\n          const labelValue = this.labelValue\n          if (this.collapseSelected) {\n            let str = labelValue[0]\n            str += labelValue.length > 1 ? `${this.split}+${labelValue.length - 1}` : ''\n            return str\n          } else {\n            return labelValue.join(this.split)\n          }\n        } else {\n          return this.placeholder || this.t('uiv.multiSelect.placeholder')\n        }\n      }\n    },\n    watch: {\n      showDropdown (v) {\n        // clear filter input when dropdown toggles\n        this.filterInput = ''\n        this.currentActive = -1\n        this.$emit('visible-change', v)\n        if (v && this.filterable && this.filterAutoFocus) {\n          this.$nextTick(() => {\n            this.$refs.filterInput.focus()\n          })\n        }\n      }\n    },\n    mounted () {\n      this.els = [this.$el]\n    },\n    methods: {\n      goPrevOption () {\n        if (!this.showDropdown) {\n          return\n        }\n        this.currentActive > 0 ? this.currentActive-- : this.currentActive = this.flatternGroupedOptions.length - 1\n      },\n      goNextOption () {\n        if (!this.showDropdown) {\n          return\n        }\n        this.currentActive < this.flatternGroupedOptions.length - 1 ? this.currentActive++ : this.currentActive = 0\n      },\n      selectOption () {\n        const index = this.currentActive\n        const options = this.flatternGroupedOptions\n        if (!this.showDropdown) {\n          this.showDropdown = true\n        } else if (index >= 0 && index < options.length) {\n          this.toggle(options[index])\n        }\n      },\n      itemClasses (item) {\n        const result = {\n          disabled: item.disabled,\n          active: this.currentActive === this.flatternGroupedOptions.indexOf(item)\n        }\n        if (this.itemSelectedClass) {\n          result[this.itemSelectedClass] = this.isItemSelected(item)\n        }\n        return result\n      },\n      isItemSelected (item) {\n        return this.value.indexOf(item[this.valueKey]) >= 0\n      },\n      toggle (item) {\n        if (item.disabled) {\n          return\n        }\n        const value = item[this.valueKey]\n        const index = this.value.indexOf(value)\n        if (this.limit === 1) {\n          const newValue = index >= 0 ? [] : [value]\n          this.$emit('input', newValue)\n          this.$emit('change', newValue)\n        } else {\n          if (index >= 0) {\n            const newVal = this.value.slice()\n            newVal.splice(index, 1)\n            this.$emit('input', newVal)\n            this.$emit('change', newVal)\n          } else if (this.limit === 0 || this.value.length < this.limit) {\n            const newVal = this.value.slice()\n            newVal.push(value)\n            this.$emit('input', newVal)\n            this.$emit('change', newVal)\n          } else {\n            this.$emit('limit-exceed')\n          }\n        }\n      }\n    }\n  }\n</script>\n"],"names":["isExist","obj","isFunction","isBoolean","lang","defaultLang","i18nHandler","vuei18n","Object","getPrototypeOf","$t","apply","arguments","err","t","path","options","value","$$locale","array","split","current","i","j","length","property","args","babelHelpers.extends","locale","EVENTS","on","element","event","handler","addEventListener","off","removeEventListener","isElement","el","nodeType","Node","ELEMENT_NODE","setDropdownPosition","dropdown","trigger","doc","document","documentElement","containerScrollLeft","window","pageXOffset","scrollLeft","clientLeft","containerScrollTop","pageYOffset","scrollTop","clientTop","rect","getBoundingClientRect","dropdownRect","style","right","bottom","menuRight","left","width","dropup","top","height","focus","getAttribute","setAttribute","DEFAULT_TAG","h","tag","show","$slots","default","String","Boolean","Array","undefined","v","toggle","initTrigger","triggerEl","CLICK","KEY_DOWN","onKeyPress","$refs","windowClicked","TOUCH_END","removeDropdownFromBody","dropdownEl","keyCode","which","currentFocus","querySelector","click","preventDefault","stopPropagation","items","querySelectorAll","$el","firstChild","disabled","appendToBody","appendDropdownToBody","$emit","target","targetInNotCloseElements","notCloseElements","l","isTargetInElement","contains","shouldBreak","isTargetInDropdown","isElInElements","indexOf","targetInDropdownBody","targetInTrigger","targetInDropdownAndIsTouchEvent","type","display","body","appendChild","positionElement","e","removeAttribute","onlyUnique","index","self","render","Local","Dropdown","Number","Function","block","filterable","filterInput","filterFunction","toLowerCase","filter","valueKey","toString","labelKey","filteredOptions","map","group","option","groupedOptions","result","forEach","concat","size","selectedIcon","optionsByValue","labelValue","collapseSelected","str","join","placeholder","currentActive","filterAutoFocus","$nextTick","els","showDropdown","flatternGroupedOptions","item","itemSelectedClass","isItemSelected","limit","newValue","newVal","slice","splice","push"],"mappings":"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"}