"use strict";exports.__esModule=!0,exports.default=void 0;var _EmitterSubscription=_interopRequireDefault(require("./EmitterSubscription")),_EventSubscriptionVendor=_interopRequireDefault(require("./EventSubscriptionVendor")),_emptyFunction=_interopRequireDefault(require("fbjs/lib/emptyFunction")),_invariant=_interopRequireDefault(require("fbjs/lib/invariant"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var EventEmitter=function(){function e(e){this._subscriber=e||new _EventSubscriptionVendor.default}var t=e.prototype;return t.addListener=function(e,t,r){return this._subscriber.addSubscription(e,new _EmitterSubscription.default(this,this._subscriber,t,r))},t.once=function(e,i,n){var u=this;return this.addListener(e,function(){u.removeCurrentListener();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.apply(n,t)})},t.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},t.removeCurrentListener=function(){(0,_invariant.default)(!!this._currentSubscription,"Not in an emitting cycle; there is no current subscription"),this.removeSubscription(this._currentSubscription)},t.removeSubscription=function(e){(0,_invariant.default)(e.emitter===this,"Subscription does not belong to this emitter."),this._subscriber.removeSubscription(e)},t.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(_emptyFunction.default.thatReturnsTrue).map(function(e){return e.listener}):[]},t.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var r=0,i=t.length;r<i;r++){var n=t[r];n&&(this._currentSubscription=n).listener.apply(n.context,Array.prototype.slice.call(arguments,1))}this._currentSubscription=null}},t.removeListener=function(e,t){var r=this._subscriber.getSubscriptionsForType(e);if(r)for(var i=0,n=r.length;i<n;i++){var u=r[i];u&&u.listener===t&&u.remove()}},e}(),_default=EventEmitter;exports.default=EventEmitter,module.exports=exports.default;