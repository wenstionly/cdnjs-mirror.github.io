"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Absorber=void 0;var ColorUtils_1=require("../../Utils/ColorUtils"),Utils_1=require("../../Utils/Utils"),Absorber=function(){function i(i,t,o){var s,e;this.absorbers=i,this.container=i.container,this.initialPosition=o,this.options=t;var a=this.container,n=t.size.value*a.retina.pixelRatio,r="boolean"==typeof t.size.random?t.size.random:t.size.random.enable,l="boolean"==typeof t.size.random?1:t.size.random.minimumValue;r&&(n=Utils_1.Utils.randomInRange(l,n)),this.opacity=this.options.opacity,this.size=n*a.retina.pixelRatio,this.mass=this.size*t.size.density;var h=t.size.limit;this.limit=void 0!==h?h*a.retina.pixelRatio:h;var c="string"==typeof t.color?{value:t.color}:t.color;this.color=null!==(s=ColorUtils_1.ColorUtils.colorToRgb(c))&&void 0!==s?s:{b:0,g:0,r:0},this.position=null!==(e=this.initialPosition)&&void 0!==e?e:this.calcPosition()}return i.prototype.attract=function(i,t){var o,s=i.getPosition(),e=this.position.x-s.x,a=this.position.y-s.y,n=Math.sqrt(Math.abs(e*e+a*a)),r=Math.atan2(e,a)*(180/Math.PI),l=this.mass/Math.pow(n,2);n<this.size+i.size.value?(o=.033*i.size.value,this.size>i.size.value&&n<this.size-i.size.value?i.destroyed=!0:(i.size.value-=o,i.velocity.horizontal+=Math.sin(r*(Math.PI/180))*l,i.velocity.vertical+=Math.cos(r*(Math.PI/180))*l),(void 0===this.limit||this.size<this.limit)&&(this.size+=o),this.mass+=o*this.options.size.density):(i.velocity.horizontal+=Math.sin(r*(Math.PI/180))*l,i.velocity.vertical+=Math.cos(r*(Math.PI/180))*l)},i.prototype.resize=function(){var i=this.initialPosition;this.position=i&&Utils_1.Utils.isPointInside(i,this.container.canvas.size)?i:this.calcPosition()},i.prototype.draw=function(i){i.translate(this.position.x,this.position.y),i.beginPath(),i.arc(0,0,this.size,0,2*Math.PI,!1),i.closePath(),i.fillStyle=ColorUtils_1.ColorUtils.getStyleFromRgb(this.color,this.opacity),i.fill()},i.prototype.calcPosition=function(){var i,t=this.container,o=null!==(i=this.options.position)&&void 0!==i?i:{x:100*Math.random(),y:100*Math.random()};return{x:o.x/100*t.canvas.size.width,y:o.y/100*t.canvas.size.height}},i}();exports.Absorber=Absorber;