"use strict";import Chart from"./Chart.js";import U from"./Utilities.js";var find=U.find,isArray=U.isArray,isObject=U.isObject,merge=U.merge,objectEach=U.objectEach,pick=U.pick,splat=U.splat,uniqueKey=U.uniqueKey;Chart.prototype.setResponsive=function(t,i){var e,s,n=this.options.responsive,r=[],o=this.currentResponsive;!i&&n&&n.rules&&n.rules.forEach(function(t){void 0===t._id&&(t._id=uniqueKey()),this.matchResponsiveRule(t,r)},this);var h=merge.apply(0,r.map(function(t){return find(n.rules,function(i){return i._id===t}).chartOptions}));h.isResponsiveOptions=!0,r=r.toString()||void 0,e=o&&o.ruleIds,r!==e&&(o&&this.update(o.undoOptions,t,!0),r?((s=this.currentOptions(h)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:r,mergedOptions:h,undoOptions:s},this.update(h,t,!0)):this.currentResponsive=void 0)},Chart.prototype.matchResponsiveRule=function(t,i){var e=t.condition;(e.callback||function(){return this.chartWidth<=pick(e.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=pick(e.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=pick(e.minWidth,0)&&this.chartHeight>=pick(e.minHeight,0)}).call(this)&&i.push(t._id)},Chart.prototype.currentOptions=function(t){var i=this,e={};return function t(e,s,n,r){var o;objectEach(e,function(e,h){if(!r&&i.collectionsWithUpdate.indexOf(h)>-1)for(e=splat(e),n[h]=[],o=0;o<Math.max(e.length,s[h].length);o++)s[h][o]&&(void 0===e[o]?n[h][o]=s[h][o]:(n[h][o]={},t(e[o],s[h][o],n[h][o],r+1)));else isObject(e)?(n[h]=isArray(e)?[]:{},t(e,s[h]||{},n[h],r+1)):void 0===s[h]?n[h]=null:n[h]=s[h]})}(t,this.options,e,0),e};