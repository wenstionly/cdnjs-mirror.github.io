"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/drag-panes",["highcharts","highcharts/modules/stock"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function o(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}o(e,"modules/drag-panes.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(s,t){var a=t.addEvent,c=t.clamp,M=t.isNumber,e=t.merge,i=t.objectEach,b=t.relativeLength,o=t.wrap,h=s.hasTouch,n=s.Axis,r=s.Pointer,p=(u.prototype.init=function(t,e){this.axis=t,this.options=t.options.resize,this.render(),e||this.addMouseEvents()},u.prototype.render=function(){var t,e=this,o=e.axis,i=o.chart,s=e.options,n=s.x||0,r=s.y,a=c(o.top+o.height+r,i.plotTop,i.plotTop+i.plotHeight),h={};i.styledMode||(h={cursor:s.cursor,stroke:s.lineColor,"stroke-width":s.lineWidth,dashstyle:s.lineDashStyle}),e.lastPos=a-r,e.controlLine||(e.controlLine=i.renderer.path().addClass("highcharts-axis-resizer")),e.controlLine.add(o.axisGroup),t=i.styledMode?e.controlLine.strokeWidth():s.lineWidth,h.d=i.renderer.crispLine([["M",o.left+n,a],["L",o.left+o.width+n,a]],t),e.controlLine.attr(h)},u.prototype.addMouseEvents=function(){var t,e,o,i=this,s=i.controlLine.element,n=i.axis.chart.container,r=[];i.mouseMoveHandler=t=function(t){i.onMouseMove(t)},i.mouseUpHandler=e=function(t){i.onMouseUp(t)},i.mouseDownHandler=o=function(t){i.onMouseDown(t)},r.push(a(n,"mousemove",t),a(n.ownerDocument,"mouseup",e),a(s,"mousedown",o)),h&&r.push(a(n,"touchmove",t),a(n.ownerDocument,"touchend",e),a(s,"touchstart",o)),i.eventsToUnbind=r},u.prototype.onMouseMove=function(t){t.touches&&0===t.touches[0].pageX||this.grabbed&&(this.hasDragged=!0,this.updateAxes(this.axis.chart.pointer.normalize(t).chartY-this.options.y))},u.prototype.onMouseUp=function(t){this.hasDragged&&this.updateAxes(this.axis.chart.pointer.normalize(t).chartY-this.options.y),this.grabbed=this.hasDragged=this.axis.chart.activeResizer=null},u.prototype.onMouseDown=function(t){this.axis.chart.pointer.reset(!1,0),this.grabbed=this.axis.chart.activeResizer=!0},u.prototype.updateAxes=function(p){function u(t){return 100*t/m+"%"}function d(t,e,o){return Math.round(c(t,e,o))}var l,f=this,x=f.axis.chart,t=f.options.controlledAxis,e=0===t.next.length?[x.yAxis.indexOf(f.axis)+1]:t.next,o=[f.axis].concat(t.prev),y=[],g=!1,v=x.plotTop,m=x.plotHeight,z=v+m;p=c(p,v,z),(l=p-f.lastPos)*l<1||([o,e].forEach(function(t,c){t.forEach(function(t,e){var o,i,s,n,r=M(t)?x.yAxis[t]:c||e?x.get(t):t,a=r&&r.options,h=0;a&&"navigator-y-axis"!==a.id&&(i=r.top,s=Math.round(b(a.minLength,m)),n=Math.round(b(a.maxLength,m)),c?(l=p-f.lastPos,o=d(r.len-l,s,n),i=r.top+l,z<i+o&&(p+=h=z-o-i,i+=h),i<v&&z<(i=v)+o&&(o=m),o===s&&(g=!0),y.push({axis:r,options:{top:u(i-v),height:u(o)}})):((o=d(p-i,s,n))===n&&(g=!0),p=i+o,y.push({axis:r,options:{height:u(o)}})))})}),g||(y.forEach(function(t){t.axis.update(t.options,!1)}),x.redraw(!1)))},u.prototype.destroy=function(){var o=this;delete o.axis.resizer,this.eventsToUnbind&&this.eventsToUnbind.forEach(function(t){t()}),o.controlLine.destroy(),i(o,function(t,e){o[e]=null})},u.resizerOptions={minLength:"10%",maxLength:"100%",resize:{controlledAxis:{next:[],prev:[]},enabled:!1,cursor:"ns-resize",lineColor:"#cccccc",lineDashStyle:"Solid",lineWidth:4,x:0,y:0}},u);function u(t){this.axis=void 0,this.controlLine=void 0,this.lastPos=void 0,this.options=void 0,this.init(t)}return n.keepProps.push("resizer"),a(n,"afterRender",function(){var t,e=this,o=e.resizer,i=e.options.resize;i&&(t=!1!==i.enabled,o?t?o.init(e,!0):o.destroy():t&&(e.resizer=new s.AxisResizer(e)))}),a(n,"destroy",function(t){!t.keepEvents&&this.resizer&&this.resizer.destroy()}),o(r.prototype,"runPointActions",function(t){this.chart.activeResizer||t.apply(this,Array.prototype.slice.call(arguments,1))}),o(r.prototype,"drag",function(t){this.chart.activeResizer||t.apply(this,Array.prototype.slice.call(arguments,1))}),e(!0,n.defaultYAxisOptions,p.resizerOptions),s.AxisResizer=p,s.AxisResizer}),o(e,"masters/modules/drag-panes.src.js",[],function(){})});