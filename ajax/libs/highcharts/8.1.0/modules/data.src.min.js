"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/data",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){var t=e?e._modules:{};function r(e,t,r,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,r))}r(t,"mixins/ajax.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(r,e){var o=e.merge,a=e.objectEach;r.ajax=function(e){var r=o(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},e),t={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},s=new XMLHttpRequest;function n(e,t){r.error&&r.error(e,t)}if(!r.url)return!1;s.open(r.type.toUpperCase(),r.url,!0),r.headers["Content-Type"]||s.setRequestHeader("Content-Type",t[r.dataType]||t.text),a(r.headers,function(e,t){s.setRequestHeader(t,e)}),s.onreadystatechange=function(){var e;if(4===s.readyState){if(200===s.status){if(e=s.responseText,"json"===r.dataType)try{e=JSON.parse(e)}catch(e){return n(s,e)}return r.success&&r.success(e)}n(s,s.responseText)}};try{r.data=JSON.stringify(r.data)}catch(e){}s.send(r.data||!0)},r.getJSON=function(e,t){r.ajax({url:e,success:t,dataType:"json",headers:{"Content-Type":"text/plain"}})}}),r(t,"modules/data.src.js",[t["parts/Globals.js"],t["parts/Utilities.js"],t["parts/Globals.js"],t["parts/Point.js"]],function(y,e,f,a){var t=e.addEvent,m=e.defined,r=e.extend,x=e.fireEvent,C=e.isNumber,c=e.merge,g=e.objectEach,o=e.pick,R=e.splat,s=f.Chart,n=f.win.document,i=(l.prototype.init=function(e,t,r){var s,n=e.decimalPoint;t&&(this.chartOptions=t),r&&(this.chart=r),"."!==n&&","!==n&&(n=void 0),this.options=e,this.columns=e.columns||this.rowsToColumns(e.rows)||[],this.firstRowAsNames=o(e.firstRowAsNames,this.firstRowAsNames,!0),this.decimalRegex=n&&new RegExp("^(-?[0-9]+)"+n+"([0-9]+)$"),this.rawColumns=[],this.columns.length&&(this.dataFound(),s=!0),this.hasURLOption(e)&&(clearTimeout(this.liveDataTimeout),s=!1),!(s=(s=(s=(s=s||this.fetchLiveData())||Boolean(this.parseCSV().length))||Boolean(this.parseTable().length))||this.parseGoogleSpreadsheet())&&e.afterComplete&&e.afterComplete()},l.prototype.hasURLOption=function(e){return Boolean(e&&(e.rowsURL||e.csvURL||e.columnsURL))},l.prototype.getColumnDistribution=function(){function a(e){return(f.seriesTypes[e||"line"].prototype.pointArrayMap||[0]).length}function i(e){return f.seriesTypes[e||"line"].prototype.pointArrayMap}var l,u=this.chartOptions,e=this.options,t=[],h=u&&u.chart&&u.chart.type,d=[],p=[],c=0,r=e&&e.seriesMapping||u&&u.series&&u.series.map(function(){return{x:0}})||[];(u&&u.series||[]).forEach(function(e){d.push(a(e.type||h))}),r.forEach(function(e){t.push(e.x||0)}),0===t.length&&t.push(0),r.forEach(function(e){var r=new v,t=d[c]||a(h),s=(u&&u.series||[])[c]||{},n=i(s.type||h),o=n||["y"];for(!m(e.x)&&!s.isCartesian&&n||r.addColumnReader(e.x,"x"),g(e,function(e,t){"x"!==t&&r.addColumnReader(e,t)}),l=0;l<t;l++)r.hasReader(o[l])||r.addColumnReader(void 0,o[l]);p.push(r),c++});var s=i(h);void 0===s&&(s=["y"]),this.valueCount={global:a(h),xColumns:t,individual:d,seriesBuilders:p,globalPointArrayMap:s}},l.prototype.dataFound=function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),!1!==this.parsed()&&this.complete()},l.prototype.parseCSV=function(e){var f,m,t,l,u,r,d=this,p=e||this.options,s=p.csv,n=void 0!==p.startRow&&p.startRow?p.startRow:0,o=p.endRow||Number.MAX_VALUE,g=void 0!==p.startColumn&&p.startColumn?p.startColumn:0,v=p.endColumn||Number.MAX_VALUE,a=0,y=[],h={",":0,";":0,"\t":0};function i(t,e,r,s){var n=0,o="",a="",i="",l="",u=0,h=0;function d(e){o=t[e],a=t[e-1],i=t[e+1]}function p(e){y.length<h+1&&y.push([e]),y[h][y[h].length-1]!==e&&y[h].push(e)}function c(){if(u<g||v<u)return++u,l="";!isNaN(parseFloat(l))&&isFinite(l)?(l=parseFloat(l),p("number")):isNaN(Date.parse(l))?p("string"):(l=l.replace(/\//g,"-"),p("date")),f.length<h+1&&f.push([]),r||(f[h][e]=l),l="",++h,++u}if(t.trim().length&&"#"!==t.trim()[0]){for(;n<t.length;n++){if(d(n),"#"===o)return void c();if('"'===o)for(d(++n);n<t.length&&('"'!==o||'"'===a||'"'===i);)('"'!==o||'"'===o&&'"'!==a)&&(l+=o),d(++n);else s&&s[o]?s[o](o,l)&&c():o===m?c():l+=o}c()}}if(f=this.columns=[],s&&p.beforeParse&&(s=p.beforeParse.call(this,s)),s){t=s.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(p.lineDelimiter||"\n"),(!n||n<0)&&(n=0),(!o||o>=t.length)&&(o=t.length-1),m=p.itemDelimiter?p.itemDelimiter:(m=null,u=l=0,r=!1,t.some(function(e,t){var r,s,n,o=!1,a="";if(13<t)return!0;for(var i=0;i<e.length;i++){if(r=e[i],s=e[i+1],n=e[i-1],"#"===r)return;if('"'===r)if(o){if('"'!==n&&'"'!==s){for(;" "===s&&i<e.length;)s=e[++i];void 0!==h[s]&&h[s]++,o=!1}}else o=!0;else void 0!==h[r]?(a=a.trim(),isNaN(Date.parse(a))&&!isNaN(a)&&isFinite(a)||h[r]++,a=""):a+=r;","===r&&u++,"."===r&&l++}}),r=h[";"]>h[","]?";":(h[","],h[";"],","),p.decimalPoint||(p.decimalPoint=u<l?".":",",d.decimalRegex=new RegExp("^(-?[0-9]+)"+p.decimalPoint+"([0-9]+)$")),r);for(var c=0,a=n;a<=o;a++)"#"===t[a][0]?c++:i(t[a],a-n-c);p.columnTypes&&0!==p.columnTypes.length||!y.length||!y[0].length||"date"!==y[0][1]||p.dateFormat||(p.dateFormat=function(e,t){var r,s,n,o="YYYY/mm/dd",a=[],i=0,l=!1,u=[],h=[];for((!t||t>e.length)&&(t=e.length);i<t;i++)if(void 0!==e[i]&&e[i]&&e[i].length)for(r=e[i].trim().replace(/\//g," ").replace(/\-/g," ").replace(/\./g," ").split(" "),a=["","",""],n=0;n<r.length;n++)n<a.length&&(r[n]=parseInt(r[n],10),r[n]&&(h[n]=!h[n]||h[n]<r[n]?r[n]:h[n],void 0!==u[n]?u[n]!==r[n]&&(u[n]=!1):u[n]=r[n],31<r[n]?r[n]<100?a[n]="YY":a[n]="YYYY":12<r[n]&&r[n]<=31?(a[n]="dd",l=!0):a[n].length||(a[n]="mm")));if(l){for(n=0;n<u.length;n++)!1!==u[n]?12<h[n]&&"YY"!==a[n]&&"YYYY"!==a[n]&&(a[n]="YY"):12<h[n]&&"mm"===a[n]&&(a[n]="dd");return 3===a.length&&"dd"===a[1]&&"dd"===a[2]&&(a[2]="YY"),s=a.join("/"),(p.dateFormats||d.dateFormats)[s]?s:(x("deduceDateFailed"),o)}return o}(f[0])),this.dataFound()}return f},l.prototype.parseTable=function(){var e=this.options,t=e.table,o=this.columns||[],a=e.startRow||0,r=e.endRow||Number.MAX_VALUE,i=e.startColumn||0,l=e.endColumn||Number.MAX_VALUE;return t&&("string"==typeof t&&(t=n.getElementById(t)),[].forEach.call(t.getElementsByTagName("tr"),function(e,n){a<=n&&n<=r&&[].forEach.call(e.children,function(e,t){var r=o[t-i],s=1;if(("TD"===e.tagName||"TH"===e.tagName)&&i<=t&&t<=l)for(o[t-i]||(o[t-i]=[]),o[t-i][n-a]=e.innerHTML;s<=n-a&&void 0===r[n-a-s];)r[n-a-s]=null,s++})}),this.dataFound()),o},l.prototype.fetchLiveData=function(){var a=this,i=this.chart,l=this.options,u=3,h=0,d=l.enablePolling,p=1e3*(l.dataRefreshRate||2),t=c(l);return!!this.hasURLOption(l)&&(p<1e3&&(p=1e3),delete l.csvURL,delete l.rowsURL,delete l.columnsURL,function n(o){function e(e,t,r){if(e&&0===e.indexOf("http"))return o&&(clearTimeout(a.liveDataTimeout),i.liveDataURL=e),y.ajax({url:e,dataType:r||"json",success:function(e){i&&i.series&&t(e),s()},error:function(e,t){return++h<u&&s(),l.error&&l.error(t,e)}}),1;function s(){d&&i.liveDataURL===e&&(a.liveDataTimeout=setTimeout(n,p))}e&&l.error&&l.error("Invalid URL")}e(t.csvURL,function(e){i.update({data:{csv:e}})},"text")||e(t.rowsURL,function(e){i.update({data:{rows:e}})})||e(t.columnsURL,function(e){i.update({data:{columns:e}})})}(!0),this.hasURLOption(l))},l.prototype.parseGoogleSpreadsheet=function(){var p=this,s=this.options,n=s.googleSpreadsheetKey,c=this.chart,o=s.googleSpreadsheetWorksheet||1,f=s.startRow||0,m=s.endRow||Number.MAX_VALUE,g=s.startColumn||0,v=s.endColumn||Number.MAX_VALUE;return s.dataRefreshRate,n&&(delete s.googleSpreadsheetKey,function t(r){var e=["https://spreadsheets.google.com/feeds/cells",n,o,"public/values?alt=json"].join("/");y.ajax({url:e,dataType:"json",success:function(e){r(e),s.enablePolling&&setTimeout(function(){t(r)},1e3*(s.dataRefreshRate||2))},error:function(e,t){return s.error&&s.error(t,e)}})}(function(e){var t,r,s,n,o,a,i=[],l=e.feed.entry,u=(l||[]).length,h=0,d=0;if(!l||0===l.length)return!1;for(a=0;a<u;a++)t=l[a],h=Math.max(h,t.gs$cell.col),d=Math.max(d,t.gs$cell.row);for(a=0;a<h;a++)g<=a&&a<=v&&(i[a-g]=[]);for(a=0;a<u;a++)s=(t=l[a]).gs$cell.row-1,n=t.gs$cell.col-1,g<=n&&n<=v&&f<=s&&s<=m&&(r=null,(o=t.gs$cell||t.content).numericValue?r=0<=o.$t.indexOf("/")||0<=o.$t.indexOf("-")?o.$t:0<o.$t.indexOf("%")?100*parseFloat(o.numericValue):parseFloat(o.numericValue):o.$t&&o.$t.length&&(r=o.$t),i[n-g][s-f]=r);i.forEach(function(e){for(a=0;a<e.length;a++)void 0===e[a]&&(e[a]=null)}),c&&c.series?c.update({data:{columns:i}}):(p.columns=i,p.dataFound())})),!1},l.prototype.trim=function(e,t){return"string"==typeof e&&(e=e.replace(/^\s+|\s+$/g,""),t&&/^[0-9\s]+$/.test(e)&&(e=e.replace(/\s/g,"")),this.decimalRegex&&(e=e.replace(this.decimalRegex,"$1.$2"))),e},l.prototype.parseTypes=function(){for(var e=this.columns,t=e.length;t--;)this.parseColumn(e[t],t)},l.prototype.parseColumn=function(e,t){var r,s,n,o,a,i,l,u=this.rawColumns,h=this.columns,d=e.length,p=this.firstRowAsNames,c=-1!==this.valueCount.xColumns.indexOf(t),f=[],m=this.chartOptions,g=(this.options.columnTypes||[])[t],v=c&&(m&&m.xAxis&&"category"===R(m.xAxis)[0].type||"string"===g);for(u[t]||(u[t]=[]);d--;)r=f[d]||e[d],n=this.trim(r),o=this.trim(r,!0),s=parseFloat(o),void 0===u[t][d]&&(u[t][d]=n),v||0===d&&p?e[d]=""+n:+o===s?(31536e6<(e[d]=s)&&"float"!==g?e.isDatetime=!0:e.isNumeric=!0,void 0!==e[d+1]&&(l=s>e[d+1])):(n&&n.length&&(a=this.parseDate(r)),c&&C(a)&&"float"!==g?(f[d]=r,e[d]=a,e.isDatetime=!0,void 0!==e[d+1]&&((i=a>e[d+1])!==l&&void 0!==l&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,d=e.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):e.unsorted=!0),l=i)):(e[d]=""===n?null:n,0!==d&&(e.isDatetime||e.isNumeric)&&(e.mixed=!0)));if(c&&e.mixed&&(h[t]=u[t]),c&&l&&this.options.sort)for(t=0;t<h.length;t++)h[t].reverse(),p&&h[t].unshift(h[t].pop())},l.prototype.parseDate=function(e){var t,r,s,n,o=this.options.parseDate,a=this.options.dateFormat||this.dateFormat;if(o)t=o(e);else if("string"==typeof e){if(a)s=(s=this.dateFormats[a])||this.dateFormats["YYYY/mm/dd"],(n=e.match(s.regex))&&(t=s.parser(n));else for(r in this.dateFormats)if(s=this.dateFormats[r],n=e.match(s.regex)){this.dateFormat=a=r,this.alternativeFormat=s.alternative,t=s.parser(n);break}n||("object"==typeof(n=Date.parse(e))&&null!==n&&n.getTime?t=n.getTime()-6e4*n.getTimezoneOffset():C(n)&&(t=n-6e4*new Date(n).getTimezoneOffset()))}return t},l.prototype.rowsToColumns=function(e){var t,r,s,n,o;if(e)for(o=[],r=e.length,t=0;t<r;t++)for(n=e[t].length,s=0;s<n;s++)o[s]||(o[s]=[]),o[s][t]=e[t][s];return o},l.prototype.getData=function(){if(this.columns)return this.rowsToColumns(this.columns).slice(1)},l.prototype.parsed=function(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)},l.prototype.getFreeIndexes=function(e,t){for(var r,s,n=[],o=[],a=0;a<e;a+=1)n.push(!0);for(r=0;r<t.length;r+=1)for(s=t[r].getReferencedColumnIndexes(),a=0;a<s.length;a+=1)n[s[a]]=!1;for(a=0;a<n.length;a+=1)n[a]&&o.push(a);return o},l.prototype.complete=function(){var e,t,r,s,n,o,a,i,l,u,h,d,p=this.columns,c=this.options,f=[];if(p.length,c.complete||c.afterComplete){if(this.firstRowAsNames)for(s=0;s<p.length;s++)p[s].name=p[s].shift();for(t=[],u=this.getFreeIndexes(p.length,this.valueCount.seriesBuilders),a=0;a<this.valueCount.seriesBuilders.length;a++)(l=this.valueCount.seriesBuilders[a]).populateColumns(u)&&f.push(l);for(;0<u.length;){for((l=new v).addColumnReader(0,"x"),-1!==(d=u.indexOf(0))&&u.splice(d,1),s=0;s<this.valueCount.global;s++)l.addColumnReader(void 0,this.valueCount.globalPointArrayMap[s]);l.populateColumns(u)&&f.push(l)}if(0<f.length&&0<f[0].readers.length&&void 0!==(h=p[f[0].readers[0].columnIndex])&&(h.isDatetime?e="datetime":h.isNumeric||(e="category")),"category"===e)for(a=0;a<f.length;a++)for(l=f[a],o=0;o<l.readers.length;o++)"x"===l.readers[o].configName&&(l.readers[o].configName="name");for(a=0;a<f.length;a++){for(l=f[a],r=[],n=0;n<p[0].length;n++)r[n]=l.read(p,n);t[a]={data:r},l.name&&(t[a].name=l.name),"category"===e&&(t[a].turboThreshold=0)}i={series:t},e&&(i.xAxis={type:e},"category"===e&&(i.xAxis.uniqueNames=!1)),c.complete&&c.complete(i),c.afterComplete&&c.afterComplete(i)}},l.prototype.update=function(e,t){var r=this.chart;e&&(e.afterComplete=function(e){e&&(e.xAxis&&r.xAxis[0]&&e.xAxis.type===r.xAxis[0].options.type&&delete e.xAxis,r.update(e,t,!0))},c(!0,r.options.data,e),this.init(r.options.data))},l);function l(e,t,r){this.chart=void 0,this.chartOptions=void 0,this.firstRowAsNames=void 0,this.rawColumns=void 0,this.options=void 0,this.dateFormats={"YYYY/mm/dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{1,2})$/,parser:function(e){return e?Date.UTC(+e[1],e[2]-1,+e[3]):NaN}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return e?Date.UTC(+e[3],e[2]-1,+e[1]):NaN},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return e?Date.UTC(+e[3],e[1]-1,+e[2]):NaN}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){if(!e)return NaN;var t=+e[3];return t>(new Date).getFullYear()-2e3?t+=1900:t+=2e3,Date.UTC(t,e[2]-1,+e[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){return e?Date.UTC(+e[3]+2e3,e[1]-1,+e[2]):NaN}}},this.init(e,t,r)}f.data=function(e,t,r){return new f.Data(e,t,r)},t(s,"init",function(e){var s=this,n=e.args[0]||{},o=e.args[1];n&&n.data&&!s.hasDataDef&&(s.hasDataDef=!0,s.data=new f.Data(r(n.data,{afterComplete:function(e){var t,r;if(Object.hasOwnProperty.call(n,"series"))if("object"==typeof n.series)for(t=Math.max(n.series.length,e&&e.series?e.series.length:0);t--;)r=n.series[t]||{},n.series[t]=c(r,e&&e.series?e.series[t]:{});else delete n.series;n=c(e,n),s.init(n,o)}}),n,s),e.preventDefault())});var v=(u.prototype.populateColumns=function(t){var r=!0;return this.readers.forEach(function(e){void 0===e.columnIndex&&(e.columnIndex=t.shift())}),this.readers.forEach(function(e){void 0===e.columnIndex&&(r=!1)}),r},u.prototype.read=function(r,s){var e,n=this.pointIsArray,o=n?[]:{};return this.readers.forEach(function(e){var t=r[e.columnIndex][s];n?o.push(t):0<e.configName.indexOf(".")?a.prototype.setNestedProperty(o,t,e.configName):o[e.configName]=t}),void 0===this.name&&2<=this.readers.length&&2<=(e=this.getReferencedColumnIndexes()).length&&(e.shift(),e.sort(function(e,t){return e-t}),this.name=r[e.shift()].name),o},u.prototype.addColumnReader=function(e,t){this.readers.push({columnIndex:e,configName:t}),"x"!==t&&"y"!==t&&void 0!==t&&(this.pointIsArray=!1)},u.prototype.getReferencedColumnIndexes=function(){for(var e,t=[],r=0;r<this.readers.length;r+=1)void 0!==(e=this.readers[r]).columnIndex&&t.push(e.columnIndex);return t},u.prototype.hasReader=function(e){for(var t=0;t<this.readers.length;t+=1)if(this.readers[t].configName===e)return!0},u);function u(){this.readers=[],this.pointIsArray=!0,this.name=void 0}return f.Data=i,f.Data}),r(t,"masters/modules/data.src.js",[],function(){})});