"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function isArray(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}var INFINITY=1/0;function baseToString(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toString(e){return null==e?"":baseToString(e)}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"===_typeof(e)}function isDefined(e){return null!=e}function isBlank(e){return!e.trim().length}var EXTENDED_SEARCH_UNAVAILABLE="Extended search is not available",LOGICAL_SEARCH_UNAVAILABLE="Logical search is not available",INCORRECT_INDEX_TYPE="Incorrect 'index' type",LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY=function(e){return"Invalid value for key ".concat(e)},PATTERN_LENGTH_TOO_LARGE=function(e){return"Pattern length exceeds max of ".concat(e,".")},MISSING_KEY_PROPERTY=function(e){return"Missing ".concat(e," property in key")},INVALID_KEY_WEIGHT_VALUE=function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")},hasOwn=Object.prototype.hasOwnProperty,KeyStore=function(){function t(e){var n=this;_classCallCheck(this,t),this._keys={},this._keyNames=[];var i=0;e.forEach(function(e){var t,r=1;if(isString(e))t=e;else{if(!hasOwn.call(e,"name"))throw new Error(MISSING_KEY_PROPERTY("name"));if(t=e.name,hasOwn.call(e,"weight")&&(r=e.weight)<=0)throw new Error(INVALID_KEY_WEIGHT_VALUE(t))}n._keyNames.push(t),n._keys[t]={weight:r},i+=r}),this._keyNames.forEach(function(e){n._keys[e].weight/=i})}return _createClass(t,[{key:"get",value:function(e,t){return this._keys[e]&&this._keys[e][t]}},{key:"keys",value:function(){return this._keyNames}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),t}();function get(e,t){var h=[],u=!1;return function e(t,r){if(r){var n=r.indexOf("."),i=r,o=null;-1!==n&&(i=r.slice(0,n),o=r.slice(n+1));var a=t[i];if(!isDefined(a))return;if(o||!isString(a)&&!isNumber(a))if(isArray(a)){u=!0;for(var s=0,c=a.length;s<c;s+=1)e(a[s],o)}else o&&e(a,o);else h.push(toString(a))}else h.push(t)}(e,t),u?h:h[0]}var MatchOptions={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},BasicOptions={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}},FuzzyOptions={location:0,threshold:.6,distance:100},AdvancedOptions={useExtendedSearch:!1,getFn:get},Config=_objectSpread2({},BasicOptions,{},MatchOptions,{},FuzzyOptions,{},AdvancedOptions),SPACE=/[^ ]+/g;function norm(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,i=new Map;return{get:function(e){var t=e.match(SPACE).length;if(i.has(t))return i.get(t);var r=parseFloat((1/Math.sqrt(t)).toFixed(n));return i.set(t,r),r},clear:function(){i.clear()}}}var FuseIndex=function(){function r(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).getFn,t=void 0===e?Config.getFn:e;_classCallCheck(this,r),this.norm=norm(3),this.getFn=t,this.isCreated=!1,this.setRecords()}return _createClass(r,[{key:"setCollection",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];this.docs=t}},{key:"setRecords",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];this.records=t}},{key:"setKeys",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];this.keys=t}},{key:"create",value:function(){var r=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,isString(this.docs[0])?this.docs.forEach(function(e,t){r._addString(e,t)}):this.docs.forEach(function(e,t){r._addObject(e,t)}),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();isString(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,r=this.size();t<r;t+=1)--this.records[t].i}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){var r;isDefined(e)&&!isBlank(e)&&(r={v:e,i:t,n:this.norm.get(e)},this.records.push(r))}},{key:"_addObject",value:function(r,e){var c=this,h={i:e,$:{}};this.keys.forEach(function(e,a){var t,s=c.getFn(r,e);isDefined(s)&&(isArray(s)?function(){for(var e=[],r=[{nestedArrIndex:-1,value:s}];r.length;){var t,n=r.pop(),i=n.nestedArrIndex,o=n.value;isDefined(o)&&(isString(o)&&!isBlank(o)?(t={v:o,i:i,n:c.norm.get(o)},e.push(t)):isArray(o)&&o.forEach(function(e,t){r.push({nestedArrIndex:t,value:e})}))}h.$[a]=e}():isBlank(s)||(t={v:s,n:c.norm.get(s)},h.$[a]=t))}),this.records.push(h)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),r}();function createIndex(e,t){var r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).getFn,n=void 0===r?Config.getFn:r,i=new FuseIndex({getFn:n});return i.setKeys(e),i.setCollection(t),i.create(),i}function parseIndex(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).getFn,r=void 0===t?Config.getFn:t,n=e.keys,i=e.records,o=new FuseIndex({getFn:r});return o.setKeys(n),o.setRecords(i),o}function transformMatches(e,r){var t=e.matches;r.matches=[],isDefined(t)&&t.forEach(function(e){var t;isDefined(e.indices)&&e.indices.length&&(t={indices:e.indices,value:e.value},e.key&&(t.key=e.key),-1<e.idx&&(t.refIndex=e.idx),r.matches.push(t))})}function transformScore(e,t){t.score=e.score}function computeScore(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.errors,n=void 0===r?0:r,i=t.currentLocation,o=void 0===i?0:i,a=t.expectedLocation,s=void 0===a?0:a,c=t.distance,h=void 0===c?Config.distance:c,u=n/e.length,f=Math.abs(s-o);return h?u+f/h:f?1:u}function convertMaskToIndices(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Config.minMatchCharLength,r=[],n=-1,i=-1,o=0,a=e.length;o<a;o+=1){var s=e[o];s&&-1===n?n=o:s||-1===n||(t<=(i=o-1)-n+1&&r.push([n,i]),n=-1)}return e[o-1]&&t<=o-n&&r.push([n,o-1]),r}var MAX_BITS=32;function search(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=n.location,o=void 0===i?Config.location:i,a=n.distance,s=void 0===a?Config.distance:a,c=n.threshold,h=void 0===c?Config.threshold:c,u=n.findAllMatches,f=void 0===u?Config.findAllMatches:u,l=n.minMatchCharLength,d=void 0===l?Config.minMatchCharLength:l,v=n.includeMatches,y=void 0===v?Config.includeMatches:v;if(t.length>MAX_BITS)throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS));var p,g=t.length,_=e.length,m=Math.max(0,Math.min(o,_)),A=h,S=m,b=[];if(y)for(var k=0;k<_;k+=1)b[k]=0;for(;-1<(p=e.indexOf(t,S));){var C=computeScore(t,{currentLocation:p,expectedLocation:m,distance:s}),A=Math.min(C,A),S=p+g;if(y)for(var E=0;E<g;)E+=b[p+E]=1}S=-1;for(var I=[],O=1,M=g+_,L=1<<(g<=MAX_BITS-1?g-1:MAX_BITS-2),x=0;x<g;x+=1){for(var w=0,T=M;w<T;){computeScore(t,{errors:x,currentLocation:m+T,expectedLocation:m,distance:s})<=A?w=T:M=T,T=Math.floor((M-w)/2+w)}M=T;var N=Math.max(1,m-T+1),F=f?_:Math.min(m+T,_)+g,j=Array(F+2);j[F+1]=(1<<x)-1;for(var P=F;N<=P;--P){var D=P-1,R=r[e.charAt(D)];if(R&&y&&(b[D]=1),j[P]=(j[P+1]<<1|1)&R,0!==x&&(j[P]|=(I[P+1]|I[P])<<1|1|I[P+1]),j[P]&L&&(O=computeScore(t,{errors:x,currentLocation:D,expectedLocation:m,distance:s}))<=A){if(A=O,(S=D)<=m)break;N=Math.max(1,2*m-S)}}if(A<computeScore(t,{errors:x+1,currentLocation:m,expectedLocation:m,distance:s}))break;I=j}var B={isMatch:0<=S,score:Math.max(.001,O)};return y&&(B.indices=convertMaskToIndices(b,d)),B}function createPatternAlphabet(e){for(var t={},r=e.length,n=0;n<r;n+=1)t[e.charAt(n)]=0;for(var i=0;i<r;i+=1)t[e.charAt(i)]|=1<<r-i-1;return t}var BitapSearch=function(){function _(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.location,n=void 0===r?Config.location:r,i=t.threshold,o=void 0===i?Config.threshold:i,a=t.distance,s=void 0===a?Config.distance:a,c=t.includeMatches,h=void 0===c?Config.includeMatches:c,u=t.findAllMatches,f=void 0===u?Config.findAllMatches:u,l=t.minMatchCharLength,d=void 0===l?Config.minMatchCharLength:l,v=t.isCaseSensitive,y=void 0===v?Config.isCaseSensitive:v;_classCallCheck(this,_),this.options={location:n,threshold:o,distance:s,includeMatches:h,findAllMatches:f,minMatchCharLength:d,isCaseSensitive:y},this.pattern=y?e:e.toLowerCase(),this.chunks=[];for(var p=0;p<this.pattern.length;){var g=this.pattern.substring(p,p+MAX_BITS);this.chunks.push({pattern:g,alphabet:createPatternAlphabet(g)}),p+=MAX_BITS}}return _createClass(_,[{key:"searchIn",value:function(c){var e=this.options,t=e.isCaseSensitive,h=e.includeMatches;if(t||(c=c.toLowerCase()),this.pattern===c){var r={isMatch:!0,score:0};return h&&(r.indices=[[0,c.length-1]]),r}var n=this.options,u=n.location,f=n.distance,l=n.threshold,d=n.findAllMatches,v=n.minMatchCharLength,y=[],p=0,g=!1;this.chunks.forEach(function(e,t){var r=e.pattern,n=e.alphabet,i=search(c,r,n,{location:u+MAX_BITS*t,distance:f,threshold:l,findAllMatches:d,minMatchCharLength:v,includeMatches:h}),o=i.isMatch,a=i.score,s=i.indices;o&&(g=!0),p+=a,o&&s&&(y=[].concat(_toConsumableArray(y),_toConsumableArray(s)))});var i={isMatch:g,score:g?p/this.chunks.length:1};return g&&h&&(i.indices=y),i}}]),_}(),registeredSearchers=[];function createSearcher(e,t){for(var r=0,n=registeredSearchers.length;r<n;r+=1){var i=registeredSearchers[r];if(i.condition(e,t))return new i(e,t)}return new BitapSearch(e,t)}var LogicalOperator={AND:"$and",OR:"$or"},isExpression=function(e){return!(!e[LogicalOperator.AND]&&!e[LogicalOperator.OR])},isLeaf=function(e){return!isArray(e)&&isObject(e)&&!isExpression(e)},convertToExplicit=function(t){return _defineProperty({},LogicalOperator.AND,Object.keys(t).map(function(e){return _defineProperty({},e,t[e])}))};function parse(e,s){var t=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).auto,c=void 0===t||t;return isExpression(e)||(e=convertToExplicit(e)),function r(n){var e=Object.keys(n);if(1<e.length&&!isExpression(n))return r(convertToExplicit(n));var t=e[0];if(isLeaf(n)){var i=n[t];if(!isString(i))throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(t));var o={key:t,pattern:i};return c&&(o.searcher=createSearcher(i,s)),o}var a={children:[],operator:t};return e.forEach(function(e){var t=n[e];isArray(t)&&t.forEach(function(e){a.children.push(r(e))})}),a}(e)}var Fuse=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(_classCallCheck(this,n),this.options=_objectSpread2({},Config,{},t),this.options.useExtendedSearch)throw new Error(EXTENDED_SEARCH_UNAVAILABLE);this._keyStore=new KeyStore(this.options.keys),this.setCollection(e,r)}return _createClass(n,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof FuseIndex))throw new Error(INCORRECT_INDEX_TYPE);this._myIndex=t||createIndex(this._keyStore.keys(),this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(e){isDefined(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e,t){var r=(1<arguments.length&&void 0!==t?t:{}).limit,n=void 0===r?-1:r,i=this.options,o=i.includeMatches,a=i.includeScore,s=i.shouldSort,c=i.sortFn,h=isString(e)?isString(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return computeScore$1(h,this._keyStore),s&&h.sort(c),isNumber(n)&&-1<n&&(h=h.slice(0,n)),format(h,this._docs,{includeMatches:o,includeScore:a})}},{key:"_searchStringList",value:function(e){var c=createSearcher(e,this.options),t=this._myIndex.records,h=[];return t.forEach(function(e){var t,r,n,i,o=e.v,a=e.i,s=e.n;isDefined(o)&&(r=(t=c.searchIn(o)).isMatch,n=t.score,i=t.indices,r&&h.push({item:o,idx:a,matches:[{score:n,value:o,norm:s,indices:i}]}))}),h}},{key:"_searchLogical",value:function(){throw new Error(LOGICAL_SEARCH_UNAVAILABLE)}},{key:"_searchObjectList",value:function(e){var i=this,o=createSearcher(e,this.options),t=this._myIndex,a=t.keys,r=t.records,s=[];return r.forEach(function(e){var r,n=e.$,t=e.i;isDefined(n)&&(r=[],a.forEach(function(e,t){r.push.apply(r,_toConsumableArray(i._findMatches({key:e,value:n[t],searcher:o})))}),r.length&&s.push({idx:t,item:n,matches:r}))}),s}},{key:"_findMatches",value:function(e){var c=e.key,t=e.value,h=e.searcher;if(!isDefined(t))return[];var r,n,i,o,a,s,u=[];return isArray(t)?t.forEach(function(e){var t,r,n,i,o=e.v,a=e.i,s=e.n;isDefined(o)&&(r=(t=h.searchIn(o)).isMatch,n=t.score,i=t.indices,r&&u.push({score:n,key:c,value:o,idx:a,norm:s,indices:i}))}):(r=t.v,n=t.n,o=(i=h.searchIn(r)).isMatch,a=i.score,s=i.indices,o&&u.push({score:a,key:c,value:r,norm:n,indices:s})),u}}]),n}();function computeScore$1(e,a){e.forEach(function(e){var o=1;e.matches.forEach(function(e){var t=e.key,r=e.norm,n=e.score,i=a.get(t,"weight");o*=Math.pow(0===n&&i?Number.EPSILON:n,(i||1)*r)}),e.score=o})}function format(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=t.includeMatches,i=void 0===r?Config.includeMatches:r,o=t.includeScore,a=void 0===o?Config.includeScore:o,s=[];return i&&s.push(transformMatches),a&&s.push(transformScore),e.map(function(t){var e=t.idx,r={item:n[e],refIndex:e};return s.length&&s.forEach(function(e){e(t,r)}),r})}Fuse.version="6.0.0",Fuse.createIndex=createIndex,Fuse.parseIndex=parseIndex,Fuse.config=Config,Fuse.parseQuery=parse,module.exports=Fuse;