!function(n,f){function t(a,d){"use strict";var i=0,s=function(t,o){if(!(this instanceof s))throw"FixedHeader must be initialised with the 'new' keyword.";!0===o&&(o={}),t=new d.Api(t),this.c=a.extend(!0,{},s.defaults,o),this.s={dt:t,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:a(n).height(),visible:!0},headerMode:null,footerMode:null,namespace:".dtfc"+i++},this.dom={floatingHeader:null,thead:a(t.table().header()),tbody:a(t.table().body()),tfoot:a(t.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var e=t.settings()[0];if(e._fixedHeader)throw"FixedHeader already initialised on table "+e.nTable.id;(e._fixedHeader=this)._constructor()};return s.prototype={update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var t=this,o=this.s.dt;a(n).on("scroll"+this.s.namespace,function(){t._scroll()}).on("resize"+this.s.namespace,function(){t.s.position.windowHeight=a(n).height(),t._positions(),t._scroll(!0)}),o.on("column-reorder.dt.dtfc column-visibility.dt.dtfc",function(){t._positions(),t._scroll(!0)}).on("draw.dtfc",function(){t._positions(),t._scroll()}),o.on("destroy.dtfc",function(){o.off(".dtfc"),a(n).off(this.s.namespace)}),this._positions(),this._scroll()},_clone:function(t,o){var e=this.s.dt,i=this.dom[t],d="header"===t?this.dom.thead:this.dom.tfoot;!o&&i.floating?i.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(i.floating&&(i.placeholder.remove(),i.floating.children().detach(),i.floating.remove()),i.floating=a(e.table().node().cloneNode(!1)).removeAttr("id").append(d).appendTo("body"),i.placeholder=d.clone(!1),i.host.append(i.placeholder),"footer"===t&&this._footerMatch(i.placeholder,i.floating))},_footerMatch:function(e,i){function t(t){var o=a(t,e).map(function(){return a(this).width()}).toArray();a(t,i).each(function(t){a(this).width(o[t])})}t("th"),t("td")},_footerUnsize:function(){var t=this.dom.footer.floating;t&&a("th, td",t).css("width","")},_modeChange:function(t,o,e){this.s.dt;var i=this.dom[o],d=this.s.position;"in-place"===t?(i.placeholder&&(i.placeholder.remove(),i.placeholder=null),i.host.append("header"===o?this.dom.thead:this.dom.tfoot),i.floating&&(i.floating.remove(),i.floating=null),"footer"===o&&this._footerUnsize()):"in"===t?(this._clone(o,e),i.floating.addClass("fixedHeader-floating").css("header"===o?"top":"bottom",this.c[o+"Offset"]).css("left",d.left+"px").css("width",d.width+"px"),"footer"===o&&i.floating.css("top","")):"below"===t?(this._clone(o,e),i.floating.addClass("fixedHeader-locked").css("top",d.tfootTop-d.theadHeight).css("left",d.left+"px").css("width",d.width+"px")):"above"===t&&(this._clone(o,e),i.floating.addClass("fixedHeader-locked").css("top",d.tbodyTop).css("left",d.left+"px").css("width",d.width+"px")),this.s[o+"Mode"]=t},_positions:function(){var t=this.s.dt.table(),o=this.s.position,e=this.dom,i=a(t.node()),d=i.children("thead"),s=i.children("tfoot"),n=e.tbody;o.visible=i.is(":visible"),o.width=i.outerWidth(),o.left=i.offset().left,o.theadTop=d.offset().top,o.tbodyTop=n.offset().top,o.theadHeight=o.tbodyTop-o.theadTop,s.length?(o.tfootTop=s.offset().top,o.tfootBottom=o.tfootTop+s.outerHeight(),o.tfootHeight=o.tfootBottom-o.tfootTop):(o.tfootTop=o.tbodyTop+n.outerHeight(),o.tfootBottom=o.tfootTop,o.tfootHeight=o.tfootTop)},_scroll:function(t){var o,e,i=a(f).scrollTop(),d=this.s.position;this.c.header&&(o=!d.visible||i<=d.theadTop-this.c.headerOffset?"in-place":i<=d.tfootTop-d.theadHeight-this.c.headerOffset?"in":"below",!t&&o===this.s.headerMode||this._modeChange(o,"header",t)),this.c.footer&&this.dom.tfoot.length&&(e=!d.visible||i+d.windowHeight>=d.tfootBottom+this.c.footerOffset?"in-place":d.windowHeight+i>d.tbodyTop+d.tfootHeight+this.c.footerOffset?"in":"above",!t&&e===this.s.footerMode||this._modeChange(e,"footer",t))}},s.version="3.0.0",s.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},a.fn.dataTable.FixedHeader=s,a.fn.DataTable.FixedHeader=s,a(f).on("init.dt.dtb",function(t,o,e){var i;"dt"!==t.namespace||(i=o.oInit.fixedHeader||d.defaults.fixedHeader)&&!o._buttons&&new s(o,i)}),d.Api.register("fixedHeader()",function(){}),d.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(t){var o=t._fixedHeader;o&&o.update()})}),s}"function"==typeof define&&define.amd?define(["jquery","datatables"],t):"object"==typeof exports?t(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.FixedHeader&&t(jQuery,jQuery.fn.dataTable)}(window,document);